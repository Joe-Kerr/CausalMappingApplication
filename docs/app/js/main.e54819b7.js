(function(t){function e(e){for(var i,s,a=e[0],d=e[1],l=e[2],u=0,p=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(i in d)Object.prototype.hasOwnProperty.call(d,i)&&(t[i]=d[i]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,a=1;a<n.length;a++){var d=n[a];0!==o[d]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={main:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=d;r.push(["7f6d","chunk-vendors"]),n()})({"7f6d":function(t,e,n){"use strict";n.r(e);n("96cf");var o=n("3b8d"),r=(n("cadf"),n("551c"),n("f751"),n("097d"),n("ac6a"),n("5df3"),{mixins:{},factory:function(t,e,n){for(var i=function(t,e){this.owner=t,this.api=e.api;var n=e;this.getMainRef=function(t){return n[t]}},o=0,s=n.length;o<s;o++)r.mixins.hasOwnProperty(n[o])?i.prototype[n[o]]=r.mixins[n[o]]:console.error(n[o]+" is not a valid mixin.");return new i(t,e)}});r.mixins.publishService=function(t,e,n){var i=this.getMainRef("services");if("undefined"!=typeof n)for(var o in e)"function"==typeof e[o]&&(e[o]=e[o].bind(n));return i[t]={owner:this.owner,subscribers:[],service:e},i[t].service},r.mixins.subscribeToService=function(t){var e=this.getMainRef("services");return e[t].subscribers.push(this.owner),e[t].service},r.mixins.createProperty=function(t,e){var n=this.getMainRef("properties");return!n.hasOwnProperty(t)&&(n[t]="undefined"!==typeof e&&e,!0)},r.mixins.augmentApi=function(t){for(var e in t)t.hasOwnProperty(e)&&!this.api.hasOwnProperty(e)&&(this.api[e]=t[e])};var s=r,a=function t(){"undefined"!==typeof EXCEPTION_HANDLER&&EXCEPTION_HANDLER.nextAppState(),this.constants={DRAW_SPACE_ID:"drawspace",NODE_CLASS:"node",LINK_CLASS:"link",CONTENT_CLASS:"nodeContent",CONTENT_ID_PREFIX:"nodeContent",NODE_ID_CLASS:"nodeID",NODE_ID_PREFIX:"nodeID",ENVIRONMENT:"electron"};var e={},n={},i={},r=[],a={};a.services=i;var d={};function l(t,e){var i=n;if("undefined"===typeof i[e.service])throw new Error("Tried to link to unknown component/plugin: "+e.service);"undefined"===typeof e.type?(e.preInitContext[e.storeProperty]=i[e.service][e.serviceProperty].get(),e.serviceData=i[e.service][e.serviceProperty]):"reference"===e.type&&(e.preInitContext[e.storeProperty]=i[e.service][e.serviceProperty])}function c(t,e){for(var n in t){var i=t[n];if("undefined"!==typeof i.publishService){for(var o=i.publishService instanceof Array?i.publishService:[i.publishService],r=0,s=o.length;r<s;r++){var a=o[r];if("undefined"===typeof e[a.id])e[a.id]={owner:i.id,subscribers:[],service:a};else for(var d in e[a.id].owner=i.id,a)e[a.id].service[d]=a[d]}i.publishService=null}}}function u(t,e){for(var n in t){var i=t[n];if("undefined"!==typeof i.useService){for(var o=0,r=i.useService.length;o<r;o++){var s=i.useService[o];"undefined"===typeof e[s]&&(e[s]={owner:null,subscribers:[],service:{}}),e[s].subscribers.push(i.id),"undefined"===typeof i.services&&(i.services={}),i.services[s]=e[s].service}i.useService=null}}}function p(t,e){return new Promise((function(n,i){var o=[];for(var r in t)if("undefined"!==typeof t[r][e]){var s=t[r][e]();"undefined"!==typeof s&&"function"===typeof s.then&&o.push(s)}if(0===o.length)return n("ok");Promise.all(o).then((function(){return n("ok")})).catch((function(t){console.error(t),i(t)}))}))}d["properties"]={},d["services"]=i,d["components"]=n,d["plugins"]={},d["api"]=a,this.extend=function(t,n,i){var o,r,s,a;if(r=null,o=i,"function"===typeof n?o=n:r=n,null!=r&&r.hasOwnProperty("use"))for(s={},a=0;a<r.use.length;a++)s[r.use[a]]=d[r.use[a]];e[t]=new o(s)},this.createComponent=function(t,e){if("undefined"!==typeof n[t])return console.error("Tried to overwrite component: "+t,e),!1;if("system"==t)return console.error("_id '"+t+"' is an illegal name for a plugin"),!1;var i=e;i.id=t,n[t]=i,n[t](a,n[t])},this.createAnonymousComponent=function(t,e){if("undefined"===typeof t)throw new Error("Failed to provide valid credentials for createAnonymousComponent().");if(-1!==r.indexOf(t))throw new Error("Tried to register dynamic component with existing credentials: "+t);if(r.push(t),0===e.length)return null;var n={id:t+"_anonymous",services:{}},o=e.indexOf("dataLinker");return-1!==o&&(n.services.dataLinker=function(e){l(t,e)},e.splice(o,1)),n.useService=e,u([n],i),n=n.services,n},this.startUp=Object(o["a"])(regeneratorRuntime.mark((function o(){var r,l;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if("undefined"===typeof EXCEPTION_HANDLER||!EXCEPTION_HANDLER.hasAppCrashed()){o.next=2;break}return o.abrupt("return");case 2:for(l in e.appController.onCreate(s.factory("appController",d,["publishService","createProperty"])),c(n,i),u(n,i),t.atoms)t.atoms[l].api=a;for(r in n)for(l in e)e[l].hasOwnProperty("augmentComponent")&&e[l].augmentComponent(n[r]);if("undefined"===typeof EXCEPTION_HANDLER||!EXCEPTION_HANDLER.hasAppCrashed()){o.next=9;break}return o.abrupt("return");case 9:return o.prev=9,o.next=12,p(n,"onCreate");case 12:return o.next=14,p(n,"onInit");case 14:o.next=19;break;case 16:throw o.prev=16,o.t0=o["catch"](9),new Error(o.t0);case 19:if("undefined"===typeof EXCEPTION_HANDLER||!EXCEPTION_HANDLER.hasAppCrashed()){o.next=21;break}return o.abrupt("return");case 21:return e.appController.init(s.factory("appController",d,["subscribeToService"])),o.abrupt("return","ok");case 23:case"end":return o.stop()}}),o,null,[[9,16]])}))),this.postInit=function(){if("undefined"===typeof EXCEPTION_HANDLER||!EXCEPTION_HANDLER.hasAppCrashed()){for(var t in n)"undefined"!==typeof n[t]["postInit"]&&n[t].postInit();"undefined"!==typeof EXCEPTION_HANDLER&&EXCEPTION_HANDLER.hasAppCrashed()||("undefined"!==typeof EXCEPTION_HANDLER&&EXCEPTION_HANDLER.nextAppState(d),e.appController.postInit())}}},d=a,l="eventHandler",c=function(){var t=[],e=function(t,e){$(document).on(t,e)},n=function(t,e){$(document).trigger(t,e)},i=function(e){var n=t.indexOf(e);-1!=n&&t.splice(n,1),$(document).off(e)},o=function(t,e){$(document).trigger(t,e)},r=function(e,n){if(-1!=t.indexOf(e))throw new Error("Event handler: tried to listen to an already occupied push-event ("+e+").");return t.push(e),$(document).on(e,n),!0};this.augmentComponent=function(t){t.on=e,t.off=i,t.trigger=n,t.pushEvent=o,t.pullEvent=r}},u={id:l,extension:c},p="appController",h=["properties","services","components","plugins","api"],f=function(t){this.onCreate=function(t){console.warn("TODO!"),t.publishService("app",{destroy:n,getComponents:e})},this.init=function(){},this.postInit=function(){window.scrollTo(0,0)};var e=function(){return t.components},n=function(){var e,n=t.plugins,i=t.components;for(e in n)"function"===typeof n[e].destroy&&n[e].destroy();for(e in i)"function"===typeof i[e].destroy&&i[e].destroy();window.scrollTo(0,0)}},m={id:p,use:h,extension:f},v=(n("7f7f"),"commandController"),g=function(t,e){var n={},i=[],o=!1,r=[],s=!1,a=!1;function d(t){return"undefined"===typeof t||"undefined"===typeof t.name||"undefined"===typeof t.execute||"undefined"===typeof t.undo?(console.error("Insufficient parameters in register(). Expected object with properties: <string>name, <func>execute, <func>undo. Got: ",t),!1):n.hasOwnProperty(t.name)?(console.error("Tried to register existing command: "+t.name),!1):(t.execute instanceof Array?n[t.name]={execute:{func:t.execute[0],context:t.execute[1]},undo:t.undo,cache:t.cache||!1}:n[t.name]={execute:{func:t.execute,context:null},undo:t.undo,cache:t.cache||!1},!0)}function l(){return s?(console.error("command batch already started"),!1):(s=!0,r.push([]),!0)}function c(){s=!1}function u(t,d,l){if(o)throw new Error("Tried to execute a command from within undo process: command '"+t+"'");if(n.hasOwnProperty(t)){var c="undefined"===typeof l?{}:l;"undefined"!==typeof c.silent&&!0===c.silent||e.trigger("app.command.execute",{command:t,parameters:d,isBatch:s});var u=[];d instanceof Array?u=d:"undefined"!==d&&(u=[d]);var p=null;p="undefined"!=typeof c.context?c.context:n[t].execute.context;var h=!1;0==n[t].cache||a||(h=n[t].cache(d));var f=n[t].execute.func.apply(p,u);return a||(i.push({name:t,passthru:u,returnVal:f,cache:h}),!0===s&&r[r.length-1].push(i.length-1)),f}return console.error("Unknown command: "+t),!1}function p(){var t;if(!0===s)return console.error("Tried to undo a command while recording a batch. Undo aborted."),!1;if(0==i.length)return!1;o=!0,e.trigger("app.command.undo",{type:"before"});var a=i.length-1;if(r.length>0&&-1!=r[r.length-1].indexOf(a))for(var d=r.pop().reverse(),l=0;l<d.length;l++)d[l]!=i.length-1&&console.error("Command batch index not equal to commandStack index."),t=i.pop(),n[t.name].undo(t.passthru,t.returnVal,t.cache);else t=i.pop(),n[t.name].undo(t.passthru,t.returnVal,t.cache);return e.trigger("app.command.undo",{type:"after",commandStackLength:i.length}),o=!1,!0}function h(){m(),a=!0}function f(){a=!1}function m(){i=[],r=[]}function v(){var t=[];for(var e in n)t.push(e);return t}function g(){return i}e.publishService={id:"command",register:d,startCommandBatch:l,stopCommandBatch:c,execute:u,undo:p,reset:m,enableUndo:f,disableUndo:h,getAvailableCommands:v,getCommandStack:g},e.destroy=function(){r=[]}},y={id:v,component:g},w=(n("456d"),"actionController"),b=function(t,e){var n={};function i(t){if("undefined"!==typeof n[t.name])throw new Error("Tried to register action with existing name: "+t.name);n[t.name]=t.dispatch}function r(t,e){return s.apply(this,arguments)}function s(){return s=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"===typeof n[e]){t.next=2;break}throw new Error("Tried to dispatch action that is not of type function: "+e);case 2:return t.abrupt("return",n[e](i));case 3:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function a(){return Object.keys(n)}e.publishService={id:"action",register:i,dispatch:r,getAvailableActions:a}},x={id:w,component:b},S="nodes",C=function(t,e){function n(t,e,n,i,o){for(var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=[],a=e,d=n,l=a+i,c=d+o,u=0,p=t.length;u<p;u++)r&&a<=t[u].x&&l>=t[u].x+t[u].w&&d<=t[u].y&&c>=t[u].y+t[u].h?s.push(t[u]):r||a+i<t[u].x||t[u].x+t[u].w<a||d+o<t[u].y||t[u].y+t[u].h<d||s.push(t[u]);return s}function i(t,n,i,o){var r,s=[],a=[],d=null,l={mergeNode:null,delNodes:s,addLinks:a,error:d},c=e.services.links.getController().getElements(),u=[],p=[],h=[];if("lead"!==n)r=e.controller.getNextFreeNodeID();else{if(r=parseInt(i),isNaN(r)||0==r)return l.error="You have entered an invalid lead statement.",l;if(-1==t.indexOf(r))return l.error="The lead statement entered is not contained in the list of statements to be merged.",l}for(var f=0,m=t.length;f<m;f++){for(var v=e.services.sets.controller.getSetOfNode(t[f]),g=0,y=v.length;g<y;g++)-1===u.indexOf(v[g])&&u.push(v[g]);for(var w=0,b=c.length;w<b;w++)t[f]==c[w].to?-1==t.indexOf(c[w].from)&&-1==p.indexOf(c[w].from)&&p.push(c[w].from):t[f]==c[w].from&&-1==t.indexOf(c[w].to)&&-1==h.indexOf(c[w].to)&&h.push(c[w].to)}if("lead"!==n){l.mergeNode={x:40,y:40,sets:u,content:o||""};for(var x=0,k=t.length;x<k;x++)s.push({id:t[x]})}else{for(var S=0,C=t.length;S<C;S++)r!=t[S]&&s.push({id:t[S]});l.mergeNode={id:r,sets:u}}for(var F=0,N=p.length;F<N;F++)a.push({from:p[F],to:r});for(var O=0,$=h.length;O<$;O++)a.push({from:r,to:h[O]});return l}e.useService=["sets","links"],e.publishService={id:"nodes",getNodesWithinArea:n,getMergingInfo:i},e.onInit=function(){}},F={id:S,component:C},N={lib:null,renderers:{},addRenderer:function(t){this.renderers[t.id]=t},init:function(t){if("undefined"===typeof t)throw new Error("Please provide link_renderer_common library as parameter.");for(var e in this.lib=t,this.renderers)this.renderers[e].lib=this.lib},getListOfRenderers:function(){var t={};for(var e in this.renderers)t[e]=this.renderers[e].label;return t},getRenderer:function(t){if("undefined"===typeof t)throw new Error("No link provided for matching renderer.");if("undefined"!==typeof t.renderer&&"undefined"!==typeof this.renderers[t.renderer])return this.renderers[t.renderer];if("undefined"!==typeof this.renderers["straight"])return console.warn("getRenderer() received invalid link, resorting to default renderer.",t),this.renderers["straight"];throw new Error("Neither the provided nor the default link renderers are available.")},calculate:function(t,e,n){var i=this.getRenderer(n),o=i.calculate(t,e,n);return"undefined"===typeof o.cX&&(o.cX=0),"undefined"===typeof o.cY&&(o.cY=0),o},translateControlPoints:function(t,e,n){var i=this.getRenderer(t);return i.hasOwnProperty("translateControlPoints")?i.translateControlPoints(t,e,n):{cX:e,cY:n}},render:function(t,e){var n=this.getRenderer(t);return n.render(t,e)},renderCanvas:function(t,e){var n=this.getRenderer(t);return!!n.hasOwnProperty("renderCanvas")&&n.renderCanvas(t,e)},getNegativeSignCoordinates:function(t){var e=this.getRenderer(t);return e.hasOwnProperty("getNegativeSignCoordinates")?e.getNegativeSignCoordinates(t):this.lib.getNegativeSignCoordinates(t.x1,t.y1,t.x2,t.y2)},getLinkWeightCoordinates:function(t){var e=this.getRenderer(t);return e.hasOwnProperty("getLinkWeightCoordinates")?e.getLinkWeightCoordinates(t):[t.x2-10,t.y2+10]},onRendererChange:function(t){var e=this.getRenderer(t);return e.hasOwnProperty("getDefaults")?e.getDefaults(t):{cX:parseInt((t.x2+t.x1)/2),cY:parseInt((t.y2+t.y1)/2)}}},O={id:"straight",label:"Straight",lib:{},calculate:function(t,e,n){var i=this.lib.calculateFromVector(t,e),o=this.lib.calculateToVector(t,e);return{x1:i.x,y1:i.y,x2:o.x,y2:o.y}},render:function(t){return"M "+t.x1+", "+t.y1+" L "+t.x2+", "+t.y2},getDefaults:function(){return{cX:0,cY:0}},getLinkWeightCoordinates:function(t){var e=.5,n=parseInt(t.x2+e*(t.x1-t.x2)),i=parseInt(t.y2+e*(t.y1-t.y2));return[n,i]}},E={id:"curvedFixed",label:"Curved fixed",lib:{},cache:{x:null,y:null},calculate:function(t,e,n){var i=this.lib.calculateFromVectorFromMiddle(t),o=this.lib.calculateToVector(t,e),r=5,s=n.cY,a=this.controlPoint(i.x,i.y,o.x,o.y,r,s);if(0==a.x)return{x1:i.x,y1:i.y,x2:o.x,y2:o.y,cX:0,cY:0};var d=this.lib.calculateToVector({x:a.x,y:a.y,w:0,h:0},e);return this.cache.x=a.x,this.cache.y=a.y,{x1:i.x,y1:i.y,x2:d.x,y2:d.y,cX:r,cY:s}},translateControlPoints:function(t,e,n){var i,o,r,s,a,d,l=t.x1,c=t.y1,u=t.x2,p=t.y2,h=e,f=n,m=h*p-h*c-l*p+l*c-(f*u-f*l-c*u+c*l);m=m>0?1:m<0?-1:0,l-u==0?(a=l,d=f):c-p==0?(a=h,d=c):(i=(c-p)/(l-u),o=c-i*l,r=1/i*-1,s=f-r*h,a=(s-o)/(i-r),d=r*a+s);var v=Math.sqrt(Math.pow(a-h,2)+Math.pow(d-f,2));return v=parseInt(v*m),{cX:5,cY:v}},controlPoint:function(t,e,n,i,o,r){var s,a,d=(t+n)/2,l=(e+i)/2,c=(n-t)/2,u=(i-e)/2,p=Math.sqrt(c*c+u*u),h=o-1,f={x:0,y:0};return h==(o-1)/2?f:(s=d+u/p*r*(h-(o-1)/2),a=l-c/p*r*(h-(o-1)/2),f.x=parseInt(s),f.y=parseInt(a),f)},render:function(t,e){var n=this.cache.x,i=this.cache.y;return this.cache.x=null,this.cache.y=null,0!=n?"M"+t.x1+" "+t.y1+" Q"+n+" "+i+" "+t.x2+" "+t.y2:"M"+t.x1+" "+t.y1+" L"+t.x2+" "+t.y2},renderCanvas:function(t,e){var n=this.calculate(t.from,t.to,{cX:t.cXo,cY:t.cYo});e.moveTo(n.x1,n.y1),e.quadraticCurveTo(this.cache.x,this.cache.y,n.x2,n.y2);var i=n.x2-this.cache.x,o=n.y2-this.cache.y;return this.cache.x=null,this.cache.y=null,[i,o]},getDefaults:function(){return{cX:5,cY:5}},getLinkWeightCoordinates:function(t){var e,n=this.controlPoint(t.x1,t.y1,t.x2,t.y2,t.cX,t.cY),i=40,o=Math.sqrt(Math.pow(n.x-t.x2,2)+Math.pow(n.y-t.y2,2));e=i<o?(o-i)/o:.9;var r=(1-e)*(1-e)*t.x1+2*(1-e)*e*n.x+e*e*t.x2,s=(1-e)*(1-e)*t.y1+2*(1-e)*e*n.y+e*e*t.y2;return[r,s]},getNegativeSignCoordinates:function(t){var e=this.controlPoint(t.x1,t.y1,t.x2,t.y2,t.cX,t.cY);return this.lib.getNegativeSignCoordinates(e.x,e.y,t.x2,t.y2)}},I={id:"curvedFlex",label:"Curved flex",calculate:function(t,e,n){var i,o=this.lib.calculateFromVectorFromMiddle(t,e,n),r=n.cX+(o.x-n.x1),s=n.cY+(o.y-n.y1);return i=this.lib.calculateToVector({x:r,y:s,w:t.w,h:t.h},e,n),{x1:o.x,y1:o.y,x2:i.x,y2:i.y,cX:r,cY:s}},render:function(t){var e=[t.x1,t.cX,t.x2],n=[t.y1,t.cY,t.y2],i=this.lib.bezierControlPoints(e),o=this.lib.bezierControlPoints(n);return"M "+e[0]+" "+n[0]+" C "+i.p1[0]+" "+o.p1[0]+" "+i.p2[0]+" "+o.p2[0]+" "+e[1]+" "+n[1]+" M "+e[1]+" "+n[1]+" C "+i.p1[1]+" "+o.p1[1]+" "+i.p2[1]+" "+o.p2[1]+" "+e[2]+" "+n[2]},renderCanvas:function(t,e){var n,i,o,r,s=t.x1,a=t.y1,d=t.x2,l=t.y2,c=t.cX,u=t.cY;n=[s,c,d],i=[a,u,l],o=this.lib.bezierControlPoints(n),r=this.lib.bezierControlPoints(i);var p=d-o.p2[1],h=l-r.p2[1];return e.moveTo(s,a),e.bezierCurveTo(o.p1[0],r.p1[0],o.p2[0],r.p2[0],n[1],i[1]),e.moveTo(c,u),e.bezierCurveTo(o.p1[1],r.p1[1],o.p2[1],r.p2[1],n[2],i[2]),[p,h]},getLinkWeightCoordinates:function(t){var e,n=40,i=Math.sqrt(Math.pow(t.cX-t.x2,2)+Math.pow(t.cY-t.y2,2));e=n<i?(i-n)/i:.9;var o=[t.x1,t.cX,t.x2],r=[t.y1,t.cY,t.y2],s=this.lib.bezierControlPoints(o),a=this.lib.bezierControlPoints(r),d=o[1],l=r[1],c=o[2],u=r[2],p=s.p1[1],h=(a.p1[1],s.p2[1]),f=a.p2[1];return o=Math.pow(1-e,3)*d+3*Math.pow(1-e,2)*e*p+3*(1-e)*Math.pow(e,2)*h+Math.pow(e,3)*c,r=Math.pow(1-e,3)*l+3*Math.pow(1-e,2)*e*f+3*(1-e)*Math.pow(e,2)*f+Math.pow(e,3)*u,[o,r]},getNegativeSignCoordinates:function(t){return this.lib.getNegativeSignCoordinates(t.cX,t.cY,t.x2,t.y2)}};function P(t,e){var n,i,o=t.x,r=t.y,s=e.x,a=e.y,d=parseInt(t.w),l=parseInt(t.h),c=parseInt(s+e.w/2),u=parseInt(a+e.h/2);if(_(t,e))return console.info("rectVSrect update"),{x:parseInt(o+d/2),y:parseInt(r+l/2)};var p=A(c,u,o,r,o+d,r+l);return n=p.x,i=p.y,{x:parseInt(n),y:parseInt(i)}}function L(t){var e=t.x,n=t.y,i=t.w,o=t.h;return{x:parseInt(e+i/2),y:parseInt(n+o/2)}}function T(t,e){var n,i,o,r,s=e.w,a=e.h,d=t.w,l=t.h,c=parseInt(t.x),u=parseInt(t.y),p=parseInt(c+d/2),h=parseInt(u+l/2),f=parseInt(e.x),m=parseInt(e.y);if(s===d&&a===l&&f===c&&m===u)return{x:c+1,y:u+1};var v=p,g=h,y=0,w=0;n=f,o=f+s,i=m,r=m+a,f=parseInt(f+s/2),m=parseInt(m+a/2),y=f,w=m;var b=[];return b=D(v,g,f,m,n,i,o,r),2==b.length?"number"==typeof b[0]&&"number"==typeof b[1]&&(y=b[0],w=b[1]):console.error("TCoords off"),z(6,v,g,y,w)}function M(t,e,n,i){var o,r,s,a,d=t,l=e,c=n,u=i,p=c-d,h=u-l,f=-Math.atan2(h,p);return o=p*Math.cos(f)-h*Math.sin(f),r=p*Math.sin(f)+h*Math.cos(f),c>=d&&u<=l?(o-=10,r+=10):c>=d&&u>=l?(o-=15,r-=10):c<=d&&u>=l?(o-=15,r-=10):c<=d&&u<=l&&(o-=15,r-=10),f*=-1,s=o*Math.cos(f)-r*Math.sin(f),a=o*Math.sin(f)+r*Math.cos(f),s+=d,a+=l,[parseInt(s),parseInt(a)]}function A(t,e,n,i,o,r){n<=t&&t<=o&&i<=e&&e<=r&&console.error("Point "+[t,e]+"cannot be inside the rectangle: "+[n,i]+" - "+[o,r]+".");var s=(n+o)/2,a=(i+r)/2,d=(a-e)/(s-t);if(t<=s){var l=d*(n-t)+e;if(i<=l&&l<=r)return{x:n,y:l}}if(t>=s){var c=d*(o-t)+e;if(i<=c&&c<=r)return{x:o,y:c}}if(e<=a){var u=(i-e)/d+t;if(n<=u&&u<=o)return{x:u,y:i}}if(e>=a){var p=(r-e)/d+t;if(n<=p&&p<=o)return{x:p,y:r}}console.error("Cannot find intersection for "+[t,e]+" inside rectangle "+[n,i]+" - "+[o,r]+".  Working vars: "+[s,a,d])}function D(t,e,n,i,o,r,s,a){var d,l,c,u,p=t,h=e,f=n,m=i,v=o,g=r,y=s,w=a,b=f-p,x=m-h,k=B(b,x),S=b/k,C=x/k,F=0,N=k;if(0==b){if(p<1||p>y)return!1}else if(d=1/S,l=(v-p)*d,c=(y-p)*d,l>c&&(u=l,l=c,c=u),F=Math.max(F,l),N=Math.min(N,c),F>N)return!1;if(0==x){if(h<g||h>w)return!1}else if(d=1/C,l=(g-h)*d,c=(w-h)*d,l>c&&(u=l,l=c,c=u),F=Math.max(F,l),N=Math.min(N,c),F>N)return!1;var O=parseInt(p+S*F),$=parseInt(h+C*F);return[O,$]}function _(t,e){return!(e.x>t.x+t.w||e.x+e.w<t.x||e.y>t.y+t.h||e.y+e.h<t.y)}function W(t,e,n,i,o,r,s,a){if(t<=o&&n<=o||e<=r&&i<=r||t>=s&&n>=s||e>=a&&i>=a)return!1;var d=n-t,l=i-e;if(0!==d&&0!==l){var c=l/d,u=c*(o-t)+e;if(u>r&&u<a)return!0;if(u=c*(s-t)+e,u>r&&u<a)return!0;var p=(r-e)/c+t;if(p>o&&p<s)return!0;if(p=(a-e)/c+t,p>o&&p<s)return!0}else{if(0===d&&0!==l)return p=t,p>=o&&p<=s;if(0!==d&&0===l)return u=e,u>=r&&u<=a}return!1}function R(t){var e,n=[],i=[],o=t.length-1,r=0,s=[],a=[],d=[],l=[];for(s[0]=0,a[0]=2,d[0]=1,l[0]=t[0]+2*t[1],e=1;e<o-1;e++)s[e]=1,a[e]=4,d[e]=1,l[e]=4*t[e]+2*t[e+1];for(s[o-1]=2,a[o-1]=7,d[o-1]=0,l[o-1]=8*t[o-1]+t[o],e=1;e<o;e++)r=s[e]/a[e-1],a[e]=a[e]-r*d[e-1],l[e]=l[e]-r*l[e-1];for(n[o-1]=l[o-1]/a[o-1],e=o-2;e>=0;--e)n[e]=(l[e]-d[e]*n[e+1])/a[e];for(e=0;e<o-1;e++)i[e]=2*t[e+1]-n[e+1];return i[o-1]=.5*(t[o]+n[o-1]),{p1:n.map((function(t){return parseInt(t)})),p2:i.map((function(t){return parseInt(t)}))}}function B(t,e){return Math.sqrt(t*t+e*e)}function z(t,e,n,i,o){var r=i-e,s=o-n,a=Math.sqrt(r*r+s*s);return a>0?(r/=a,s/=a,r*=a-t,s*=a-t,{x:parseInt(e+r),y:parseInt(n+s)}):{x:parseInt(i),y:parseInt(o)}}var j={calculateFromVector:P,calculateFromVectorFromMiddle:L,calculateToVector:T,getNegativeSignCoordinates:M,pointOnRect:A,lineVSrect:D,bezierControlPoints:R,doesLineIntersectRect:W,rectVSrect:_,lengthOfTwoPoints:B},X="links";N.addRenderer(O),N.addRenderer(E),N.addRenderer(I),N.init(j);var Y=function(t,e){function n(t,e,n,i,o){for(var r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=[],a=e,d=n,l=a+i,c=d+o,u=0,p=t.length;u<p;u++){var h=t[u];r&&h.x1>=a&&h.y1>=d&&h.x1<=l&&h.y1<=c&&h.x2>=a&&h.y2>=d&&h.x2<=l&&h.y2<=c?s.push(t[u]):r||!1===j.doesLineIntersectRect(h.x1,h.y1,h.x2,h.y2,a,d,l,c)||s.push(t[u])}return s}e.publishService={id:"links",getLinksWithinArea:n,rendererChanged:N.onRendererChange.bind(N),getRenderController:function(){return N},getRenderers:N.getListOfRenderers.bind(N),getCoordinates:N.calculate.bind(N),getSVGPathDefinition:N.render.bind(N),getNegativeSignCoordinates:N.getNegativeSignCoordinates.bind(N),getLinkWeightCoordinates:N.getLinkWeightCoordinates.bind(N),translateControlPoints:N.translateControlPoints.bind(N)},e.onInit=function(){}},V={id:X,component:Y},H=n("7618");n("a481");var q="http",J=function(t,e){function n(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=new Promise((function(t,e){new URL("http://localhost/ccmapp/appdata/app.php");return e("No server available.")}));return e}function i(t){var e=new Promise((function(t,e){return e("No server available.")}));return e}e.publishService={id:"http",get:n,post:i}},G={id:q,component:J},U=function(){var t,e,n=!1,i={dialogCloseFocusesWindow:{start:function(){window.addEventListener("focus",r,!1)},stop:function(){window.removeEventListener("focus",r,!1)}},dialogCloseMouseMoveDocument:{timeout:-1,start:function(){this.timeout=setTimeout((function(){document.addEventListener("mousemove",r)}),100)},stop:function(){clearTimeout(this.timeout),document.removeEventListener("mousemove",r)}}};function o(){for(var t in i)i[t].start()}function r(t){l(),setTimeout((function(){n||(e(f("cancel",null)),c())}),100)}function s(t){var e=new FileReader;m(t);n=!0,e.readAsText(t.target.files[0],"UTF-8"),e.onload=a,e.onerror=function(){d(e.error)}}function a(e){t(f("done",e.target.result)),u()}function d(t){e(f("error",t)),u()}function l(){for(var t in i)i[t].stop()}function c(){t=null,e=null;var n=h();null!==n&&(n.removeEventListener("change",s),document.body.removeChild(n))}function u(){l(),c()}function p(){var t=document.createElement("input");return t.id="nativeFileLoader",t.type="file",t.name="files[]",t.style.border="0px #ffffff",t.style.color="#ffffff",t.style.backgroundColor="#ffffff",t.style.visibility="hidden",document.body.appendChild(t),t}function h(){return document.getElementById("nativeFileLoader")}function f(t,e){if("string"!==typeof t||"done"!==t&&"cancel"!==t&&"error"!==t)throw new Error("Invalid type in response protocol.");var n="error"!==t?e:new Error(e);return{type:t,data:n}}function m(t){return"undefined"!==typeof t.target&&"undefined"!==typeof t.target.files&&"undefined"!==typeof t.target.files[0]?t.target.files[0]:null}function v(t){return function(e){return"done"===e.type?t(null,e):t(e,null)}}function g(i){var r="function"===typeof i;if(null!==h()){var a=f("error","Another dialog is still opened.");return!1===r?Promise.reject(a):i(a,null)}var d=p();return n=!1,d.addEventListener("change",s),d.focus(),d.click(),o(),r?(t=v(i),e=v(i),null):new Promise((function(n,i){t=n,e=i}))}return{open:g,__browserDialogFileConfirm:s,__browserDialogDoneLoading:a,__browserDialogFailLoading:d,__handleDialogClose:r}}(),K=U;function Q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream";return new Promise((function(i,o){var r=e.replace(/[^a-z0-9\.]/gi,"_").toLowerCase(),s=t instanceof Blob?t:new Blob([t],{type:n}),a=URL.createObjectURL(s),d=document.createElement("a");d.target="_blank",d.download=r,d.href=a,d.id="fileServerSaveDialog",d.style.color="#ffffff",d.style.backgroundColor="#ffffff",document.body.appendChild(d),d.click(),setTimeout((function(){document.body.removeChild(document.getElementById("fileServerSaveDialog")),URL.revokeObjectURL(a),i("ok")}),1)}))}var Z="fileServer",tt=function(t,e){function n(t){return new Promise((function(n,i){e.services.http.get({cmd:"file_server_load",data:t}).then((function(t){return n(t)})).catch((function(t){return i(t)}))}))}function i(t){return r.apply(this,arguments)}function r(){return r=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",localStorage.getItem(e));case 1:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}function s(t,e){return a.apply(this,arguments)}function a(){return a=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return localStorage.setItem(n,e),t.abrupt("return","ok");case 2:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}e.useService=["http"],e.publishService={id:"fileServer",loadDialog:K.open,saveDialog:Q,loadFromFileSystem:n,loadFromLocalStorage:i,saveToLocalStorage:s}},et={id:Z,component:tt};function nt(t,e){if(this.id=parseInt(t),this.created=(new Date).getTime(),this.mappers="default",this.sources="default",this.sets=[],this.x=0,this.y=0,this.content="",this.annotation="",this.weight=100,this.view="view1",this.style={left:!1,top:!1,color:"#000000","background-color":"#FFFFFF","font-size":"12px","border-width":"1px","border-style":"solid","border-color":"#000000"},"undefined"!==typeof e){for(var n in e)"style"!=n&&"id"!=n&&(this[n]=e[n]);for(var n in e.style)this.style[n]=e.style[n]}}var it=nt;function ot(t,e){if(this.id=parseInt(t),this.level=0,this.weight=100,this.user="default",this.owner="default",this.from=0,this.to=0,this.isInverse=!1,this.created=(new Date).getTime(),this.view="view1",this.renderer="straight",this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cX=0,this.cY=0,this.style={stroke:"#000000","stroke-dasharray":"none"},"undefined"===typeof e||"undefined"===typeof e.from||"undefined"===typeof e.to)throw new Error("Link constructor requires init-object with at least from and to property.");for(var n in this.from=parseInt(e.from),this.to=parseInt(e.to),e)"style"!=n&&"id"!=n&&"from"!=n&&"to"!=n&&(this[n]=e[n]);for(var n in e.style)this.style[n]=e.style[n]}var rt=ot;function st(){this.id=0,this.mapLabel="default",this.mapDescription="",this.mapCopyrightInformation="",this.creationDate=(new Date).getTime(),this.lastSession=0,this.width=4e3,this.height=4e3}var at=st,dt=(n("28a5"),function(t){for(var e in t)this[e]=t[e]});dt.prototype.migrateSaveFilePreLoading=function(t){var e,n,i,o,r=t;if("undefined"===typeof t||null==t)return{};if(t instanceof Array&&(r={nodes:t[0],links:t[1],map:t[2],system:t[3]}),t.hasOwnProperty("modules")){for(e in t.modules)Object.keys(t.modules[e]).length>0&&(r[e]=t.modules[e]);r["nodes"]=t["nodes"],r["links"]=t["links"],r["map"]=t["map"],r["system"]=t["system"]}function s(t){for(var e,n=t.replace("object:","").split(","),i=0,o=n.length;i<o;i++)e[n[i].split(":")[0]]=n[i].split(":")[1];return e}function a(t){var e=t.replace("array:","").split(",");return e}function d(t){var e=t;for(var n in e)"string"===typeof e[n]&&(-1!==e[n].indexOf("object:")?e[n]=s(e[n]):-1!==e[n].indexOf("array:")&&(e[n]=a(e[n])))}if("undefined"===typeof r.system||"undefined"===typeof r.system.vfsv||r.system.vfsv<=5)t:for(e in r)if(r[e]instanceof Array)for(n=0,i=r[e].length;n<i;n++){if(o=r[e][n],"object"!==Object(H["a"])(o))continue t;d(o)}else"object"===Object(H["a"])(r[e])&&d(r[e]);return r},dt.prototype.migrateSavefileBeforeV5=function(t,e,n,i,o){var r,s,a,d;if("undefined"!=typeof o&&o.hasOwnProperty("vfsv")){if(1==o.vfsv){for(console.info("Migrating save file from vfsv1"),r=0,s=e.length;r<s;r++)1==e[r].isInverse||1==e[r].isInverse?e[r].certainty=-100:0!=e[r].isInverse&&0!=e[r].isInverse||(e[r].certainty=100),e[r].hasOwnProperty("certainty")&&(e[r]["weight"]=e[r]["certainty"],delete e[r]["certainty"]);for(r=0,s=t.length;r<s;r++)"inherit"==t[r].style["font-size"]&&(t[r].style["font-size"]="12px"),t[r].hasOwnProperty("importance")&&(t[r]["weight"]=t[r]["importance"],delete t[r]["importance"]);o.vfsv=2,this.migrateSavefileBeforeV5(t,e,n,i,o)}else if(2==o.vfsv){for(console.info("Migrating save file from vfsv2"),r=0,s=e.length;r<s;r++)0!=e[r].cX&&e[r].x1==e[r].cX&&e[r].cY==e[r].y1&&(e[r].cX=0,e[r].cY=0);o.vfsv=3,this.migrateSavefileBeforeV5(t,e,n,i,o)}else if(3==o.vfsv){console.info("Migrating save file from vfsv3");var l=[];for(r=0,s=t.length;r<s;r++)for(a=0,d=t[r].sets.length;a<d;a++)-1==l.indexOf(t[r].sets[a])&&l.push(t[r].sets[a]);i.hasOwnProperty("sets")||(i["sets"]={}),l.length>0?i["sets"]=l:i["sets"]=[],i.hasOwnProperty("views")||(i["view"]={view1:{label:"View 1"}}),o.vfsv=4,this.migrateSavefileBeforeV5(t,e,n,i,o)}else if(4==o.vfsv){console.info("Migrating save file from vfsv4"),i.hasOwnProperty("sets")&&i["sets"].hasOwnProperty("permanent")&&(i["sets"]=i["sets"]["permanent"]),i.hasOwnProperty("view")&&i["view"].hasOwnProperty("permanent")&&(i["view"]=i["view"]["permanent"]);var c=[];for(i.hasOwnProperty("paneAnnotations")&&i.paneAnnotations.hasOwnProperty("annotations")&&(c=i.paneAnnotations.annotations),r=0,s=t.length;r<s;r++)t[r].hasOwnProperty("annotation")&&""!=t[r].annotation&&c.push({id:t[r].id,annotation:t[r].annotation});for(c.length>0&&(i["paneAnnotations"]=c),r=0,s=e.length;r<s;r++)e[r].hasOwnProperty("cX")&&e[r].hasOwnProperty("cX")?0!==e[r].cX?e[r].renderer="curvedFlex":e[r].renderer="straight":(e[r].renderer="straight",e[r].cX=0,e[r].cY=0);o.vfsv=5}}else{console.info("Migrating save file from pre vfsv");var u=new this.Node(0);for(r=0,s=t.length;r<s;r++)t[r].hasOwnProperty("style")||(t[r]["style"]=JSON.parse(JSON.stringify(u.style))),"undefined"==typeof t[r].style["top"]||t[r].style["top"],t[r].style["top"]=t[r].y+"px","undefined"==typeof t[r].style["left"]||t[r].style["left"],t[r].style["left"]=t[r].x+"px",t[r].x>n.width&&(n.width=t[r].x+350),t[r].y>n.height&&(n.height=t[r].y+300);u=null;var p=new this.Link(0,0,0);for(r=0,s=e.length;r<s;r++)e[r].hasOwnProperty("style")||(e[r]["style"]=JSON.parse(JSON.stringify(p.style)));p=null,o=o||{vfsv:1},this.migrateSavefileBeforeV5(t,e,n,i,o)}},dt.prototype.migrateSavefileSinceV5=function(t,e){var n,i,o;if(5==e.vfsv){for(console.info("Migrating save file from vfsv5"),"undefined"!==typeof t.view&&(t.views=t.view,delete t.view),"undefined"!==typeof t.paneAnnotations&&(t.annotations=t.paneAnnotations,delete t.paneAnnotations),n=0,i=t.nodes.length;n<i;n++)o=t.nodes[n].sets.filter((function(t){return""!==t})),o.length!==t.nodes[n].sets.length&&(t.nodes[n].sets=o);e.vfsv=6,this.migrateSavefileSinceV5(t,e)}else if(6==e.vfsv){if(console.info("Migrating save file from vfsv6"),"undefined"!==typeof t.annotations){for(o={},n=0,i=t.annotations.length;n<i;n++)o[t.annotations[n].id]=t.annotations[n].annotation;for(n=0,i=t.nodes.length;n<i;n++)"undefined"!==typeof o[t.nodes[n].id]&&(t.nodes[n].annotation=o[t.nodes[n].id])}for(var r=t.links,s=0,a=r.length;s<a;s++)"undefined"===typeof r[s].style["stroke-dasharray"]&&(r[s].style["stroke-dasharray"]="none");if("undefined"!==typeof t.views){var d=[],l={},c=0;for(var u in t.views)l[u]=c,d.push({id:c,label:t.views[u].label}),c++;if(t.views=d,"undefined"!==typeof t.nodes)for(var p=0,h=t.nodes.length;p<h;p++)t.nodes[p].view=l[t.nodes[p].view]}e.vfsv=7,this.migrateSavefileSinceV5(t,e)}},dt.prototype.processMainElement=function(t,e,n){var i,o,r,s,a,d,l,c;switch(c=n||{},e){case"nodes":l="Node";break;case"links":l="Link";break;case"map":l="Map";break;default:throw new Error("Illegal type in processMainElement()")}for(a=new this[l](0,c),i=0,o=t.length;i<o;i++){for(r in d=t[i],d){if("number"===typeof a[r]){if(d[r]=parseInt(d[r]),isNaN(d[r]))throw console.error(r,l),new Error("Failed to parse property as int")}else"boolean"===typeof a[r]&&"boolean"!==typeof d[r]&&(0===d[r]||"false"===d[r]?d[r]=!1:1!==d[r]&&"true"!==d[r]||(d[r]=!0));"string"!==typeof d[r]||-1===d[r].indexOf("object:")&&-1===d[r].indexOf("array:")||console.error("Tried to load very old data format with object:/array: notation.",t)}s=new this[l](d.id,d),t[i]=s}},dt.prototype.loadMap=function(t){if("undefined"===typeof t.links&&(t.links=[]),"undefined"===typeof t.nodes&&(t.nodes=[]),"object"!=Object(H["a"])(t.nodes)||"object"!=Object(H["a"])(t.links)||"object"!=Object(H["a"])(t.map))return console.error("loadMap() received invalid data."),!1;var e=t.nodes,n=t.links,i=t.map,o=t.system;return this.processMainElement(e,"nodes"),this.processMainElement(n,"links",{from:0,to:0}),this.processMainElement([i],"map"),("undefined"===typeof o||!o.hasOwnProperty("vfsv")||o.vfsv<5)&&this.migrateSavefileBeforeV5(e,n,i,t,o),this.migrateSavefileSinceV5(t,o),t};var lt=dt,ct=(n("6b54"),"sav"),ut="sav";function pt(t){var e,n,i,o=t,r="";for(o+="",e=0,n=o.length;e<n;e++)i=o.charCodeAt(e).toString(16),r+=i.length<2?"0"+i:i;return r}function ht(t){var e,n=0,i="";for(t+="",e=t.length;n<e;n+=2){var o=parseInt(t.substr(n,1),16),r=parseInt(t.substr(n+1,1),16);if(isNaN(o)||isNaN(r))return null;i+=String.fromCharCode(o<<4|r)}return i}var ft={id:ct,encode:pt,decode:ht,extension:ut},mt="dataLoader",vt=function(t,e){var n={sav:ft};function i(t,e){var n="object"!==Object(H["a"])(t)?r(o(t,e)):o(t,e);return s(n)}function o(t,e){if("undefined"!==typeof n[e]){var i=n[e].decode(t);return null==i?(console.error("file transformer (type '"+e+"') failed passing through raw string"),console.log(t),t):i}return t}function r(t){var e;try{e=JSON.parse(t)}catch(n){throw new Error("JSON parse failed")}return e}function s(t){var e=new lt({Node:it,Link:rt,Map:at});return e.loadMap(e.migrateSaveFilePreLoading(t))}e.publishService={id:"dataLoader",load:i}},gt={id:mt,component:vt},yt="savjs",wt="sav.js";function bt(t){return"export default ".concat(t)}function xt(t){return t}var kt,St={id:yt,encode:bt,decode:xt,extension:wt},Ct="dataSaver",Ft=function(t,e){var n={sav:ft,savjs:St};function i(t,e){return{extension:n[t]?n[t]["extension"]:null,data:r(o(s(e)),t)}}function o(t){return JSON.stringify(t)}function r(t,e){return"undefined"!==typeof n[e]?n[e].encode(t):t}function s(t){var n=e.services.constants.get("system").vfsv;return t.system={vfsv:n,saveTime:Date.now()},t}e.useService=["app","constants"],e.publishService={id:"dataSaver",getSaveData:s,save:i}},Nt={id:Ct,component:Ft},Ot=[{label:"Map",submenu:[{label:"New map",accelerator:"CmdOrCtrl+N",role:"newMap"},{label:"Open map",accelerator:"CmdOrCtrl+O",role:"load"},{type:"separator"},{label:"Save...",submenu:[{label:"To disk",role:"save"}]},{type:"separator"},{label:"Quicksave",accelerator:"CmdOrCtrl+S",role:"quickSave"},{label:"Quickload",accelerator:"CmdOrCtrl+L",role:"quickLoad"}]},{label:"Edit",submenu:[{label:"Manipulate map",role:"manipulateMap"},{label:"Merge nodes",role:"mergeNodes"},{type:"separator"},{label:"Batch add",role:"batchAdd"},{label:"Batch edit nodes",role:"batchEditNodes"},{label:"Batch edit links",role:"batchEditLinks"}]},{label:"Explore",submenu:[{label:"Node browser",role:"nodeBrowser"},{label:"Map history",role:"mapHistory"},{label:"General map summary",role:"generalSummary"}]},{label:"Analyse",submenu:[{label:"Domain analysis",role:"domainAnalysis"},{label:"Central analysis",role:"centralAnalysis"},{label:"Set analysis",role:"setAnalysis"},{label:"Cluster analysis",role:"clusterAnalysis"},{label:"Circularity analysis",role:"loopAnalysis"},{label:"Decision tree analysis",role:"decisionTreeAnalysis"},{label:"Signal word analysis",role:"signalWordAnalysis"},{label:"Word count analysis",role:"wordCountAnalysis"},{label:"Similarity analysis",submenu:[{label:"Jaccard index",role:"similarityAnalysisJaccard"},{label:"Key words",role:"similarityAnalysisKeyWords"},{label:"Word overlap",role:"similarityAnalysisOverlap"}]}]},{label:"Panes",submenu:[{label:"Styles",role:"paneStyles"},{label:"Minimap",role:"paneMinimap"},{label:"Annotations",role:"paneAnnotations"}]},{label:"Settings",submenu:[{label:"Sets",role:"setEditor"},{type:"separator"},{label:"Config",role:"settings"}]},{label:"Help",submenu:[{label:"Docs",role:"helpDocs"},{label:"Interactive tutorial",role:"tutorial"}]}],$t=n("bd86"),Et={selectors:{ids:(kt={nodeDelete:"contextMenuNodeDelete",nodeEdit:"contextMenuNodeEdit",nodeAnnotate:"ctxNodeAnnotate",nodeStyle:"contextMenuNodeStyle"},Object($t["a"])(kt,"nodeDelete","contextMenuNodeDelete"),Object($t["a"])(kt,"nodeWeightField","ctxNodeWeightField"),Object($t["a"])(kt,"nodeViewField","ctxNodeViewField"),Object($t["a"])(kt,"linkSwitchSign","contextMenuLinkSwitchSign"),Object($t["a"])(kt,"linkDelete","contextMenuLinkDelete"),Object($t["a"])(kt,"linkShapeField","ctxLinkShapeField"),Object($t["a"])(kt,"linkWeightField","ctxLinkWeightField"),Object($t["a"])(kt,"linkStyleField","ctxLinkStyleField"),Object($t["a"])(kt,"linkColourField","ctxLinkColourField"),Object($t["a"])(kt,"linkGotoPrevious","ctxLinkGotoPrevious"),Object($t["a"])(kt,"linkGotoNext","ctxLinkGotoNext"),Object($t["a"])(kt,"linkGotoFrom","ctxLinkGotoFrom"),Object($t["a"])(kt,"linkGotoTo","ctxLinkGotoTo"),kt),classes:{contextmenu:"contextMenu",contextmenuItem:"contextMenuItem"}}},It={selectors:{ids:{mapLayer:"mapContainer",linkLayer:"linkContainer",nodeLayer:"nodeContainer",dragbox:"dragbox",linkMarker:"arrow",linkPreview:"linkPreview"},classes:{link:"link",node:"node",nodeProperty:"nodeProperty",nodeSelected:"bubbleSelected",linkSelected:"linkSelected",linkOverlayContainer:"linkOverlayContainer",linkWeight:"arrValue",linkSign:"arrNegativeSign"},fragments:{nodeIdPrefix:"node",linkIdPrefix:"link",linkWeightPrefix:"arrValue",linkSignPrefix:"arrNegativeSign"}}},Pt={selectors:{ids:{editState:"state_edit",linkState:"state_link"},classes:{activeClass:"btn_active"}}},Lt="constantsProvider",Tt=function(t,e){var n={environment:"browser",system:{vfsv:7}};function i(t){if("undefined"===typeof t)return n;if("undefined"!==typeof n[t])return n[t];throw new Error("Tried to get invalid category from constants.")}function o(t){var e={selectors:{},mainmenu:{}};for(var n in t)if("mainmenu"!==n){var i=t[n]["selectors"];for(var o in i){var r=i[o];for(var s in r)"undefined"!==typeof e.selectors[s]&&console.error("Selector override:",s,"in namespace",n),e.selectors[s]=r[s]}}else e.mainmenu=t[n];return e}e.useService=["http"],e.publishService={id:"constants",get:i},e.onCreate=function(){"undefined"!==typeof window.$constants&&(n.environment=window.$constants.environment,delete window.$constants);var t={mainmenu:Ot,contextmenus:Et,drawspace:It,stateButtons:Pt},e=o(t);for(var i in e)n[i]=e[i]}},Mt={id:Lt,component:Tt},At=(n("6c7b"),function(){this.canvas=null,this.context2d=null,this.filters={nodes:[],links:[]}});At.prototype.create=function(t,e){var n=document.getElementById(t);if(null===n)return console.error("Invalid render target for minimap: "+t),!1;var i=250,o=250;return"undefined"!==typeof e&&("undefined"!==typeof e.width&&(i=e.width),"undefined"!==typeof e.height&&(o=e.height)),n.width=i,n.style.width=i+"px",n.height=o,n.style.height=o+"px",this.canvas=n,this.context2d=n.getContext("2d"),n.id},At.prototype.addFilter=function(t,e,n,i){var o={};o["id"]=t,o["affectedIds"]=n,o["callback"]=i,o["propertyValue"]=null,o["isDefault"]=!1,this.filters[e].push(o),o=null},At.prototype.addDefaultFilter=function(t,e,n){var i={};switch(t){case"colorOverride":i["id"]="colorOverride",i["affectedId"]=null,i["propertyValue"]=n,i["callback"]=null;break;default:return!1}return i["isDefault"]=!0,this.filters[e].push(i),i=null,!0},At.prototype.removeFilter=function(t,e){for(var n=0,i=this.filters[e].length;n<i;n++)if(this.filters[e][n].id==t){this.filters[e].splice(n,1);break}},At.prototype.applyFilter=function(t,e,n){var i,o;for(i=0,o=this.filters[t].length;i<o;i++)this.filters[t][i].isDefaultFilter?"colorOverride"==this.filters[t][i].id&&(n.color=this.filters[t][i].propertyValue):this.filters[t][i].affectedIds.length>0&&-1==this.filters[t][i].affectedIds.indexOf(e.id)||this.filters[t][i].callback(e,n)},At.prototype.render=function(t,e){var n,i,o=t.nodes,r=t.links,s=t.map,a=1,d=[0,0];"undefined"!==typeof e&&("undefined"!==typeof e.zoom&&(a=e.zoom),"undefined"!==typeof e.origin&&(d=e.origin));var l=16,c=16,u=this.canvas,p=this.context2d;p.imageSmoothingEnabled=!1,p.translate(.5,.5),p.scale(1,1),p.clearRect(0,0,u.width,u.height),p.rect(0,0,u.width,u.height),p.fillStyle="#ffffff",p.fill();var h=function(t,e){var n=parseInt(t/e);return n<1?1:n};p.scale(a,a);var f,m,v,g,y,w,b,x,k,S=h(s.width,l),C=h(s.height,c),F={};for(p.beginPath(),p.lineWidth="1",p.strokeStyle="black",p.rect(-1+d[0],-1+d[1],S,C),p.stroke(),p.closePath(),n=0,i=r.length;n<i;n++)w=h(r[n].x1,l)+1*d[0],b=h(r[n].y1,c)+d[1],x=h(r[n].x2,l)+1*d[0],k=h(r[n].y2,c)+d[1],f=r[n].style.stroke,F.x1=w,F.y1=b,F.x2=x,F.y2=k,F.color=f,F.visibility=r[n].visible,this.applyFilter("links",r[n],F),0!=F.visibility&&(f=F.color,"undefined"!==f&&"white"!=f&&"#FFFFFF"!=f&&"#ffffff"!=f&&"rgb(255, 255, 255)"!=f&&"black"!=f&&"#000000"!=f&&"rgb(0, 0, 0)"!=f||(f="#d1d2d3"),F.color=f,p.beginPath(),p.moveTo(F.x1,F.y1),p.lineTo(F.x2,F.y2),p.lineWidth="1",p.strokeStyle=F.color,p.stroke(),p.fillStyle=F.color,p.fill(),p.closePath());for(F={},n=0,i=o.length;n<i;n++)m=h(o[n].x,l)+d[0],v=h(o[n].y,c)+d[1],g=h(o[n].w,l),y=h(o[n].h,c),f=o[n].style["background-color"],F.x=m,F.y=v,F.w=g,F.h=y,F.color=f,F.visibility=o[n].visible,this.applyFilter("nodes",o[n],F),0!=F.visibility&&(f=F.color,"undefined"!==f&&"white"!=f&&"#FFFFFF"!=f&&"#ffffff"!=f&&"rgb(255, 255, 255)"!=f||(f="grey"),F.color=f,p.beginPath(),p.rect(F.x,F.y,F.w,F.h),p.fillStyle=F.color,p.fill(),p.closePath());return p.setTransform(1,0,0,1,0,0),o=null,r=null,s=null,this.canvas};var Dt=At,_t={renderOrder:null,nodes:null,links:null,map:null,shadowMinimap:null,playbackRate:100,gif:null,gifSizeTotal:null,gifSizeSent:0,gifChunkSize:524288,onProgress:null,onDone:null,prepare:function(t,e){var n,i,o;for(this.renderOrder=e,this.nodes=JSON.parse(JSON.stringify(t.nodes.map((function(t){return delete t.links,t})))),this.links=JSON.parse(JSON.stringify(t.links.map((function(t){return delete t.tNode,delete t.fNode,t})))),this.map=t.map,localStorage.setItem("mapToAnimGif",""),n=0,i=this.renderOrder.length;n<i;n++)o=this.renderOrder[n].index,"node"===this.renderOrder[n].type?(this.nodes[o].style["background-color"]="rgb(255,255,254)",this.nodes[o].style["border-color"]="#ffffff"):this.links[o].style["stroke"]="rgb(255,255,254)";var r=document.createElement("canvas");r.id="shadowMinimap",r.style.display="none",r.style.display="block",r.style.position="absolute",r.style.top="150px",r.style.left="150px",r.style.zIndex=99999,document.body.appendChild(r),this.shadowMinimap=new Dt,this.shadowMinimap.create("shadowMinimap",{width:250,height:250}),this.gif=new GIF({workers:2,quality:10,width:250,height:250,workerScript:"js/third_party/gif.worker.js"});var s=this;this.gif.on("finished",(function(t){s.onDone(t,null)})),this.gif.on("error",(function(){s.onDone(null,"error")}))},start:function(t,e,n){this.onProgress=n.onProgress,this.onDone=n.onDone,this.playbackRate=n.playbackRate,this.prepare(t,e),this.generateFrames(),this.generateAnimatedGif()},generateFrames:function(){var t;this.onProgress("processing map frames");for(var e=0;e<this.renderOrder.length;e++){var n=this.renderOrder[e].index;"node"===this.renderOrder[e].type?(this.nodes[n].style["background-color"]="#FF0000",this.nodes[n].style["border-color"]="#000000"):this.links[n].style["stroke"]="#FF0000",t=this.shadowMinimap.render({nodes:this.nodes,links:this.links,map:this.map}),this.gif.addFrame(t.getContext("2d"),{copy:!0,delay:this.playBackRate}),"node"===this.renderOrder[e].type?this.nodes[n].style["background-color"]="#FFFFFF":this.links[n].style["stroke"]="#000000"}return t=this.shadowMinimap.render({nodes:this.nodes,links:this.links,map:this.map}),this.gif.addFrame(t.getContext("2d"),{copy:!0,delay:this.playBackRate}),!0},generateAnimatedGif:function(){this.onProgress("generating animated gif"),document.body.removeChild(document.getElementById("shadowMinimap")),this.gif.render()},cleanUp:function(){this.renderOrder=null,this.nodes=null,this.links=null,this.map=null,this.shadowMinimap=null,this.gif=null,this.gifSizeTotal=null,this.gifSizeSent=0,this.onProgress=null,this.onDone=null,localStorage.removeItem("mapToAnimGif")}},Wt="mapToAnimGif",Rt=function(t,e){function n(t,e,n){_t.start(t,e,n)}e.publishService={id:"mapToAnimGif",convert:n}},Bt={id:Wt,component:Rt},zt=(n("386d"),n("b54a"),function(t,e,n,i){this.linkRenderer=i.link,this.canvasClass=t,this.canvasParent=e,this.canvasDimensionDefault=n,this.canvasDimension=n,this.xCanvases=0,this.yCanvases=0});zt.prototype.getOverlongWordBreakIndex=function(t,e,n){for(var i,o,r=t.measureText(e[0]).width,s=1,a=e.length;s<a;s++){if(i=t.measureText(e[s]).width,!(r+i<=n)){o=s;break}r+=i}return o},zt.prototype.getWrappedText=function(t,e,n){for(var i=[],o=e.replace(/\s\s+/g," ").split(" "),r=o[0],s=1;s<o.length;s++){var a=o[s],d=t.measureText(r+" "+a).width;if(d<=n)r+=" "+a;else{t.measureText(a).width;var l=a.indexOf("-"),c=-1!==l;if(c){while("-"==a[l+1])l++;var u=a.substring(0,l+1);t.measureText(r+" "+u).width<=n?(r=r+" "+u,a=a.substring(l+1,a.length)):t.measureText(u).width<=n&&(i.push(r),r=u,a=a.substring(l+1,a.length))}i.push(r),r="";while(t.measureText(a).width>n){var p=this.getOverlongWordBreakIndex(t,a,n);r=a.substring(0,p),i.push(r),a=a.substring(p,a.length),p=this.getOverlongWordBreakIndex(t,a,n)}r=a}}return i.push(r),i},zt.prototype.drawNode=function(t,e,n,i){var o,r,s,a,d=t.id,l=i.disableTextRendering,c=i.padding,u=i.fontFamily,p=i.zoom,h=i.border,f=t.style["background-color"],m=t.style["border-color"],v=t.style["color"],g=e.style["box-shadow"];""!=g&&(g=g.replace(/inset,/g,"-").replace(/inset$/,""),g=g.split("-"));var y,w,b=t.style["font-size"],x=parseInt(b.replace("px","")),k=t.style["border-style"];k="dashed"==k?[5,5]:"dotted"==k?[2,2]:[];var S=i.w,C=i.h;for(o=0;o<n.length;o++){if(a=n[o].canvas.getContext("2d"),a.scale(p,p),y=n[o].x,w=n[o].y,a.setLineDash(k),a.beginPath(),a.lineWidth=h,a.strokeStyle=m,a.rect(y,w,S,C),a.fillStyle=f,a.fill(),a.stroke(),""!=g){a.lineWidth=0;var F=0;for(r=0,s=g.length;r<s;r++){var N=g[r].substr(0,g[r].search("px")+2).replace("px","");N=parseInt(N.substring(N.indexOf(")")+2));var O=g[r].substring(g[r].search("rgb"),g[r].search(/\)/)+1);a.rect(y+F,w,N-F,C),F=N,a.fillStyle=O.replace(";",","),a.fill()}}if(0==l){var $=e.clientWidth-2*c;a.font=b+" "+u,a.textAlign="center",a.fillStyle=v;var E=this.getWrappedText(a,d+". "+t.content,$);s=E.length;var I=(C-2*c)/s;for(r=0;r<s;r++){var P,L=y+S/2;P=0!=r&&2!=s?w+I+I*r:0==r?x+c+w:2*x+2*c+w,a.fillText(E[r],L,P)}}a.closePath(),a.setTransform(1,0,0,1,0,0),a=null}},zt.prototype.drawArrow=function(t,e,n,i){var o,r,s,a=e.x1-n.x,d=e.y1-n.y,l=e.x2-n.x,c=e.y2-n.y,u=i.style["stroke-dasharray"];if(u="none"===u?[]:u.split(","),t.setLineDash(u),t.beginPath(),0==e.renderer||0===e.cX)o=l-a,r=c-d,t.moveTo(a,d),t.lineTo(l,c);else{var p=this.linkRenderer.renderCanvas(e,t);0!=p?(o=p[0],r=p[1]):(o=l-a,r=c-d,t.moveTo(a,d),t.lineTo(l,c))}s=-Math.atan2(o,r),t.lineWidth="2",t.fillStyle=i.style.stroke,t.strokeStyle=i.style.stroke,t.stroke(),t.save(),t.translate(l,c),t.rotate(s),t.beginPath(),t.moveTo(-6,-12),t.lineTo(0,2),t.lineTo(6,-12),t.closePath(),t.fill(),t.restore()},zt.prototype.drawNegativeSign=function(t,e,n,i){var o=e,r=o.offsetLeft-n,s=o.offsetTop-i;t.fillStyle="red",t.fillRect(r,s,10,3)},zt.prototype.removeCanvas=function(){for(var t=document.querySelectorAll("."+this.canvasClass),e=document.getElementById(this.canvasParent),n=0;n<t.length;n++)e.removeChild(t[n]);t=null,e=null},zt.prototype.resetCanvas=function(t,e,n){this.removeCanvas();var i,o,r,s,a,d,l=[],c=document.createDocumentFragment();for(o=0,r=t;o<r;o++)for(l[o]=[],s=0,a=e;s<a;s++)i=document.createElement("canvas"),i.id=this.canvasClass+o+"-"+s,i.className=this.canvasClass,i.style.top=s*n+"px",i.style.left=o*n+"px",i.width=n,i.height=n,c.appendChild(i),l[o][s]=i,d=i.getContext("2d"),d.rect(0,0,n,n),d.fillStyle="#FFFFFF",d.fill(),i=null,d=null;return document.getElementById(this.canvasParent).appendChild(c),c=null,l},zt.prototype.render=function(t,e,n,i){var o,r,s,a=t,d=e,l=n,c=i.zoom,u=this.canvasDimension,p=parseInt(l.width*c),h=parseInt(l.height*c),f=0;c<1&&(f=Math.max(h,p),f<u&&(u=f,this.canvasDimension=f));var m=Math.ceil(p/u),v=Math.ceil(h/u);this.xCanvases=m,this.yCanvases=v;var g,y,w,b,x,k,S,C=this.resetCanvas(m,v,u,this.canvasClass,this.canvasParent);for(c<1&&(u/=c),y=0,w=d.length;y<w;y++)if(0!=d[y].cX||parseInt(d[y].y1/u)*m+parseInt(d[y].x1/u)+1!=parseInt(d[y].y2/u)*m+parseInt(d[y].x2/u)+1)for(b=0;b<m;b++)for(k=b*u,x=0;x<v;x++)S=x*u,g=C[b][x].getContext("2d"),g.scale(c,c),this.drawArrow(g,d[y],{x:k,y:S},document.getElementById("link"+d[y].id)),d[y].isInverse&&this.drawNegativeSign(g,document.getElementById("arrNegativeSign"+d[y].id),k,S),g.setTransform(1,0,0,1,0,0),g=null;else b=parseInt(d[y].x1/u),x=parseInt(d[y].y1/u),k=b*u,S=x*u,g=C[b][x].getContext("2d"),g.scale(c,c),this.drawArrow(g,d[y],{x:k,y:S},document.getElementById(d[y].domIdPrefix+d[y].id)),d[y].isInverse&&this.drawNegativeSign(g,document.getElementById("arrNegativeSign"+d[y].id),k,S),g.setTransform(1,0,0,1,0,0),g=null;for(y=0,w=a.length;y<w;y++){r=a[y],s=r.style,o=document.getElementById(r.domIdPrefix+a[y].id);var F=parseInt(s["border-width"].replace("px","")),N=parseInt(window.getComputedStyle(o,null).getPropertyValue("padding-left").replace("px","")),O=window.getComputedStyle(o,null).getPropertyValue("font-family");""==O&&(O="Lucida");var $,E,I,P=a[y].x+.5,L=a[y].y+.5,T=r.w-F,M=r.h-F,A=[],D=[];E=parseInt(P/u),I=parseInt(L/u),$=E+"-"+I,-1===D.indexOf($)&&(D.push($),A.push({id:$,canvas:C[E][I],x:P-parseInt(P/u)*u,y:L-parseInt(L/u)*u})),E=parseInt((P+T)/u),I=parseInt(L/u),$=E+"-"+I,-1===D.indexOf($)&&(D.push($),A.push({id:$,canvas:C[E][I],x:P-parseInt((P+T)/u)*u,y:L-parseInt(L/u)*u})),E=parseInt((P+T)/u),I=parseInt((L+M)/u),$=E+"-"+I,-1===D.indexOf($)&&(D.push($),A.push({id:$,canvas:C[E][I],x:P-parseInt((P+T)/u)*u,y:L-parseInt((L+M)/u)*u})),E=parseInt(P/u),I=parseInt((L+M)/u),$=E+"-"+I,-1===D.indexOf($)&&(D.push($),A.push({id:$,canvas:C[E][I],x:P-parseInt(P/u)*u,y:L-parseInt((L+M)/u)*u})),this.drawNode(a[y],o,A,{w:T,h:M,padding:N,fontFamily:O,zoom:c,border:F,disableTextRendering:i.disableTextRendering})}};var jt=zt;function Xt(t,e,n){for(var i,o,r=t.measureText(e[0]).width,s=1,a=e.length;s<a;s++){if(i=t.measureText(e[s]).width,!(r+i<=n)){o=s;break}r+=i}return o}function Yt(t,e,n){for(var i=[],o=e.replace(/\s\s+/g," ").split(" "),r=o[0],s=1;s<o.length;s++){var a=o[s],d=t.measureText(r+" "+a).width;if(d<=n)r+=" "+a;else{t.measureText(a).width;var l=a.indexOf("-"),c=-1!==l;if(c){while("-"==a[l+1])l++;var u=a.substring(0,l+1);t.measureText(r+" "+u).width<=n?(r=r+" "+u,a=a.substring(l+1,a.length)):t.measureText(u).width<=n&&(i.push(r),r=u,a=a.substring(l+1,a.length))}i.push(r),r="";while(t.measureText(a).width>n){var p=Xt(t,a,n);r=a.substring(0,p),i.push(r),a=a.substring(p,a.length),p=Xt(t,a,n)}r=a}}return i.push(r),i}function Vt(t,e,n){var i=e.ctx,o=t.x1,r=t.y1,s=t.x2,a=t.y2,d=(t.cX,t.cY,t.style["stroke-dasharray"]);i.setLineDash(d),i.beginPath();var l,c,u=n.renderCanvas(t,i);0!=u?(l=u[0],c=u[1]):(l=s-o,c=a-r,i.moveTo(o,r),i.lineTo(s,a)),i.lineWidth="2",i.fillStyle=t.style.stroke,i.strokeStyle=t.style.stroke,i.stroke();var p=-Math.atan2(l,c);i.save(),i.lineWidth="0",i.fillStyle="#000000",i.translate(s,a),i.rotate(p),i.beginPath(),i.moveTo(-6,-12),i.lineTo(0,2),i.lineTo(6,-12),i.fill(),i.closePath(),i.restore()}function Ht(t,e){if(0!==t.cX)return!0;var n=e.xStart,i=e.xEnd,o=e.yStart,r=e.yEnd;return t.x1z>=n&&t.x1z<i&&t.y1z>=o&&t.y1z<r||t.x2z>=n&&t.x2z<i&&t.y2z>=o&&t.y2z<r}function qt(t,e){var n=t.x,i=t.y,o=t.w,r=t.h,s=t.style,a=s.padding,d=s.clientWidth-2*a;e.font=s["font-size"]+" "+s.fontFamily,e.textAlign="center",e.fillStyle=s.color;for(var l=Yt(e,t.id+". "+t.content,d),c=l.length,u=(r-2*a)/c,p=0;p<c;p++){var h=n+o/2,f=void 0;f=0!=p&&2!=c?i+u+u*p:0==p?s.fontHeight+a+i:2*s.fontHeight+2*a+i,e.fillText(l[p],h,f)}}function Jt(t,e,n,i,o,r,s,a,d){var l=e+i,c=n+o;t.moveTo(e+r,n),t.lineTo(l-s,n),t.quadraticCurveTo(l,n,l,n+s),t.lineTo(l,c-a),t.quadraticCurveTo(l,c,l-a,c),t.lineTo(e+d,c),t.quadraticCurveTo(e,c,e,c-d),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.stroke(),t.fill()}function Gt(t,e){var n=e.ctx,i=t.x,o=t.y,r=t.w,s=t.h,a=t.style;if(i+=.5,o+=.5,n.beginPath(),n.lineWidth=null===a.multiColor?a.border:0,n.strokeStyle=a["border-color"],n.fillStyle=a["background-color"],n.setLineDash(a["border-style"]),Jt(n,i,o,r,s,5,5,5,5),null!==a.multiColor)for(var d=0,l=a.multiColor.length;d<l;d++){var c=a.multiColor[d];n.fillStyle=c[0],n.fillRect(i+c[1],o,c[2]-c[1],s)}}function Ut(t,e){for(var n=e.xStart,i=e.xEnd,o=e.yStart,r=e.yEnd,s=t.xz+t.wz,a=t.yz+t.hz,d=t.xz,l=t.yz,c=[[d,l],[s,l],[d,a],[s,a]],u=0,p=c.length;u<p;u++){var h=c[u][0],f=c[u][1];if(h>=n&&h<i&&f>=o&&f<r)return!0}return!1}function Kt(t,e,n){for(var i=e.nodes,o=e.links,r=(e.map,n.parent,n.zoom>0?n.zoom:0),s=0,a=t.length;s<a;s++){var d=t[s];d.xzStart=d.xStart/r,d.xzEnd=d.xEnd/r,d.yzStart=d.yStart/r,d.yzEnd=d.yEnd/r}for(var l=0,c=t.length;l<c;l++){var u=t[l],p=u.ctx;p.scale(r,r);for(var h=0,f=o.length;h<f;h++){var m=o[h];Ht(m,u)&&(m.x1=m.x1o-u.xzStart,m.y1=m.y1o-u.yzStart,m.x2=m.x2o-u.xzStart,m.y2=m.y2o-u.yzStart,m.cX=m.cXo-u.xzStart,m.cY=m.cYo-u.yzStart,Vt(m,u,n.linkRenderer))}p.closePath();for(var v=0,g=i.length;v<g;v++){var y=i[v];Ut(y,u)&&(y.x=y.xo-u.xzStart,y.y=y.yo-u.yzStart,Gt(y,u),n.disableTextRendering||qt(y,p))}p.setTransform(1,0,0,1,0,0)}}function Qt(t){for(var e=0,n=t.length;e<n;e++){var i=t[e],o=document.createElement("canvas");o.width=i.w,o.height=i.h,o.id=(""+Date.now()).substr(-6)+"_"+e,i.el=o,i.ctx=o.getContext("2d")}}function Zt(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=[];if(t<0||e<0||n<0||i<0)throw new Error("All dimensions must be >= 0.");for(var a=-1,d=0,l=0,c=-1,u=-1,p=r;p<r+i;p+=e){c++,d++,u=-1;for(var h=o;h<o+n;h+=t){u++,a++;var f=h,m=h+t-1>o+n-1?o+n-1:h+t-1,v=p,g=p+e-1>r+i-1?r+i-1:p+e-1,y=m-f+1,w=g-v+1;s.push({id:a,coord:[u,c],w:y,h:w,xStart:f,xEnd:m,yStart:v,yEnd:g}),p===r&&l++}}return s.push({width:n,height:i,xSlices:d,ySlices:l}),s}function te(t,e,n){return new Promise((function(i){setTimeout((function(){var o=Zt(n.maxCanvasWidth,n.maxCanvasHeight,t.w,t.h,t.xStart,t.yStart),r=o.pop();n.parent=t,Qt(o),Kt(o,e,n),ee(o),o.push(r),i(o)}),50)}))}function ee(t){"undefined"!==typeof win&&(win.document.body.style.width="8000px",win.document.body.style.height="8000px",win.document.body.style.border="1px solid #ff0000",t.forEach((function(t){t.el.style.top=t.yStart+"px",t.el.style.left=t.xStart+"px",t.el.style.position="absolute",win.document.body.appendChild(t.el)})))}var ne="mapToPng",ie=function(t,e){function n(t,n){var i=t.nodes,o=t.links,r=t.map,s=n.canvasClass,a=n.canvasParent,d=n.canvasDimension,l=n.zoom,c=n.disableTextRendering,u=e.services.links.getRenderController(),p=new jt(s,a,d,{link:u});return p.render(i,o,r,{zoom:l,canvasClass:s,canvasParent:a,disableTextRendering:c}),p}e.useService=["links","http"],e.publishService={id:"mapToPng",render:n,convert:u};var i=0,r=0,s={};function a(){s={},i=0,r=0}function d(t){return t.map((function(t){return"undefined"===typeof t.id?t:{data:t.el.toDataURL("image/png"),localX:t.coord[0],localY:t.coord[1],localW:t.w,localH:t.h}}))}function l(t,e){t.x1z=t.x1*e.zoom,t.y1z=t.y1*e.zoom,t.x2z=t.x2*e.zoom,t.y2z=t.y2*e.zoom,t.x1o=t.x1,t.y1o=t.y1,t.x2o=t.x2,t.y2o=t.y2;var n=t.style["stroke-dasharray"];n="none"===n?[]:n instanceof Array?n:n.split(","),t.style["stroke-dasharray"]=n}function c(t,e){var n=document.getElementById(t.domIdPrefix+t.id),i=t.x,o=t.y,r=t.w,s=t.h,a=t.style;t.xz=i*e.zoom,t.yz=o*e.zoom,t.wz=r*e.zoom,t.hz=s*e.zoom,t.xo=i,t.yo=o;var d=parseInt(window.getComputedStyle(n,null).getPropertyValue("padding-left").replace("px","")),l=window.getComputedStyle(n,null).getPropertyValue("font-family"),c=n.style["box-shadow"],u=n.clientWidth;a.padding=d,a.fontFamily=""!==l?l:"Lucida",a.boxShadow=c,a.clientWidth=u,a.fontHeight=parseInt(a["font-size"].replace("px",""));var p=parseInt(a["border-width"].replace("px",""));a.border=p;var h=a["border-style"];h="dashed"==h?[5,5]:"dotted"==h?[2,2]:[],a["border-style"]=h,a.multiColor=null;var f=a.boxShadow;if(""!=f){f=f.replace(/inset,/g,"-").replace(/inset$/,"").split("-");for(var m=0,v=0,g=f.length;v<g;v++){var y=f[v],w=y.substring(y.search("rgb"),y.search(/\)/)+1),b=y.substr(0,y.search("px")+2).replace("px","");b=parseInt(b.substring(b.indexOf(")")+2)),f[v]=[w.replace(";",","),m,b],m=b}a.multiColor=f}delete t.style["box-shadow"]}function u(t,n){var u=t.map.width*n.zoom,p=t.map.height*n.zoom,h=Zt(n.maxPngWidth,n.maxPngHeight,u,p);h.pop();n.linkRenderer=e.services.links.getRenderController(),i=h.length;for(var f=t.nodes,m=t.links,v=0,g=f.length;v<g;v++)c(f[v],n);for(var y=0,w=m.length;y<w;y++)l(m[y],n);return setTimeout(Object(o["a"])(regeneratorRuntime.mark((function o(){var l,c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:l=0,c=h.length;case 1:if(!(l<c)){o.next=30;break}return s.data({progress:++r,total:i}),u=void 0,o.prev=4,o.next=7,te(h[l],t,n);case 7:u=o.sent,o.next=15;break;case 10:return o.prev=10,o.t0=o["catch"](4),s.error(new Error(o.t0)),a(),o.abrupt("break",30);case 15:return u=d(u),console.log("Notice: server call commented for debugging/testing"),o.prev=17,o.next=20,e.services.http.post({data:u,cmd:"download_png",sendRaw:!0});case 20:o.next=27;break;case 22:return o.prev=22,o.t1=o["catch"](17),s.error(new Error(o.t1)),a(),o.abrupt("break",30);case 27:l++,o.next=1;break;case 30:s.data({progress:0,total:0}),s.done("yay"),a();case 33:case"end":return o.stop()}}),o,null,[[4,10],[17,22]])}))),10),function(t,e){if("undefined"!==typeof s[t])throw new Error("Tried to add a second listener to event: '"+t+"'. ");s[t]=e}}},oe={id:ne,component:ie};n("55dd");function re(t){for(var e=t[1].orders<0?0:t[1].orders,n=t[1].decay,i=t[1].subsetAnalysis,o=t[1].doubleCount,r=0===i.length?t[0][0]:t[0][0].filter((function(t){return-1!==i.indexOf(t.id)})),s=(t[0][1],{}),a={},d=[],l=0,c=r.length;l<c;l++)a[r[l].id]=l;function u(t,e,i,s){if(!o){if(-1!==d.indexOf(t))return;d.push(t)}var l=r[a[t]],c=l.in.concat(l.out),p=l.in.length+l.out.length;n&&e>1&&(p*=1/e),"undefined"===typeof s[e]&&(s[e]=0),s[e]+=p,e+=1,e<=i&&c.forEach((function(t){u(t,e,i,s)}))}for(var p=0,h=r.length;p<h;p++){s[r[p].id]={},u(r[p].id,0,e,s[r[p].id]);for(var f=s[r[p].id],m=0;m<e;m++)f[m+1]+=f[m];o||(d=[])}return s}function se(t){for(var e,n,i,o=[],r=[],s=[],a=[],d={},l=t[1].orders<0?0:t[1].orders,c=t[1].decay,u=t[1].uncertainty,p=t[1].subsetAnalysis,h=0===p.length?t[0][0]:t[0][0].filter((function(t){return-1!==p.indexOf(t.id)})),f=t[0][1],m={},v=f.length,g=0,y=h.length;g<y;g++){var w=h[g];if(m[w.id]=g,u){w.score=0;for(var b=0,x=w.in.length;b<x;b++)t:for(var k=0;k<v;k++){var S=w.in[b],C=f[k];if(C.from===S&&C.to===w.id){w.score+=100===C.weight?1:C.weight/100;break t}}for(var F=0,N=w.out.length;F<N;F++)t:for(var O=0;O<v;O++){var $=w.out[F],E=f[O];if(E.to===$&&E.from===w.id){w.score+=100===E.weight?1:E.weight/100;break t}}}else w.score=w.in.length+w.out.length}for(var I=function(t){for(var e=0,n=0,i=t.length;n<i;n++)e+="undefined"!==typeof h[m[t[n]]]?h[m[t[n]]].score:0;return e},P=function(t,e){var n=h[m[t]];return"undefined"!==typeof n?n[e]:[]},L=0,T=h.length;L<T;L++){var M=h[L].id;o.push([M]),s.push([M]),e=I([M]),d[M]=[],d[M][0]=Math.round(e);for(var A=0;A<l;A++){r=[],a=[];for(var D=!0===c&&0!=A?1/(A+1):1,_=o.length-1,W=0;W<o[_].length;W++)n=o[_][W],i=P(n,"out"),i.length>0&&(r=r.concat(i),e+=I(i)*D);_=s.length-1;for(var R=0;R<s[_].length;R++)n=s[_][R],i=P(n,"in"),i.length>0&&(a=a.concat(i),e+=I(i)*D);r.length>0&&o.push(r),a.length>0&&s.push(a),d[M][A+1]=Math.round(e)}o=[],s=[]}return d}function ae(t){for(var e=t,n={},i=0,o=e.length;i<o;i++)n[e[i].id]=e[i].in.length+e[i].out.length;return n}function de(t){for(var e=[],n=t[0],i=t[1],o=0,r=n.length;o<r;o++)for(var s=e.push({id:parseInt(n[o].id),in:[],out:[]})-1,a=0,d=i.length;a<d;a++)n[o].id==i[a].from&&e[s]["out"].push(parseInt(i[a].to)),n[o].id==i[a].to&&e[s]["in"].push(parseInt(i[a].from));return e}function le(t){var e,n,i,o,r,s,a=0,d=0,l=1,c=2,u=t[0],p=[],h=[],f=[],m=[];function v(t){0;for(var e=0,n=u.length;e<n;e++)if(u[e].id===t)return e}function g(t,e){0;var n=v(e);if(-1!==t.indexOf(n)){var i=t.slice(0);i.push(n),i=i.splice(i.indexOf(i[i.length-1]));var o,r=[],s=h.length;if(-1===f.indexOf(n)||0===s)h.push(i);else{var a=!1;for(o=0;o<s;o++){0;var d=i.slice(0),l=h[o].slice(0);d.pop(),l.pop(),d.sort(),l.sort();var c=d.length,p=0;if(c==l.length){for(var m=0;m<c;m++)d[m]==l[m]&&p++;if(p==c){a=!0;break}}}a||h.push(i)}for(o=0,s=i.length;o<s;o++)-1==f.indexOf(i[o])&&f.push(parseInt(i[o])),r.push(u[i[o]].id);return t.push(n),!0}return f.indexOf(n),t.push(n),!1}function y(t){0;var e,n=t,i=[];for(e=0;e<n.length;e++)i.push(u[n[e]].id);t:for(e=n.length-1;e>=0;e--)if(u[n[e]].state===l){if(u[n[e]].nextNeighbour++,"undefined"!==typeof u[n[e]].out[u[n[e]].nextNeighbour])break t;u[n[e]].state=c}}for(e=0,n=u.length;e<n;e++)u[e].nextNeighbour=0,u[e].state=d,u[e].seenOnce=!1,0===u[e].in.length&&u[e].out.length>0&&m.push(e);h.push([]);var w=[],b=!0,x=!1;while(b){if(a++,b=!1,!1===x){x=!0;var k=!1;t:for(e=0;e<w.length;e++)if(u[w[e]].state===l){k=!0;break t}if(k)w=[w[0]];else if(m.length>0){for(r=0,s=u.length;r<s;r++)u[r].nextNeighbour=0,u[r].state=d;w=[m.shift()]}else w=[]}var S,C=w.length-1;t:for(e=0,n=u.length;e<n;e++){if(!(C>-1))break t;if(S=u[w[C]].id,S===u[e].id){var F=!1;u[e].seenOnce=!0,u[e].state==d?(1===u[e].out.length?(F=g(w,u[e].out[0]),F&&(y(w),x=!1)):u[e].out.length>1?(u[e].state=l,F=g(w,u[e].out[u[e].nextNeighbour]),F&&(y(w),x=!1)):u[e].state=c,b=!0):u[e].state==l?(F=g(w,u[e].out[u[e].nextNeighbour]),F&&(y(w),x=!1),"undefined"===typeof u[e].out[u[e].nextNeighbour]&&(u[e].state=c),b=!0):(y(w),b=!0,x=!1);break t}}if(!b){"function"===typeof postMessage&&postMessage({type:"info",results:"Main loop done. Searching isolated feedback loops."});t:for(e=0,n=u.length;e<n;e++)if(!u[e].seenOnce){u[e].seenOnce=!0,m.push(e),b=!0,x=!1;break t}}a>5e5&&(b=!1,console.warn("loop overshot"),"function"===typeof postMessage&&postMessage({type:"error",results:"Warning. Insufficient system resources. Calculation aborted."})),a%100==0&&"function"===typeof postMessage&&postMessage({type:"progress",results:"Processing..."})}for(e=0,n=h.length;e<n;e++)for(i=0,o=h[e].length;i<o;i++)h[e][i]=u[h[e][i]].id;return[p,h]}var ce={getDegreesPerNode:de,getSumOfDegreesPerNode:ae,getNthSumOfDegreesPerNode:se,getNthSumOfDegreesPerNodeRecursive:re,getLoopsInNetwork:le};function ue(t){for(var e=t[0],n=t[0],i=[],o=0,r=t.length;o<r;o++)t[o]<n&&(n=t[o]),t[o]>e&&(e=t[o]);var s=e-n;i[0]=n;for(var a=1;a<10;a++)i[a]=s/9+i[a-1];for(var d=1;d<10;d++)i[d]=Math.round(10*i[d])/10;return i}function pe(t){var e,n,i,o=t[0],r=t[1],s=[];for(e=0;e<10;e++)s[e]=0;for(e=0,n=o.length;e<n;e++)for(i=0;i<10;i++)9==i&&o[e]>=r[i]?s[i]++:o[e]>=r[i]&&o[e]<r[i+1]&&s[i]++;return s}var he={getPartitions:ue,getFrequencyDistribution:pe};function fe(t){for(var e=t[0],n=t[1],i={},o={},r=0,s=n.length;r<s;r++)i[n[r].id]=r;for(var a=0,d=e.length;a<d;a++){if(e[a].id!=n[a].id)throw new Error("Math_sets->getSetConnections() indices NOT equal.");e[a];for(var l=0,c=n[a].sets.length;l<c;l++)for(var u=n[a].sets[l],p=0,h=e[a].out.length;p<h;p++)for(var f=n[i[e[a].out[p]]].sets,m=0,v=f.length;m<v;m++)u!==f[m]&&("undefined"===typeof o[u]&&(o[u]={}),"undefined"===typeof o[u][f[m]]&&(o[u][f[m]]=0),o[u][f[m]]++)}return o}function me(t,e){var n,i=[],o=[];for(n=0;n<t.length;n++)-1==i.indexOf(t[n])&&i.push(t[n]);for(n=0;n<e.length;n++)-1==i.indexOf(e[n])&&i.push(e[n]);for(n=0;n<t.length;n++)-1!==e.indexOf(t[n])&&-1==o.indexOf(t[n])&&o.push(t[n]);return 0==i.length?0:o.length/i.length}var ve={getSetConnections:fe,getJaccardCoefficient:me};n("3b2b");function ge(t){var e=t[0],n=t[1],i={};for(var o in n)i[o]=[];for(var r=0,s=e.length;r<s;r++){var a=e[r].content.trim().toLowerCase().replace("..."," ").replace(new RegExp("[^\\w\\s]","g"),"");for(var d in n)for(var l=n[d],c=0;c<l.length;c++){var u=new RegExp("\\b"+l[c]+"\\b","g");-1!=a.search(u)&&-1==i[d].indexOf(e[r].id)&&i[d].push(e[r].id)}}return i}function ye(t){for(var e=t,n={},i=0,o=e.length;i<o;i++){var r=-1!==e[i].content.indexOf("...");r&&(e[i].content=e[i].content.replace("..."," "));var s=e[i].content.trim().split(" ").filter((function(t){return""!==t.trim()}));n[e[i].id]={count:s.length,bipolar:r}}return n}function we(t){var e,n,i,o,r,s=t[0],a=[],d=!1;for("undefined"!=typeof t[1].stopwords&&!0===t[1].stopwords&&(r=["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],d=!0),e=0,n=s.length;e<n;e++){if("undefined"==typeof s[e].content){console.log(e),console.error(s);break}var l=s[e].content.trim();if(l=l.replace(new RegExp("[^\\w\\s]","g"),""),l=l.replace(/ {2,}/g," "),d)for(i=0,o=r.length;i<o;i++)l=l.replace(new RegExp("\\b"+r[i]+"\\b","gi"),"").trim(),l=l.replace(/ +/g," ");a.push({id:s[e].id,content:l.trim()})}return a}function be(t){for(var e=t[0][0],n=t[0][1],i=t[1].skipLinked,o={},r=0,s=e.length;r<s;r++){var a=e[r].id,d=e[r].content.split(" ");o[a]=[];t:for(var l=r,c=e.length;l<c;l++)if(l!=r){var u=e[l].id;if(i)for(var p=0,h=n.length;p<h;p++)if(a==n[p].to&&u==n[p].from||a==n[p].from&&u==n[p].to)continue t;for(var f=[],m=e[l].content.split(" "),v=0;v<d.length;v++)-1!==m.indexOf(d[v])&&f.push(d[v]);f.length>0&&o[a].push({id:u,hits:f})}0===o[a].length&&delete o[a]}return o}function xe(t){for(var e=t,n={},i=0,o=e.length;i<o;i++)for(var r=e[i].content.split(" "),s=0;s<r.length;s++)n.hasOwnProperty(r[s])?-1==n[r[s]]["ids"].indexOf(e[i].id)&&(n[r[s]]["ids"].push(e[i].id),n[r[s]]["occurrences"]++):(n[r[s]]={},n[r[s]]["occurrences"]=1,n[r[s]]["ids"]=[],n[r[s]]["ids"].push(e[i].id));return n}function ke(t){for(var e=t[0][0],n=t[0][1],i=t[1].skipLinked,o=t[1].threshold,r={},s=0,a=e.length;s<a;s++){var d=e[s].id,l=e[s].content.split(" ");r[e[s].id]=[];t:for(var c=s,u=e.length;c<u;c++)if(c!=s){var p=e[c].id;if(i)for(k=0,kk=n.length;k<kk;k++)if(d==n[k].to&&p==n[k].from||d==n[k].from&&p==n[k].to)continue t;for(var h=[],f=e[c].content.split(" "),m=0;m<l.length;m++)-1!==f.indexOf(l[m])&&h.push(l[m]);var v=getJaccardCoefficient(l,f);v>=o&&r[e[s].id].push({id:p,jaccard:v})}0===r[e[s].id].length&&delete r[e[s].id]}return r}var Se={getWordMatches:ge,getWordCounts:ye,getNormalisedContent:we,getWorldOverlap:be,getKeyWords:xe,getJaccardIndicesOfText:ke};function Ce(t){var e=t[1].heads,n=t[1].customSeed,o=[],r=t[0],s=[],a={};if(e)for(i=0,ii=r.length;i<ii;i++)a[r[i].id]=i,0==r[i].out.length&&r[i].in.length>0&&s.push(r[i].id);else for(var d=0,l=r.length;d<l;d++)a[r[d].id]=d;if(n.length>0)for(var c=0,u=n.length;c<u;c++)-1==s.indexOf(n[c])&&s.push(n[c]);postMessage({type:"info",results:"Seed statements created. Building clusters..."});for(var p=0,h=s.length;p<h;p++){postMessage({type:"info",results:"Processing cluster ("+s[p]+"): "+(p+1)+"/"+h});var f=[s[p]],m=[s[p]],v=0,g=!0;while(g){for(var y=!0,w=[],b=0;b<m.length;b++){var x=m[b],k=r[a[x]].in;k.length>0&&(w=w.concat(k))}for(var S=0,C=w.length;S<C;S++)-1==f.indexOf(w[S])&&(f.push(w[S]),y=!1);w.length>0&&0==y?m=w:g=!1,v++,v>100&&(postMessage({type:"info",results:"Insufficient resources. Aborting at cluster ("+s[p]+")"}),g=!1)}o.push(f),m=[]}return o}function Fe(t){var e,n,i,o,r=t[0],s=[],a="undefined"!=typeof t[1].threshold?t[1].threshold:0;function d(t){var e={};return t.filter((function(t){return!e.hasOwnProperty(t)&&(e[t]=!0)}))}for(e=0,n=r.length;e<n;e++)r[e].neighbours.push(r[e].id);var l=0;while(1){var c={score:0,i:-1,x:-1};for(e=0,n=r.length;e<n;e++)for(i=e,o=r.length;i<o;i++)if(e!=i){var u=getJaccardCoefficient(r[e].neighbours,r[i].neighbours);u>c.score&&u>=a&&(c.score=u,c.i=e,c.x=i)}if("undefined"==typeof r[c.i]||"undefined"==r[c.x])break;var p=[];"undefined"==typeof r[c.i].id.length?p.push(r[c.i].id):p=p.concat(r[c.i].id),"undefined"==typeof r[c.x].id.length?p.push(r[c.x].id):p=p.concat(r[c.x].id),p=d(p);var h=d(r[c.i].neighbours.concat(r[c.x].neighbours).concat(p));if(r.push({id:p,neighbours:h}),c.i<c.x&&c.x--,r.splice(c.i,1),r.splice(c.x,1),l++,l>500){alert("Insufficient system resources. Aborting calculation. Only intermediate results shown."),console.warn("Break, loop overshot");break}}for(e=0,n=r.length;e<n;e++)"number"==typeof r[e].id&&(r[e].id=[r[e].id]),s.push(r[e].id.sort((function(t,e){return t-e})));return s}var Ne,Oe={getHierarchyClusters:Ce,getJaccardClusters:Fe},$e="analysis",Ee=function(t,e){var n={};function i(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("undefined"===typeof n[t])throw new Error("Requested non-existing analysis: "+t);function r(t){for(var e="",i=0,r=o.length;i<r;i++){var s=o[i];e+=n[s].toString()+"; \n"}return e}return new Promise((function(s,a){var d=new Blob(["\n\t\t\t\tonmessage = function(event) {\n\t\t\t\t\t".concat(r(o),";\n\t\t\t\t\tconst func = ").concat(n[t].toString(),';\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tpostMessage({"type": "done", \n\t\t\t\t\t\t\t\t "results": func(event.data)});\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t')],{type:"text/javascript"}),l=window.URL.createObjectURL(d),c=new Worker(l);c.postMessage(e),c.onmessage=function(t){var e=t.data;"function"===typeof i&&i(e),"done"===e.type&&s(e),URL.revokeObjectURL(l)},c.onerror=function(t){a(t),URL.revokeObjectURL(l)}}))}function o(t,e){var i=["getJaccardIndicesOfText","getJaccardClusters"];if("undefined"===typeof n[t])throw new Error("Requested non-existing analysis: "+t);if(-1!==i.indexOf(t))throw new Error("Requested sync analysis which is only available for async: "+t);return n[t](e)}e.publishService={id:"analysis",get:i,getSync:o},e.onInit=function(){for(var t=[ce,he,ve,Se,Oe],e=0,i=t.length;e<i;e++){var o=t[e];for(var r in o)"undefined"!==typeof n[r]&&console.error("Tried to write existing key to analyses:",r,o),n[r]=o[r]}}},Ie={id:$e,component:Ee},Pe=[y,x,F,V,G,et,gt,Nt,Mt,Bt,oe,Ie],Le=new d;for(var Te in Le.extend(u.id,null,u.extension),Le.extend(m.id,{use:m.use},m.extension),Pe){var Me=Pe[Te];Le.createComponent(Me.id,Me.component)}function Ae(){return De.apply(this,arguments)}function De(){return De=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Le.startUp();case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),new Error(t.t0);case 8:return Le.postInit(),t.abrupt("return","ok");case 10:case"end":return t.stop()}}),t,null,[[0,5]])}))),De.apply(this,arguments)}window.debug=window.debug||{},window.debug.components=Le.createAnonymousComponent("debug",["nodes","links"]);var _e,We={getConstants:function(){return Ne},request:Le.createAnonymousComponent},Re=n("0516"),Be=n("fe85"),ze=n("8a30"),je=n("5a5e"),Xe=n("5f96");function Ye(t){if("draggable"!==t&&"droppable"!==t)throw new Error("Invalid directive argument. Use v-drag&drop:draggable|droppable. Got: "+t);return t}function Ve(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e.selector)return t;var n=document.getElementById(e.selector);if(null===n)throw new Error("Directive option 'selector' ("+e.selector+") did not return a DOM element.");return n}function He(t,e){var n=t.value||{},i={mode:e,type:n.type,greedy:!0===t.modifiers.greedy,draggableOnly:!0===t.modifiers.only,drag:n.drag,dragstop:n.dragstop,delegate:n.delegate};return i}function qe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.data||{}}function Je(t,e){var n={mousedown:"draggable",mouseup:"droppable",mouseupAlways:"done"},i=n[t];if(void 0===i)throw new Error("Received undefined event in draggable or droppable callback: "+t);_e(i,e)}function Ge(t,e,n,i){var o=Ye(e.arg),r=qe(e.value),s=Ve(t,e.value),a=He(e,o);i.addEventListener(t,s,a,r,Je)}function Ue(t,e,n,i){var o=Ye(e.arg);i.removeEventListener(o,t)}function Ke(t,e,n,i){var o=Ye(e.arg),r=qe(e.value),s=Ve(t,e.value),a=He(e,o);i.__internal__addListenerPerElement(t,s,a,r,Je)}function Qe(t,e,n,i){i.__internal__removeListenerPerElement(e.arg,t)}function Ze(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new e,o=n.namespace,r=void 0===n.delegateEvents||n.delegateEvents;return _e=function(e,n){t.dispatch(o+"/"+e,n)},{inserted:function(t,e,n){var o=r?Ge:Ke;o(t,e,n,i)},unbind:function(t,e,n){var o=r?Ue:Qe;o(t,e,n,i)}}}var tn,en=Ze,nn=n("d225"),on=n("b0b4"),rn=null,sn={startX:null,startY:null,endX:null,endY:null,curX:null,curY:null,draggableEl:null,draggableX:null,draggableY:null,draggableNewX:null,draggableNewY:null,draggableType:null,draggableData:null,droppableEl:null,droppableX:null,droppableY:null,droppableType:null,droppableData:null,_cloneStartX:null,_cloneStartY:null};Object.defineProperty(sn,"elDraggable",{get:function(){return console.error("DEPRECATED: use dragAndDropParameters.draggableEl instead of .elDraggable"),sn.draggableEl},enumerable:!1}),Object.defineProperty(sn,"elDroppable",{get:function(){return console.error("DEPRECATED: use dragAndDropParameters.droppableEl instead of .elDroppable"),sn.droppableEl},enumerable:!1});var an=function(t){var e=sn;e.curX=t.pageX,e.curY=t.pageY;var n=e.curX-e.startX,i=e.curY-e.startY;e.draggableNewX=e.draggableX+n,e.draggableNewY=e.draggableY+i,null!==rn&&(rn.style.left=e._cloneStartX+n+"px",rn.style.top=e._cloneStartY+i+"px")},dn=function(){function t(){Object(nn["a"])(this,t),this.isDragging=!1,this.draggableGotRemoved=!1,this.draggableListeners={},this.processingDroppables=!1,this.droppables=[],this.droppableListeners={},this.styleBackup=null,this.anonElCount=0,this.__internal__listeners=[]}return Object(on["a"])(t,[{key:"_createCopyClone",value:function(t,e,n){var i=t.cloneNode(!0),o=document.defaultView.getComputedStyle(t,null);return i.style.color=o.color,i.style.backgroundColor=o.backgroundColor,i.style.border=o.border,i.style.borderRadius=o.borderRadius,i.style.margin="0px",i.style.opacity=.6,i}},{key:"_createCheapClone",value:function(t,e,n){var i=t.cloneNode(!1);return i.style.border="1px solid yellow",i.style.boxShadow="box-shadow: 0px 0px 9px 5px rgba(231,166,26,1)",i.style.backgroundColor="#eeeeee",i}},{key:"_setupClone",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!==n){var i=t.getBoundingClientRect(),o=window.getComputedStyle(t).position,r="fixed"===o?t.offsetLeft+window.pageXOffset:t.offsetLeft,s="fixed"===o?t.offsetTop+window.pageYOffset:t.offsetTop;rn="copy"===n?this._createCopyClone(t,e,i):this._createCheapClone(t,e,i),rn.id="cloned_"+rn.id,rn.style.left=r+"px",rn.style.top=s+"px",rn.style.width=i.width+"px",rn.style.height=i.height+"px",rn.style.pointerEvents="none",//!!
rn.style.position="absolute",e._cloneStartX=r,e._cloneStartY=s,document.body.appendChild(rn)}}},{key:"_setTempStyle",value:function(){this.styleBackup=document.body.style.userSelect,document.body.style.userSelect="none"}},{key:"_reset",value:function(){for(var t in this.isDragging=!1,this.draggableGotRemoved=!1,sn)sn[t]=null;null!==rn&&(document.body.removeChild(rn),rn=null),document.body.style.userSelect=this.styleBackup,document.removeEventListener("mousemove",tn),tn=null,this.styleBackup=null}},{key:"_getDistanceBetweenNodes",value:function(t,e){var n=-1,i=e;while(null!=i){if(n++,i==t)return n;if(i=i.parentNode,n>100)throw console.error(t,e),"loop overshot"}return-1}},{key:"_checkNestedElements",value:function(t,e,n){for(var i,o,r=null,s=0,a=e.length;s<a;s++){var d=e[s];if(o=this._getDistanceBetweenNodes(d.el,t),o>-1){r=d;break}}if(null===r)return console.log("...no droppable"),null;for(var l=0,c=n.length;l<c;l++)if(i=this._getDistanceBetweenNodes(n[l],t),console.log("...",{distanceBlacklist:i,distanceHit:o},i>-1,i<o),i>-1&&i<o)return console.log("blacklisted droppable"),null;return r}},{key:"_indexOfElement",value:function(t,e){for(var n=0,i=e.length;n<i;n++)if(t===e[n])return n;return-1}},{key:"_evaluateDropOnSelf",value:function(t,e){for(var n=0,i=e.length;n<i;n++)if(e[n].el===t)return n;return-1}},{key:"_generateDelegateId",value:function(t){return""!==t.id?t.id:(this.anonElCount++,t.tagName+this.anonElCount)}},{key:"_verifyMode",value:function(t){if("draggable"!==t&&"droppable"!==t)throw new Error("mode parameter must be 'draggable' or 'droppable'. Got: "+t)}},{key:"_parseConfig",value:function(t){if(this._verifyMode(t.mode),"boolean"!==typeof t.greedy&&(t.greedy=!1),"boolean"!==typeof t.draggableOnly&&(t.draggableOnly=!1),void 0===t.type&&!1===t.greedy&&!1===t.draggableOnly)throw new Error("Directive requires 'type' value unless modifiers draggable.only OR droppable.greedy are given.");t.delegate=document.getElementById(t.delegate);var e="draggable"===t.mode;t.draggableType=e?t.type:null,t.droppableType=e?null:t.type}},{key:"_evaluateDroppableWatcher",value:function(t,e,n,i){if(!1===this.draggableGotRemoved){for(var o=this._evaluateDropOnSelf(n.draggableEl,this.droppables),r=0,s=this.droppables.length;r<s;r++){var a=this.droppables[r],d=o===r;if(!d&&(e.droppableType=a.type,this._writeDroppableParameters(n,a.el,t,e,a.data),i("mouseup",n),a.greedy))break}e.draggableOnly&&"function"===typeof e.dragstop&&(this._writeDroppableParameters(n,t.target,t,e,null),e.dragstop("mouseup",n))}this.droppables.splice(0,this.droppables.length),this.processingDroppables=!1,i("mouseupAlways",n),this._reset()}},{key:"_initDroppableWatcher",value:function(t,e,n){var i=this;this.processingDroppables||(document.addEventListener("mouseup",(function o(r){setTimeout((function(){i._evaluateDroppableWatcher(r,t,e,n)}),1),document.removeEventListener("mouseup",o,!0)}),!0),this.processingDroppables=!0)}},{key:"_writeDroppableParameters",value:function(t,e,n,i,o){var r=e,s=r.getBoundingClientRect();t.droppableEl=r,t.droppableData=o,t.droppableType=i.droppableType,t.droppableX="fixed"===window.getComputedStyle(r).position?s.x:r.offsetLeft,t.droppableY="fixed"===window.getComputedStyle(r).position?s.y:r.offsetTop,t.endX=n.pageX,t.endY=n.pageY}},{key:"_writeDraggableParameters",value:function(t,e,n,i,o){var r=e,s=r.getBoundingClientRect();t.startX=n.pageX,t.startY=n.pageY,t.curX=n.pageX,t.curY=n.pageY,t.draggableData=o,t.draggableType=i.draggableType,t.draggableEl=r,t.draggableX="fixed"===window.getComputedStyle(r).position?s.x:r.offsetLeft,t.draggableY="fixed"===window.getComputedStyle(r).position?s.y:r.offsetTop,t.draggableNewX=t.draggableX,t.draggableNewY=t.draggableY}},{key:"_mouseup",value:function(t,e,n,i){this.droppables.push({el:t,data:i,type:n.droppableType,greedy:n.greedy})}},{key:"_mousedown",value:function(t,e,n,i,o){this.isDragging=!0,this._writeDraggableParameters(sn,t,e,n,i),this._initDroppableWatcher(n,sn,o),this._setupClone(t,sn,"copy"),this._setTempStyle(),void 0!==i.options&&void 0!==i.options.dragging&&(n.drag=i.options.dragging,console.error("DEPRECATED: do not use 'data.options.dragging' but just 'drag'")),tn="function"===n.drag?n.drag:an,document.addEventListener("mousemove",tn),o("mousedown",sn)}},{key:"_addDraggableListener",value:function(t,e,n,i,o,r,s){if(void 0===this.draggableListeners[t]){this.draggableListeners[t]=[];var a=this.draggableListeners[t],d=this;a.callback=function(t){for(var e=0,n=a.length;e<n;e++){var i=a[e];if(i.elSource===t.target){var o=!1===i.config.draggableOnly?s:function(){};d._mousedown(i.elMoving,t,i.config,i.data,o);break}}},e.addEventListener("mousedown",a.callback)}this.draggableListeners[t].push({data:r,elMoving:i,elSource:n,config:o,delegate:e})}},{key:"_addDroppableListener",value:function(t,e,n,i,o){if(void 0===this.droppableListeners[t]){this.droppableListeners[t]=[];var r=this.droppableListeners[t],s=this;r.callback=function(t){for(var e=r.map((function(t){return t.elSource})),n=t.path||t.composedPath(),i=0,o=n.length;i<o;i++){if(n[i]===document.body)break;var a=s._indexOfElement(n[i],e);if(a>-1){var d=r[a];s._mouseup(d.elSource,t,d.config,d.data)}}},e.addEventListener("mouseup",r.callback)}this.droppableListeners[t].unshift({data:o,elSource:n,config:i,delegate:e})}},{key:"addEventListener",value:function(t,e,n,i,o){this._parseConfig(n);var r=n.mode,s=n.delegate||document,a=s===document?"$_document":this._generateDelegateId(s);t.dataset._dnd_dId=a,"draggable"===r?this._addDraggableListener(a,s,t,e,n,i,o):this._addDroppableListener(a,s,t,n,i)}},{key:"removeEventListener",value:function(t,e){this._verifyMode(t);var n=!1;this.isDragging&&(this.draggableGotRemoved=!0);for(var i,o="droppable"===t?this.droppableListeners:this.draggableListeners,r="droppable"===t?"mouseup":"mousedown",s=o[e.dataset._dnd_dId],a=s.length,d=0;d<a;d++)if(s[d].elSource==e){i=s.splice(d,1),n=!0;break}if(1===a&&(i[0].delegate.removeEventListener(r,s.callback),delete o[e.dataset._dnd_dId]),!n)throw console.error({el:e}),new Error("Failed to remove event listener in unbind hook. This may cause a memory leak.")}},{key:"__internal__addListenerPerElement",value:function(t,e,n,i,o){var r=this;this._parseConfig(n);var s=n.mode,a=this.__internal__listeners.length;if("draggable"===s){var d=!1===n.draggableOnly?o:function(){};this.__internal__listeners[a]={cb:function(t){r._mousedown(e,t,n,i,d)},el:t},t.addEventListener("mousedown",this.__internal__listeners[a].cb)}else"droppable"===s&&(this.__internal__listeners[a]={cb:function(t){r._mouseup(e,t,n,i)},el:t},t.addEventListener("mouseup",this.__internal__listeners[a].cb))}},{key:"__internal__removeListenerPerElement",value:function(t,e){this._verifyMode(t);for(var n=!1,i=this.__internal__listeners,o=0,r=i.length;o<r;o++)if(i[o].el==e){var s="draggable"===t?"mousedown":"mouseup";e.removeEventListener(s,i[o].cb),i[o].el=null,i[o].cb=null,i.splice(o,1),n=!0;break}if(!n)throw console.error({el:e,mode:t}),new Error("Failed to remove event listener in unbind hook. This may cause a memory leak.")}}]),t}(),ln=dn,cn=n("4139"),un={namespaced:!0,state:{dragging:!1,id:-1,type:null,callbacks:{}},getters:{dragging:function(t){return t.dragging},draggableId:function(t){return t.dragging?t.id:null},draggableType:function(t){return t.dragging?t.type:null}},mutations:{set:cn["a"].setPropVal,addCallback:function(t,e){var n=e.dragType,i=e.dropType,o=e.action;void 0===t.callbacks[n]&&(t.callbacks[n]={}),t.callbacks[n][i]=o}},actions:{draggable:function(t,e){t.commit("set",{prop:"dragging",val:!0}),t.commit("set",{prop:"type",val:e.draggableType}),null!==e.draggableData&&void 0!==e.draggableData.id&&t.commit("set",{prop:"id",val:e.draggableData.id})},droppable:function(t,e){var n=t.state.callbacks,i=e.draggableType,o=e.droppableType;if(void 0!==n[i]&&void 0!==n[i][o])return t.dispatch(n[i][o],e,{root:!0})},done:function(t){t.commit("set",{prop:"dragging",val:!1}),t.commit("set",{prop:"id",val:-1}),t.commit("set",{prop:"type",val:null})},register:function(t,e){if("undefined"===typeof e.action||"undefined"===typeof e.dragType||void 0===Object(H["a"])(e.dropType))throw new Error("Missing paratmeter/s: please provide: {action, dragType, dropType}");t.commit("addCallback",e)}}};function pn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={namespace:{type:"string",default:"drag&drop"},directive:{type:"string",default:"drag&drop"},vuex:{type:null},delegateEvents:{type:"boolean",default:!0}};return Xe["a"].configParser(t,e)}var hn={install:function(t,e){var n=e.vuex,i=pn(e),o=i.namespace;Xe["a"].registerVuexModule(n,o,un),t.directive(i.directive,en(n,ln,{namespace:o,delegateEvents:i.delegateEvents}))}},fn=hn,mn=n("1b44"),vn={modalElement:Re["a"],contextMenu:Be,windows:ze,vuexHeman:je["b"],dragAndDropInstaller:fn,modalDialogs:mn},gn=n("a026"),yn=gn["a"],wn=n("2f62"),bn=wn["a"],xn=Object($t["a"])({links:function(t){return t.elements},linksPerNode:function(t){return t.linksPerNode},linkOverlays:function(t){return t.overlays},selectedLinks:function(t){return t.elements.filter((function(t){return t.selected}))}},"linksPerNode",(function(t){return function(e){for(var n=[],i=t.elements,o=0,r=i.length;o<r;o++){var s=i[o];s.from!=e&&s.to!=e||n.push(s)}return!(n.length<1)&&n}}));function kn(t,e){for(var n=e instanceof Array?e:[e],i=0,o=n.length;i<o;i++){var r=n[i].id,s=n[i].style;if("undefined"===typeof t.overlays[r])yn.set(t.overlays,r,s);else{var a=t.overlays[r],d=!1;for(var l in s)d||"undefined"!==typeof a[l]||(d=!0),a[l]=s[l];d&&(delete t.overlays[r],yn.set(t.overlays,r,a))}}}function Sn(t,e){if("undefined"!==typeof e)for(var n=e instanceof Array?e:[e],i=0,o=n.length;i<o;i++){var r=n[i].id,s=n[i].remove;if("undefined"===typeof t.overlays[r])return;for(var a={},d=0,l=s.length;d<l;d++)delete t.overlays[r][s[d]];for(var c in t.overlays[r])a[c]=t.overlays[r][c];yn.set(t.overlays,r,a)}else{for(var u in t.overlays){for(var p in t.overlays[u])delete t.overlays[u][p];delete t.overlays[u]}yn.set(t,"overlays",{})}}var Cn={setLinkOverlay:kn,removeLinkOverlay:Sn,setPendingLink:function(t,e){t.pendingLinkFrom=e.id}};n("8e6e");function Fn(t,e){var n=t.state;if("undefined"!==typeof n.augmentations){var i=JSON.parse(JSON.stringify(n.augmentations));for(var o in i)"undefined"===typeof e[o]&&(e[o]=i[o])}}function Nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nn(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nn(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $n=On({addLink:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Fn(e,n),i=new rt(null,n),console.log("check for existing link!"),t.next=5,e.dispatch("createLink",i);case 5:return e.commit("addLinksPerNode",i),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),setLink:function(t,e){e instanceof Array?e.forEach((function(e){t.commit("setLink",e)})):t.commit("setLink",e)},deleteLink:function(t,e){var n=t.getters.getLinkById(e.id);e.from=n.from,e.to=n.to,t.state.trash[n.id]={idx:t.state.index[n.id],link:n},t.commit("removeLinksPerNode",e,{root:!0}),t.commit("deleteLink",e)},undeleteLink:function(t,e){var n=e.id,i=t.state.elements,o=t.state.index,r=t.state.trash[n];i.splice(r.idx,0,r.link);for(var s=0,a=i.length;s<a;s++)o[i[s].id]=s;delete t.state.trash[n];var d=t.getters.getLinkById(e.id);e.from=d.from,e.to=d.to,t.commit("addLinksPerNode",e,{root:!0})}},vn.vuexHeman.actions.passThruActionsFactory(["setPendingLink","setLinkOverlay","removeLinkOverlay"]),{clearSelectedLinks:function(t){var e=t.getters.selectedLinks.map((function(t){return{id:t.id,selected:!1}}));e.length>0&&e.forEach((function(e){t.commit("setLink",e)}))},destroyLinks:function(t){t.dispatch("clearSelectedLinks"),t.dispatch("resetLinks")},loadLinks:function(t,e){for(var n=0,i=e.length;n<i;n++)e[n].fNode=t.getters.getNodeById(e[n].from),e[n].tNode=t.getters.getNodeById(e[n].to),t.commit("addLinksPerNode",{fNode:e[n].fNode,tNode:e[n].tNode});t.dispatch("resetLinks",{elements:e})},saveLinks:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.state.elements,i=e.state.augmentations,o=[],r=0,s=n.length;case 4:if(!(r<s)){t.next=18;break}a=n[r],o[r]={},t.t0=regeneratorRuntime.keys(a);case 8:if((t.t1=t.t0()).done){t.next=15;break}if(d=t.t1.value,!(d in i)){t.next=12;break}return t.abrupt("continue",8);case 12:o[r][d]=a[d],t.next=8;break;case 15:r++,t.next=4;break;case 18:return t.abrupt("return",{id:e.state.id,data:o});case 19:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}),En={state:{id:"links",augmentations:{visible:!0,visibleOverride:3,selected:!1,fNode:null,tNode:null},pendingLinkFrom:-1,overlays:{},trash:{}},getters:xn,mutations:Cn,actions:$n},In=vn.vuexHeman.crudContainer({namespaced:!1,container:"elements",getterName:"getLinkById",adderName:"createLink",setterName:"setLink",deleterName:"deleteLink",resetterName:"resetLinks",extend:En}),Pn=In,Ln={nodes:function(t){return t.elements},nodeProperty:function(t){return function(e,n){var i=t.elements[t.index[e]];return n in i?i[n]:n in i.style?i.style[n]:null}},selectedNodes:function(t){return t.elements.filter((function(t){return t.selected}))},nodeOverlays:function(t){return t.overlays}};function Tn(t,e){return t.elements[t.index[e]]}var Mn={addLinksPerNode:function(t,e){null!=e.fNode&&null!=e.tNode||(e.fNode=Tn(t,e.from),e.tNode=Tn(t,e.to));var n=Tn(t,e.fNode.id),i=Tn(t,e.tNode.id);n.links.push({fNode:e.fNode,tNode:e.tNode}),i.links.push({fNode:e.fNode,tNode:e.tNode})},removeLinksPerNode:function(t,e){var n=e.from,i=e.to,o=Tn(t,n),r=Tn(t,i),s=0,a=o.links.length,d=r.links.length;while(a>0)if(o.links[s].fNode.id!==n&&o.links[s].tNode.id!==i||(o.links.splice(s,1),a=o.links.length),s++,s>=a)break;s=0;while(d>0)if(r.links[s].fNode.id!==n&&r.links[s].tNode.id!==i||(r.links.splice(s,1),d=r.links.length),s++,s>=d)break},setNodeOverlay:kn,removeNodeOverlay:Sn};function An(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?An(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):An(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _n=Dn({addNode:function(t,e){e.view=e.view||JSON.parse(JSON.stringify(t.getters.activeView)),e.sets=e.sets||JSON.parse(JSON.stringify(t.getters.preselectedSets)),Fn(t,e);var n=new it(e.id,e);return t.dispatch("createNode",n),n},setNode:function(t,e){e instanceof Array?e.forEach((function(e){t.commit("setNode",e)})):t.commit("setNode",e)},deleteNode:function(t,e){var n=e.id,i=t.rootGetters.linksPerNode(n);if(!1!==i){t.state.nodeLinkTrash[n]=i.map((function(t){return t.id}));for(var o=0,r=i.length;o<r;o++)t.dispatch("deleteLink",{id:i[o].id},{root:!0})}t.state.trash[n]={idx:t.state.index[n],node:t.getters.getNodeById(n)},t.commit("deleteNode",e)},undeleteNode:function(t,e){var n=e.id,i=t.state.elements,o=t.state.index,r=t.state.trash[n];i.splice(r.idx,0,r.node);for(var s=0,a=i.length;s<a;s++)o[i[s].id]=s;if(delete t.state.trash[n],"undefined"!==typeof t.state.nodeLinkTrash[n]){for(var d=0,l=t.state.nodeLinkTrash[n].length;d<l;d++)t.dispatch("undeleteLink",{id:t.state.nodeLinkTrash[n][d]},{root:!0});delete t.state.nodeLinkTrash[n]}}},vn.vuexHeman.actions.passThruActionsFactory(["setNodeOverlay","removeNodeOverlay"]),{clearSelectedNodes:function(t){var e=t.getters.selectedNodes.map((function(t){return{id:t.id,selected:!1}}));e.length>0&&e.forEach((function(e){t.commit("setNode",e)}))},destroyNodes:function(t){t.dispatch("resetNodes")},loadNodes:function(t,e){t.dispatch("resetNodes",{elements:e})},saveNodes:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.state.elements,i=e.state.augmentations,o=[],r=0,s=n.length;case 4:if(!(r<s)){t.next=18;break}a=n[r],o[r]={},t.t0=regeneratorRuntime.keys(a);case 8:if((t.t1=t.t0()).done){t.next=15;break}if(d=t.t1.value,!(d in i)){t.next=12;break}return t.abrupt("continue",8);case 12:o[r][d]=a[d],t.next=8;break;case 15:r++,t.next=4;break;case 18:return t.abrupt("return",{id:e.state.id,data:o});case 19:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}),Wn={state:{id:"nodes",overlays:{},augmentations:{visible:!0,visibleOverride:3,selected:!1,w:120,h:30,links:[],textOverlay:""},trash:{},nodeLinkTrash:{}},getters:Ln,mutations:Mn,actions:_n},Rn=vn.vuexHeman.crudContainer({namespaced:!1,container:"elements",getterName:"getNodeById",adderName:"createNode",setterName:"setNode",deleterName:"deleteNode",resetterName:"resetNodes",extend:Wn}),Bn=Rn;function zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xn={state:{id:"map",map:new at},getters:{map:function(t){return t.map}},mutations:{setMap:vn.vuexHeman.mutations.setPropsOnObjectFactory({object:"map"})},actions:jn({},vn.vuexHeman.actions.passThruActionsFactory({setMap:"setMap",loadMap:"setMap"}),{saveMap:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",{id:e.state.id,data:e.state.map});case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),destroyMap:function(t){t.commit("setMap",new at)}})},Yn=Xn,Vn=n("75fc"),Hn={NONE:null,DUPLICATE:"ERR_DUPLICATE",INITIAL:"ERR_INITIAL",INVALID:"ERR_INVALID"},qn={state:{id:"sets",sets:[],preselectedSets:[]},getters:{sets:function(t){return t.sets},preselectedSets:function(t){return t.preselectedSets.map((function(e){return t.sets[e]}))},isValidSetName:function(t){return function(e){var n=e.trim();return-1===n[0].search(/[a-z]/i)||""===n?Hn.INITIAL:-1!==n.search(/[^a-zA-Z\d\s:]/)?Hn.INVALID:t.sets.indexOf(n)>-1?Hn.DUPLICATE:Hn.NONE}}},mutations:{addSet:function(t,e){var n=e.target,i=e.set;t[n].push(i)},removeSet:function(t,e){var n=e.target,i=e.set,o=t[n].indexOf(i);o>-1&&t[n].splice(o,1)},renameSet:function(t,e){var n=e.oldSet,i=e.newSet,o=t.sets.indexOf(n);t.sets.splice(o,1,i)}},actions:{addSet:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.getters.isValidSetName(n),i===Hn.NONE&&e.commit("addSet",{target:"sets",set:n}),t.abrupt("return",i);case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),removeSet:function(t,e){var n=t.state.sets.indexOf(e);t.commit("removeSet",{target:"sets",set:e}),t.commit("removeSet",{target:"preselectedSets",set:n})},renameSet:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n.newSet,o=e.getters.isValidSetName(i),o===Hn.NONE&&e.commit("renameSet",n),t.abrupt("return",o);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),addPreSelectedSet:function(t,e){var n=t.state.sets.indexOf(e),i=-1===t.state.preselectedSets.indexOf(e),o=n>-1;o&&i&&t.commit("addSet",{target:"preselectedSets",idx:n})},removePreSelectedSet:function(t,e){t.commit("removeSet",{target:"preselectedSets",set:e})},loadSets:function(t,e){var n;t.state.sets.splice(0,t.state.sets.length),(n=t.state.sets).push.apply(n,Object(Vn["a"])(e)),t.state.preselectedSets.splice(0,t.state.preselectedSets.length)},saveSets:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",{id:e.state.id,data:e.state.sets});case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),destroySets:function(t){t.state.sets.splice(0,t.state.sets.length),t.state.preselectedSets.splice(0,t.state.preselectedSets.length)}}},Jn=qn,Gn={namespaced:!0,state:{id:"uiState",validDrawSpaceStates:["edit","link","multiSelect","multiDragging","loading"],drawSpaceState:"loading",multiDragStartX:0,multiDragStartY:0,mousePosX:0,mousePosY:0,viewportW:0,viewportH:0,viewportX:0,viewportY:0,nodeBeingEdited:0,undoQueue:{},mainmenuVisible:!0,toolbarVisible:!0,footerbarVisible:!0,clipboard:{}},getters:{drawSpaceState:function(t){return t.drawSpaceState},mousePos:function(t){return{x:t.mousePosX,y:t.mousePosY}},paste:function(t){return t.clipboard}},mutations:{set:function(t,e){if("undefined"===typeof t[e.property]||"validDrawSpaceStates"===e.property)throw new Error("Invalid property for uiState: "+e.property);t[e.property]=e.value},reset:function(t,e){if("undefined"===typeof t[e.property]||"validDrawSpaceStates"===e.property)throw new Error("Invalid property for uiState: "+e.property);yn.set(t,e.property,e.value)}},actions:{set:function(t,e){for(var n in e)t.commit("set",{property:n,value:e[n]})},switchState:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1===e.state.validDrawSpaceStates.indexOf(n)){t.next=4;break}e.commit("set",{property:"drawSpaceState",value:n}),t.next=5;break;case 4:throw new Error("Tried to switch to invalid state: "+n);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),toggleUiMinimised:function(t,e){t.commit("set",{property:"mainmenuVisible",value:!t.state.mainmenuVisible}),t.commit("set",{property:"toolbarVisible",value:!t.state.toolbarVisible}),t.commit("set",{property:"footerbarVisible",value:!t.state.footerbarVisible})},copy:function(t,e){t.commit("reset",{property:"clipboard",value:e})},destroy:function(t){t.commit("set",{property:"nodeBeingEdited",value:0})}}},Un=Gn,Kn={namespaced:!0,state:{id:"settings",nodesShowId:!0,nodesShowWeight:!1,linksShowWeight:!1},mutations:{set:vn.vuexHeman.mutations.setPropVal},actions:{set:vn.vuexHeman.actions.passThruActionsFactory("set")}},Qn=Kn,Zn={namespaced:!0,state:{id:"panes",panes:{},numberOpen:0},getters:{panes:function(t){return t.panes}},mutations:{set:function(t,e){if("undefined"===typeof t.panes[e.id])throw new Error("Tried to set pane with non-existing id: "+e.id);if("undefined"===typeof t.panes[e.id][e.property])throw new Error("Tried to set non-existing property on pane "+e.property);t.panes[e.id][e.property]=e.value},setState:function(t,e){t[e.property]=e.value},addPanes:function(t,e){for(var n=e instanceof Array?e:[e],i=0,o=n.length;i<o;i++){if("undefined"!==typeof t.panes[n[i].id])throw new Error("Tried to add pane with existing id: "+n[i].id);n[i].opened=!1,yn.set(t.panes,n[i].id,n[i])}}},actions:{open:function(t,e){t.commit("set",{id:e,property:"opened",value:!0}),t.commit("setState",{property:"numberOpen",value:t.state.numberOpen+1})},close:function(t,e){t.commit("set",{id:e,property:"opened",value:!1}),t.commit("setState",{property:"numberOpen",value:t.state.numberOpen-1})},addPanes:function(t,e){t.commit("addPanes",e)},addPane:function(t,e){t.commit("addPanes",e)},destroy:function(t){if(0!==t.state.numberOpen){var e=t.state.panes;for(var n in e)t.commit("set",{id:n,property:"opened",value:!1});t.commit("setState",{property:"numberOpen",value:0})}}}},ti={state:{id:"views",views:[{id:0,label:"View 1"}],index:{},activeView:0,showAllViews:!0},getters:{views:function(t){return t.views},showAllViews:function(t){return t.showAllViews},activeView:function(t){return t.activeView}},mutations:{setViewState:vn.vuexHeman.mutations.setPropVal},actions:{addNewView:function(t){var e=t.state.views.length-1,n=t.state.views[e].id+2;t.dispatch("addView",{label:"View "+n})},setActiveView:function(t,e){t.commit("setViewState",{prop:"activeView",val:e})},setShowAllViews:function(t,e){t.commit("setViewState",{prop:"showAllViews",val:e})},prevView:function(t){var e=t.state.views.length,n=t.state.activeView-1;n<0&&(n=e-1),t.commit("setViewState",{prop:"activeView",val:n})},nextView:function(t){var e=t.state.views.length,n=t.state.activeView+1;n===e&&(n=0),t.commit("setViewState",{prop:"activeView",val:n})},loadViews:function(t,e){t.dispatch("resetViews",{elements:e})},saveViews:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",{id:e.state.id,data:e.state.views});case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),destroyViews:function(t){t.dispatch("resetViews")}}},ei=vn.vuexHeman.crudContainer({namespaced:!1,container:"views",getterName:"getViewById",adderName:"addView",setterName:"setView",deleterName:"deleteView",resetterName:"resetViews",extend:ti}),ni=ei;function oi(t,e){return""===t.state.exclusiveControl||t.state.exclusiveControl===e.requestId||(console.error(e.requestId,"tried to change visibility but has no exclusive view control"),!1)}var ri,si={namespaced:!0,state:{id:"visibilityController",exclusiveControl:""},getters:{exclusiveControl:function(t){return t.exclusiveControl}},mutations:{set:function(t,e){t.exclusiveControl=e}},actions:{requestExclusiveControl:function(t,e){if(""!==t.state.exclusiveControl)return t.state.exclusiveControl!==e?console.error(e,"requested exclusive visibility control but control is already taken by another component"):console.warn(e,"requested exclusive visibility control but control is already taken by this component"),!1;t.commit("set",e)},releaseExclusiveControl:function(t,e){if(""===t.state.exclusiveControl)return!1;t.state.exclusiveControl===e?t.commit("set",""):console.error(e,"tried to release visibility control but control is already taken by another component")},setNodes:function(t,e){if(!oi(t,e))return!1;var n=e.request||[];n.forEach((function(e){t.dispatch("setNode",e,{root:!0})}))},setLinks:function(t,e){if(!oi(t,e))return!1;var n=e.request||[];n.forEach((function(e){t.dispatch("setLink",e,{root:!0})}))},resetVisibility:function(t,e){var n=t.dispatch,i=(t.commit,t.getters,t.rootGetters);if(console.warn("untested!"),!oi(si,e))return!1;var o=i.activeView,r=i.nodes;r.forEach((function(t){n("setNode",{id:t.id,visible:t.view===o},{root:!0})}))},destroy:function(t){t.commit("set","")}}},ai=si,di={namespaced:!0,state:{id:"singletonComponents",colorPicker:{opened:!1,color:"#fffff"},modalDialogs:{opened:!1,parameters:null}},mutations:{set:function(t,e){return"undefined"!==typeof t[e.id]&&"undefined"!==typeof t[e.id][e.property]?(t[e.id][e.property]=e.value,!0):(console.error("Invalid data for singleton component: ",e),!1)}},actions:{open:function(t,e){t.commit("set",{id:e,property:"opened",value:!0})},close:function(t,e){t.commit("set",{id:e,property:"opened",value:!1})},set:function(t,e){t.commit("set",e)},destroy:function(t){t.commit("set",{id:"colorPicker",property:"opened",value:!1}),t.commit("set",{id:"modalDialogs",property:"opened",value:!1})},openDialog:function(t,e){return t.commit("set",{id:"modalDialogs",property:"parameters",value:e.parameters||null}),t.commit("set",{id:"modalDialogs",property:"opened",value:e.dialog}),new Promise((function(t){ri=t}))},closeDialog:function(t,e){t.commit("set",{id:"modalDialogs",property:"parameters",value:null}),t.commit("set",{id:"modalDialogs",property:"opened",value:!1}),ri(e),ri=null}}},li=di,ci={links:Pn,nodes:Bn,map:Yn,sets:Jn,settings:Qn,uiState:Un,panes:Zn,views:ni,visibilityController:ai,singletons:li};function ui(t,e){if("state"in t&&"id"in t.state)return t.state.id;var n=e.split("/").pop();return n}var pi={state:{id:"root"},modules:ci,actions:{destroy:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=function(t,n){var i=ui(t,n),o=""===n?"destroy"+i[0].toUpperCase()+i.substring(1,i.length):"destroy",r=""===n?o:n+"/"+o;o in t.actions&&e.dispatch(r)},e.dispatch("storeVisitor",n);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),load:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dispatch("loadNodes",n.nodes),e.dispatch("loadLinks",n.links),delete n.nodes,delete n.links,i=function(t,i){var o=ui(t,i);if(o in n){var r=""===i?"load"+o[0].toUpperCase()+o.substring(1,o.length):i+"load";e.dispatch(r,n[o])}},e.dispatch("storeVisitor",i),t.abrupt("return","ok");case 7:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),save:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],i=function(t,i){var o=ui(t,i),r=""===i?"save"+o[0].toUpperCase()+o.substring(1,o.length):"save",s=""===i?r:i+"/"+r;r in t.actions&&n.push(e.dispatch(s))},e.dispatch("storeVisitor",i),t.next=5,Promise.all(n);case 5:for(o=t.sent,r={},s=0,a=o.length;s<a;s++)r[o[s].id]=o[s].data;return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),debounce:function(t,e){clearTimeout(hi),fi.push(e),hi=setTimeout((function(){var e=fi.map((function(t){return t.data}));t.commit("setNode",e),fi.splice(0,fi.length)}),30)}}},hi=-1,fi=[],mi=pi;function vi(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{beforeCreate:function(){for(var e in this.$api=this.$api||{},t)this.$api[e]=t[e]}}}function gi(t,e){var n=We.request(t,e);return vi(n,t)}var yi,wi={request:gi},bi={name:"toolbar",template:'\n\t\t<div id="loadingModal" v-if="show"> \n\t\t\t<div id="loading">\n\t\t\t\t<div class="bounce1"></div> \n\t\t\t\t<div class="bounce2"></div> \n\t\t\t\t<div class="bounce3"></div>\n\t\t\t</div>\n\t\t</div>\t\n\t',computed:{show:function(){var t=this.$store.getters["uiState/drawSpaceState"];return"loading"===t}}},xi=wi.request("uiToolbar",["command"]),ki={mixins:[xi],name:"toolbar",template:'\n\t\t<div id="toolbar">\n\n\t\t\t<div id="shrink_ui" class="toolbar_btn shrink_ui_click" v-on:click="toggleVisibility">\n\t\t\t\t<p class="icon_resize shrink_ui_click"></p>\n\t\t\t</div>\t\t\n\t\t\t\n\t\t\t<div v-if="visible">\n\t\t\t\t<div class="toolbar_separator"></div>\n\t\t\t\t\n\t\t\t\t<div id="state_edit" v-bind:class="(stateBtnOutline(\'edit\')) ? \'toolbar_btn btn_active\' : \'toolbar_btn\'" title="Edit the concepts of your map. Change text, style and position." v-on:click="switchState(\'edit\')">\n\t\t\t\t\t<p class="icon_mousecursor">  </p>\n\t\t\t\t</div> \n\t\t\t\t\n\t\t\t\t<div id="state_link" v-bind:class="(stateBtnOutline(\'link\')) ? \'toolbar_btn btn_active\' : \'toolbar_btn\'" title="Edit the links of your map." v-on:click="switchState(\'link\')">\n\t\t\t\t\t<p class="icon_link">  </p>\n\t\t\t\t</div>\t\n\t\t\t\t\n\t\t\t\t<div class="toolbar_separator"></div>\n\t\t\t\t\n\t\t\t\t<div id="undo_ui_button" class="toolbar_btn" v-on:click="undo">\n\t\t\t\t\t<p class="icon_undo_arrow" v-bind:style="(undoQueue.length > 0) ? {\'background-color\': \'transparent\'} : {\'background-color\': \'#ffffff\'}"></p>\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\n\t\t</div>\t\t\n\t',computed:{visible:function(){return this.$store.state.uiState.toolbarVisible},stateBtnOutline:function(){var t=this.$store.getters["uiState/drawSpaceState"];return function(e){return e===t}},undoQueue:function(){return this.$store.state.uiState.undoQueue}},methods:{toggleVisibility:function(){this.$store.dispatch("uiState/toggleUiMinimised")},switchState:function(t){this.$store.dispatch("uiState/switchState",t)},undo:function(){this.$api.command.undo()}}},Si=(n("f559"),wi.request("uiLog",["command"])),Ci={mixins:[Si],name:"log",template:'\n\t\t<div id="log" v-bind:style="logStyle" @mouseenter="expand()" @mouseleave="collapse()" @click="toggleCommandInput()">\n\t\t\t<div id="logMessages" v-bind:style="messageStyle">\n\t\t\t\t<p class="mainLogEntry" v-for="msg in messages">{{msg}}</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<input v-show="commandInput" \n\t\t\t\t   type="text" \n\t\t\t\t   id="logCommand" \n\t\t\t\t   placeholder="command" \n\t\t\t\t   v-model="currentCommand" \n\t\t\t\t   ref="commandInput"\n\t\t\t\t   @click.stop="" \n\t\t\t\t   @keyup.enter="evalCommand($event.target.value)"/>\n\t\t\t\t   \n\t\t\t\t   \n\t\t</div>\n\n\t',data:function(){return{logStyle:{height:"16px",bottom:"10px",overflow:"hidden"},messageStyle:{height:"16px",bottom:"10px"},commandInput:!1,currentCommand:"",messages:[]}},methods:{expand:function(){var t=this;yi=setTimeout((function(){t.logStyle.height="256px",t.messageStyle.height="256px",t.messageStyle["overflow-y"]="auto"}),500)},collapse:function(){clearTimeout(yi),this.logStyle.height="16px",this.messageStyle.height="16px",this.messageStyle["overflow-y"]="hidden"},toggleCommandInput:function(){!0===this.commandInput?this.closeCommandInput():this.openCommandInput()},openCommandInput:function(){var t=this;this.commandInput=!0,setTimeout((function(){t.$refs.commandInput.focus()}),1)},closeCommandInput:function(){this.commandInput=!1},evalCommand:function(t){var e,n,i=t.trim().toLowerCase();if(i.startsWith("load")){var o=i.split(" ")[1];document.dispatchEvent(new CustomEvent("mainmenu",{detail:{menu:"load",params:o}}))}else i.startsWith("l")?(i=i.replace("l","").trim().split(" "),e=parseInt(i[0]),n=parseInt(i[1]),this.$api.command.execute("addLink",{from:e,to:n}),this.addLogEntry(t)):"quit"==i||"exit"==i?this.closeCommandInput():this.addLogEntry("Unknown command.");this.currentCommand=""},addLogEntry:function(t){var e=this.getFormattedTime()+": "+t;this.messages.unshift(e)},getFormattedTime:function(){var t=Date.now(),e=new Date(t),n=parseInt(e.getSeconds());n=n>=0&&n<10?"0"+n:n;var i=parseInt(e.getMinutes());return i=i>=0&&i<10?"0"+i:i,e.getHours()+":"+i+":"+n}}},Fi={name:"viewControls",template:'\n\n\t\t<div id="view_controls">\n\t\t\t<div id="view_controls_previous" class="icon_arrow_left view_controls_element view_controls_btn" v-on:click="prevView"></div> \n\t\t\t\n\t\t\t<select :disabled="disabled"\n\t\t\t\t\tid="view_control" \n\t\t\t\t\tclass="view_controls_element" \n\t\t\t\t\tv-on:change="change" ref="viewControlSelectbox"\n\t\t\t\t\tv-on:click.right="showAllViews = !showAllViews"> \n\t\t\t\t<option v-for="(view, index) in views" :id="view.id" :selected="activeView === index" :value="view.id">{{view.label}}{{(showAllViews) ? \'*\' : \'\'}}</option> \n\t\t\t\t\n\t\t\t\t<option id="new">New</option>\n\t\t\t</select> \n\t\t\t\n\t\t\t<div id="view_controls_next" class="icon_arrow_right view_controls_element view_controls_btn" v-on:click="nextView"></div> \n\t\t</div>\t\n\t',computed:{views:function(){return this.$store.getters.views},activeView:function(){return this.$store.getters.activeView},showAllViews:{get:function(){return this.$store.getters.showAllViews},set:function(t){return this.$store.dispatch("setShowAllViews",t)}},disabled:function(){return""!==this.$store.getters["visibilityController/exclusiveControl"]}},methods:{change:function(t){var e=t.target.value;"New"!==e?this.$store.dispatch("setActiveView",parseInt(e)):(document.querySelector('#view_control [value="'+this.activeView+'"]').selected=!0,this.$store.dispatch("addNewView"))},prevView:function(){this.disabled||this.$store.dispatch("prevView")},nextView:function(){this.disabled||this.$store.dispatch("nextView")}}},Ni={name:"footerbar",template:'\n\t\t<div v-if="visible">\n\t\t\t<log /> <viewControls />\n\t\t</div>\n\t',computed:{visible:function(){return this.$store.state.uiState.footerbarVisible}},components:{log:Ci,viewControls:Fi}},Oi=vn.modalElement,$i=wi.request("uiNodeEditTextArea",["command"]),Ei={mixins:[$i],name:"nodeEditTextArea",props:["node"],template:'\n\t\t<textarea ref="textarea" \n\t\t\t\t  autofocus\n\t\t\t\t  id="nodeTextArea"\n\t\t\t\t  v-on:keydown.enter="enter($event.target.value)" \n\t\t\t\t  v-on:keydown.esc="esc" \n\t\t\t\t  v-on:mousedown.stop=""\n\t\t\t\t  v-on:mouseup.stop=""\n\t\t\t\t  v-model="text"\n\t\t\t\t  ></textarea>\n\t',data:function(){return{text:""}},methods:{enter:function(t){Oi.forcePop(),this.save(t)},esc:function(){Oi.forcePop()},save:function(t){var e=this.$options.filters.noLineBreaks(t);this.$api.command.execute("setNode",{id:this.node.id,content:e}),this.$store.dispatch("uiState/set",{nodeBeingEdited:0})},discard:function(){this.$store.dispatch("uiState/set",{nodeBeingEdited:0})}},filters:{noLineBreaks:function(t){return t.replace(/\r?\n|\r/gm,"")}},mounted:function(){var t=this;this.$refs.textarea.focus(),this.text=this.node.content,Oi.push(this.$refs.textarea,(function(){t.save(t.text)}))}},Ii="desktop",Pi={ptrdown:{mobile:"touchstart",desktop:"mousedown"},ptrup:{mobile:"touchend",desktop:"mouseup"},ptrmove:{mobile:"touchmove",desktop:"mousemove"}},Li=function(t){var e,n="idle",i=-1,o=-1,r={};function s(t){t.removeEventListener(Pi.ptrup[Ii],l),t.removeEventListener(Pi.ptrmove[Ii],c,{passive:!1})}function a(t){var e=t.target;clearTimeout(i),s(e),n="idle",e.removeEventListener("mouseleave",a),console.log("abort events due to mouseleave before mousemove (TODO: more intuitive if dragging starts)")}function d(t){var r=t.target;if(t.stopPropagation(),"undefined"!==typeof e.touchstart&&e.touchstart(t,r),"idle"==n)n="tapdown",r.addEventListener(Pi.ptrup[Ii],l),r.addEventListener(Pi.ptrmove[Ii],c,{passive:!1}),i=setTimeout((function(){"undefined"!==typeof e.taphold&&e.taphold(t,r),s(r),n="idle"}),600);else if("tapup"==n)clearTimeout(o),o=-1,"undefined"!==typeof e.dbltap&&e.dbltap(t,r),n="dbltapped";else{if("dbltapped"!=n)throw new Error("Illegal state at mousedown: "+n);n="idle",s(r)}}function l(t){var r=t.target;r.removeEventListener("mouseleave",a),"undefined"!==typeof e.touchstop&&e.touchstop(t,r),"tapdown"==n?(clearTimeout(i),i=-1,n="tapup",o=setTimeout((function(){"undefined"!==typeof e.tap&&e.tap(t,r),n="idle",s(r)}),200)):"dbltapped"==n&&(n="idle",s(r))}function c(t){if("tapdown"==n){var e=t.target;t.preventDefault(),"tapdown"==n&&(clearTimeout(i),i=-1,n="idle",s(e))}}r.touchstart=!1,r.touchstop=!1,r.tap=!1,r.dbltap=!1,r.taphold=!1,r.dragstart=!1,r.dragstop=!1,this.proxyEvent=function(t,n){e=n,d(t)}},Ti=function(){};function Mi(){var t,e,n,i,o,r,s,a,d,l,c="desktop",u={ptrdown:{mobile:"touchstart",desktop:"mousedown"},ptrup:{mobile:"touchend",desktop:"mouseup"},ptrmove:{mobile:"touchmove",desktop:"mousemove"}},p={},h=[],f={},m=null,v=0,g=null,y=null;function w(t){var e=document.body.style["user-select"];if(h.push({el:document.body,style:"user-select",value:e}),null!==t){var n=t.style["pointer-events"];h.push({el:t,style:"pointer-events",value:n})}}function b(){for(var t=0,e=h.length;t<e;t++)h[t].el.style[h[t].style]=h[t].value;h=[]}function x(){m=null,v=0,g=null,y=null,f={},p={dragStart:"dragStart",dragStop:"dragStop",dragging:"dragging"}}function k(t){t.deltaX=d,t.deltaY=l,t.startX=s,t.startY=a,t.elStartX=o,t.elStartY=r}function S(h){d=0,l=0,s=h.pageX||h.startX||0,a=h.pageY||h.startY||0,null!==g&&(o=g.offsetLeft,r=g.offsetTop,t=o,e=r,n="desktop"==c?h.clientX:h.touches[0].clientX,i="desktop"==c?h.clientY:h.touches[0].clientY),k(h);var m=f[p.dragStart];if("undefined"!==typeof m){var v=m(h,g);if("undefined"!==typeof v&&!1===v)return}return w(g),document.body.style["user-select"]="none",document.addEventListener(u.ptrup[c],C,!0),document.addEventListener(u.ptrmove[c],F,{passive:!1}),!0}function C(s){var a="desktop"==c?s.clientX:s.touches[0].clientX,h="desktop"==c?s.clientY:s.touches[0].clientY,y=t+(a-n),w=e+(h-i);if(n=null,i=null,null!==g&&null!==m){var x=window.getComputedStyle(g).position,S=g.offsetWidth,N=g.offsetHeight,O=m.clientWidth||Math.max(document.documentElement.clientWidth,window.innerWidth||0),$=m.clientHeight||Math.max(document.documentElement.clientHeight,window.innerHeight||0);"absolute"===x?(y<-S/2?y=0:y>O-S-v&&(y=O-S-v),w<-N/2?w=0:w>$-N-v&&(w=$-N-v)):"fixed"===x?(y<0-S+v?y=0-S+v:y>O-v&&(y=O-v),w<0?w=0:w>$-v&&(w=$-v)):console.warn(x," is not a valid containment position."),g.style.left=y+"px",g.style.top=w+"px"}t=d,e=l,o=y,r=w,document.removeEventListener(u.ptrmove[c],F,{passive:!1}),document.removeEventListener(u.ptrup[c],C,!0),k(s);var E=f[p.dragStop];return"undefined"!==typeof E&&E(s,g),b(),!0}function F(u){u.preventDefault(),u.stopPropagation(),d=u.pageX-s,l=u.pageY-a;var h="desktop"==c?u.clientX:u.touches[0].clientX,m="desktop"==c?u.clientY:u.touches[0].clientY,v=t+(h-n),y=e+(m-i);return o=v,r=y,null!==g&&(g.style.left=v+"px",g.style.top=y+"px"),k(u),"undefined"!==typeof f[p.dragging]&&f[p.dragging](u,u.target),!0}this.startDragging=function(t,e){x(),g=null!==t?t.target:null,y=g,null==t&&(t={}),"undefined"!==typeof e&&(m=e.containment||null,g="undefined"!==typeof e.target?e.target:g,y=e.handle||y,m=e.containment||null,v=e.containmentMargin||0,f=e.context||{},"undefined"!==typeof e.eventMap&&("undefined"!==typeof e.eventMap.dragStart?p.dragStart=e.eventMap.dragStart:p.dragStart=Ti,"undefined"!==typeof e.eventMap.dragStop?p.dragStop=e.eventMap.dragStop:p.dragStop=Ti,"undefined"!==typeof e.eventMap.dragging?p.dragging=e.eventMap.dragging:p.dragging=Ti),"undefined"!==typeof e.x&&(t.startX=e.x),"undefined"!==typeof e.y&&(t.startY=e.y)),S(t)}}var Ai,Di,_i=wi.request("uiNodeElement",["command"]),Wi=new Li,Ri=new Mi,Bi=-1,zi={mixins:[_i],name:"nodeElement",template:'<div \n\t\t\t\t:id="$const.selectors.nodeIdPrefix + node.id"\n\n\t\t\t\t:ref="$const.selectors.nodeIdPrefix + node.id"\n\t\t\t\t:data-id="node.id"\n\t\t\t\t\t\t\t\t\n\t\t\t\tv-on:dblclick.stop=""\n\t\t\t\tv-on:mousedown="eventProxy"\n\n\t\t\t\tv-bind:class="[$const.selectors.node, (node.selected) ? $const.selectors.nodeSelected : \'\']"\n\t\t\t\tv-bind:style="[style, derivedStyle]"\n\t\t\t\t>\n\t\t\t\t\t<span v-if="showId" :class="$const.selectors.nodeProperty" v-text="node.id+\'. \'"></span>\n\t\t\t\t\t<span v-if="editing==false" :class="$const.selectors.nodeProperty" v-text="node.content"></span>\n\t\t\t\t\t<nodeEditTextArea v-else :node="node"></nodeEditTextArea>\n\t\t\t\t\t<span v-if="showWeight" :class="$const.selectors.nodeProperty" v-text="\'(\'+node.weight+\')\'"></span>\t\t\n\t\t\t\t\t\n\t\t\t\t\t<div v-if="node.textOverlay !== \'\'" style="border: 1px solid grey; \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   position:absolute; \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   top: -16px; \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   border-top-left-radius: 5px; \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   border-top-right-radius: 5px;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   padding-left: 2px;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   padding-right: 2px;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   font-size: 14px;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   background-color: white">{{node.textOverlay}}</div>\n\t\t\t\t\t\n\t\t\t\t</div>',props:["node"],data:function(){return{visibleBase:!0,shadowNode:!1}},watch:{"node.content":function(){var t=this;setTimeout((function(){var e=document.getElementById("node"+t.node.id).offsetHeight;e!=t.node.h&&t.$store.dispatch("setNode",{id:t.node.id,h:e})}),1)},drawSpaceState:function(t){"multiDragging"===t?this.node.style["pointer-events"]="none":"none"==this.node.style["pointer-events"]&&(this.node.style["pointer-events"]="all"),"link"!==t&&(Bi=-1)},visibility:function(t){document.getElementById("node"+this.node.id).style.visibility=!0===t?"visible":"hidden",this.$store.dispatch("setNode",{id:this.node.id,visible:t})},"node.visibleOverride":function(t,e){var n=3===t?this.visibleBase:t;3===e&&(this.visibleBase=this.node.visible),this.$store.dispatch("setNode",{id:this.node.id,visible:n}),document.getElementById("node"+this.node.id).style.visibility=!0===n?"visible":"hidden"}},computed:{visibility:function(){return!!this.$store.getters.showAllViews||(this.node.view===this.$store.getters.activeView||!!this.isShadowNode)},activeView:function(){return this.$store.getters.activeView},showAllViews:function(){return this.$store.getters.showAllViews},isShadowNode:function(){var t=this.node.links,e=this.activeView;if(e===this.node.view||this.showAllViews)return!1;for(var n=0,i=t.length;n<i;n++)if(e===t[n].fNode.view&&e!==t[n].tNode.view||e!==t[n].fNode.view&&e===t[n].tNode.view)return!0;return!1},editing:function(){return this.$store.state.uiState.nodeBeingEdited==this.node.id},style:function(){var t={};for(var e in this.overlayStyle)t[e]=this.overlayStyle[e];for(var n in this.node.style)t[n]=this.overlayStyle[n]||this.shadowNodeStyle[n]||this.node.style[n];return t},derivedStyle:function(){return{top:this.node.y+"px",left:this.node.x+"px"}},overlayStyle:function(){var t=this.$store.state.nodes.overlays[this.node.id];return"undefined"!==typeof t?t:{}},shadowNodeStyle:function(){return this.isShadowNode?{"background-color":"#ffffff",color:"#bcbcbc","font-style":"italic","border-color":"#bcbcbc","border-width":"1px","border-style":"dotted"}:{}},showId:function(){return this.$store.state.settings.nodesShowId},showWeight:function(){return this.$store.state.settings.nodesShowWeight}},methods:{eventProxy:function(t){Wi.proxyEvent(t,this)},dragStart:function(t){var e=this.$store.getters["uiState/drawSpaceState"];return"multiSelect"==e?(this.$store.dispatch("uiState/set",{multiDragStartX:t.pageX,multiDragStartY:t.pageY}),this.$store.dispatch("uiState/switchState","multiDragging"),!1):"link"!=e},dragStop:function(t,e){var n=e.offsetLeft,i=e.offsetTop;this.$api.command.execute("setNode",{id:this.node.id,x:n,y:i})},touchstart:function(t,e){var n=this.$store.getters["uiState/drawSpaceState"];if("edit"===n&&3!==t.which?Ri.startDragging(t,{context:this,containment:document.getElementById(this.$const.selectors.mapLayer)}):"multiSelect"===n&&3!==t.which&&Ri.startDragging(t,{context:this,target:null}),"edit"!==n&&"link"!==n||3===t.which?"edit"===n&&3===t.which&&(this.$store.dispatch("clearSelectedNodes"),this.$store.dispatch("setNode",{id:this.node.id,selected:!0})):(this.$store.dispatch("clearSelectedNodes"),this.$store.dispatch("setNode",{id:this.node.id,selected:!0})),"link"==n&&3!==t.which)-1==Bi?Bi=this.node.id:Bi==this.node.id?(Bi=-1,this.$store.dispatch("clearSelectedNodes")):(this.$api.command.execute("addLink",{from:Bi,to:this.node.id}),Bi=-1,this.$store.dispatch("clearSelectedNodes"));else if("link"===n&&3===t.which){-1!=Bi&&this.$store.dispatch("clearSelectedNodes");var i=this;Bi=this.node.id,Ai=function(t){if(-1===t.target.className.split(" ").indexOf("node"))return!0;var e=parseInt(t.target.dataset.id);Bi!=e&&(i.$api.command.execute("addLink",{from:Bi,to:e}),Bi=e)},document.getElementById("nodeContainer").addEventListener("mouseenter",Ai,!0),document.addEventListener("mouseup",(function t(){document.removeEventListener("mouseup",t),document.getElementById("nodeContainer").removeEventListener("mouseenter",Ai,!0),Bi=-1}))}},touchstop:function(t,e){var n=this.$store.getters["uiState/drawSpaceState"],i=this.$store.state.uiState.selectedNodes;"multiSelect"==n&&3!==t.which?this.$store.dispatch("setNode",{id:this.node.id,selected:!this.node.selected}):"link"!==n&&3===t.which&&this.$store.dispatch("contextMenu/open",{menu:"nodeMenu",context:i,event:t})},tap:function(t,e){this.$store.getters["uiState/drawSpaceState"]},dbltap:function(){var t=this.$store.getters["uiState/drawSpaceState"];"edit"===t&&this.$store.dispatch("uiState/set",{nodeBeingEdited:this.node.id})}},mounted:function(){var t=this.$refs[this.$const.selectors.nodeIdPrefix+this.node.id],e=t.style.display;"none"===e&&(t.style.display="block");var n=t.offsetWidth,i=t.offsetHeight;"none"===e&&(t.style.display="none"),this.$store.dispatch("setNode",{id:this.node.id,w:n,h:i,selected:!1})},components:{nodeEditTextArea:Ei}},ji={name:"nodeLayer",template:'\n\t\t<div :id="$const.selectors.nodeLayer" v-bind:style="style"> \n\t\t\t<nodeElement v-if="node != null" v-for="node in nodes" :key="node.id" :node="node" style="position: absolute;" /> \n\t\t</div>\n\t',props:["mapWidth","mapHeight","nodes"],computed:{style:function(){var t=this.mapWidth+"px",e=this.mapHeight+"px";return{width:t,height:e}}},components:{nodeElement:zi}},Xi=wi.request("uiLinkElement",["links"]),Yi={mixins:[Xi],name:"linkElement",template:'\n\t\t<path :id="$const.selectors.linkIdPrefix+link.id"\n\t\t\t  marker-end="url(#arrow)" \n\t\t\t  \n\t\t\t  v-if="from != null && to != null"\n\t\t\t \n\t\t\t  v-bind:class="[$const.selectors.link, (link.selected) ? $const.selectors.linkSelected : \'\']"\n\t\t\t  v-bind:style="[link.style, {\'stroke-width\': strokeWidth}, (link.selected ? {\'stroke\': \'#0000ff\'} : {\'stroke\': link.style.stroke}), overlayStyle]" \n\n\t\t\t  v-on:mouseenter="strokeWidth=4"\n\t\t\t  v-on:mouseleave="strokeWidth=2"\n\t\t\t  v-on:mousedown.stop="mousedown"\n\t\t\t  v-on:mouseup.stop=""\n\t\t\t  \n\t\t\t  :d="coords" \n\t\t/>\t\n\t',props:["link"],data:function(){return{strokeWidth:2,from:{},to:{}}},watch:{"link.renderer":function(t){var e=this.$api.links.rendererChanged(this.link);this.$store.dispatch("setLink",{id:this.link.id,cX:e.cX,cY:e.cY})},visible:function(t){document.getElementById("link"+this.link.id).style.visibility=!0===t?"visible":"hidden",this.$store.dispatch("setLink",{id:this.link.id,visible:t})}},computed:{inViewport:function(){},visible:function(){return 3===this.link.visibleOverride?this.from.visible&&this.to.visible:this.link.visibleOverride},coords:function(){var t=this.$api.links.getCoordinates(this.extractGeometry(this.from),this.extractGeometry(this.to),this.link);return this.$store.dispatch("setLink",{id:this.link.id,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,cX:t.cX,cY:t.cY}),t.renderer=this.link.renderer,this.$api.links.getSVGPathDefinition(t)},overlayStyle:function(){var t=this.$store.getters.linkOverlays[this.link.id];return"undefined"!==typeof t?t:{}}},methods:{mousedown:function(t){var e=this.$store.getters["uiState/drawSpaceState"];3===t.which?(this.$store.dispatch("setLink",{id:this.link.id,selected:!0}),this.$store.dispatch("contextMenu/open",{menu:"linkMenu",event:t})):"edit"===e||"link"===e?this.$emit("linkMousedown",t,this.link):"multiSelect"==e&&this.$store.dispatch("setLink",{id:this.link.id,selected:!this.link.selected})},extractGeometry:function(t){return{x:t.x,y:t.y,w:t.w,h:t.h}}},created:function(){var t=this;this.link.selected&&this.$store.dispatch("setLink",{id:this.link.id,selected:!1}),this.from=this.$store.getters.nodes.filter((function(e){return e.id===t.link.from}))[0],this.to=this.$store.getters.nodes.filter((function(e){return e.id===t.link.to}))[0]}},Vi=wi.request("uiLinkLayer",["links","command"]),Hi=new Mi,qi={mixins:[Vi],name:"linkLayer",template:'\n\t\t<svg xmlns="http://www.w3.org/2000/svg" version="1.1" :id="$const.selectors.linkLayer" v-bind:style="style">\n\n\t\t\t<defs>\n\t\t\t\t\x3c!-- http://apike.ca/prog_svg_markers.html\t --\x3e\t\n\t\t\t\t<marker :id="$const.selectors.linkMarker" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" orient="auto" markerWidth="8" markerHeight="6">\n\t\t\t\t\t<polyline points="0,0 10,5 0,10 1,5" fill="black" />\n\t\t\t\t</marker>\t\t\n\t\t\t\t\n\t\t\t</defs>\n\t\t\t\n\t\t\t<g v-for="link in links" v-if="link != null">\n\t\t\t\t<linkElement :link="link" :key="link.id" v-on:linkMousedown="enablePreview" />\n\t\t\t\t<title>From: {{link.from}} | To: {{link.to}} | Weight: {{link.weight}}</title>\n\t\t\t</g>\n\t\t\t\n\t\t\t<path :id="$const.selectors.linkPreview" v-if="showPreview" :d="d" fill="none" stroke="#444444" stroke-dasharray="2, 2" />\n\n\t\t</svg>\t\n\t',props:["mapWidth","mapHeight","links"],computed:{style:function(){var t=this.mapWidth+"px",e=this.mapHeight+"px";return{width:t,height:e}}},data:function(){return{showPreview:!1,linkToPreview:null,tNode:null,fNode:null,d:null}},methods:{enablePreview:function(t,e){if("straight"!=e.renderer){this.linkToPreview=this.extractGeometryLink(e),this.fNode=this.extractGeometryNode(e.fNode),this.tNode=this.extractGeometryNode(e.tNode);var n={dragStart:"previewStart",dragStop:"previewStop",dragging:"previewDrag"};Hi.startDragging(t,{context:this,target:null,eventMap:n})}},previewStart:function(){this.showPreview=!0},previewDrag:function(t){var e=t.pageX,n=t.pageY,i=this.$api.links.translateControlPoints(this.linkToPreview,e,n);this.linkToPreview.cX=i.cX,this.linkToPreview.cY=i.cY;var o=this.$api.links.getCoordinates(this.fNode,this.tNode,this.linkToPreview);o.renderer=this.linkToPreview.renderer,this.d=this.$api.links.getSVGPathDefinition(o)},previewStop:function(){var t=this.linkToPreview;if(null===t)return console.warn("previewStop called when linkP was null"),void console.trace();this.$api.command.execute("setLink",{id:t.id,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,cX:t.cX,cY:t.cY}),this.showPreview=!1,this.linkToPreview=null,this.tNode=null,this.fNode=null,this.d=null},extractGeometryLink:function(t){var e=JSON.parse(JSON.stringify({id:t.id,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,cX:t.cX,cY:t.cY,renderer:t.renderer}));return{id:e.id,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,cX:e.cX,cY:e.cY,renderer:e.renderer}},extractGeometryNode:function(t){return{x:t.x,y:t.y,w:t.w,h:t.h}}},components:{linkElement:Yi}},Ji=wi.request("uiDragbox",["nodes","links"]),Gi=new Mi,Ui={mixins:[Ji],name:"dragbox",template:'<div :id="$const.selectors.dragbox" v-bind:style="style"></div>',props:["show","nodes","links","startX","startY"],computed:{style:function(){var t={};return t.top=this.y+"px",t.left=this.x+"px",t.width=this.w+"px",t.height=this.h+"px",t["-webkit-backface-visibility"]="hidden",t}},data:function(){return{x:0,y:0,w:0,h:0}},watch:{show:{immediate:!0,handler:function(t){if(t){var e={dragStart:"dragDragBoxStart",dragStop:"dragDragBoxStop",dragging:"draggingDrag"};Gi.startDragging(null,{context:this,eventMap:e,target:null,x:this.startX,y:this.startY})}}}},methods:{dragDragBoxStart:function(t){this.x=t.startX,this.y=t.startY,this.w=0,this.h=0},dragDragBoxStop:function(){var t=this;this.$emit("close");var e=this.$api.nodes.getNodesWithinArea(this.nodes,this.x,this.y,this.w,this.h,!1).filter((function(t){return t.visible})).map((function(t){return{id:t.id,selected:!0}})),n=this.$api.links.getLinksWithinArea(this.links,this.x,this.y,this.w,this.h,!1).filter((function(t){return t.visible})).map((function(t){return{id:t.id,selected:!0}}));e.length>0&&(e.forEach((function(e){t.$store.dispatch("setNode",e)})),this.$store.dispatch("uiState/switchState","multiSelect")),n.length>0&&(n.forEach((function(e){t.$store.dispatch("setLink",e)})),this.$store.dispatch("uiState/switchState","multiSelect"))},draggingDrag:function(t){var e=this.calculateDragBoxDimension(t.startX,t.startY,t.pageX,t.pageY);this.x=e.x1,this.y=e.y1,this.w=e.w,this.h=e.h},calculateDragBoxDimension:function(t,e,n,i){var o,r,s,a,d,l;return n<t&&i<e?(s=t,a=e,t=n,e=i,n=s,i=a):n<t&&i>e?(s=t,d=n,t=d,n=s):n>t&&i<e&&(a=e,l=i,e=l,i=a),o=n-t,r=i-e,{x1:t,y1:e,x2:n,y2:i,w:o,h:r}}}},Ki=wi.request("uiLinkSign",["links"]),Qi={mixins:[Ki],name:"linkSign",props:["link"],template:'\n\t\t<div v-show="link.isInverse && link.visible" :id="$const.selectors.linkSignPrefix+link.id" :class="$const.selectors.linkSign" v-bind:style="position">\n\n\t\t</div>\n\t',computed:{position:function(){var t=this.$api.links.getNegativeSignCoordinates(this.link);return{top:t[1]+"px",left:t[0]+"px"}}}},Zi=wi.request("uiLinkWeight",["links"]),to={mixins:[Zi],name:"linkWeight",props:["link"],template:'\n\t\t<div v-show="link.visible && linksShowWeight" :id="$const.selectors.linkWeightPrefix+link.id" :class="$const.selectors.linkWeight" v-bind:style="position">\n\t\t\t{{link.weight}}\n\t\t</div>\n\t',computed:{position:function(){var t=this.$api.links.getLinkWeightCoordinates(this.link);return{top:t[1]+"px",left:t[0]+"px"}},linksShowWeight:function(){return this.$store.state.settings.linksShowWeight}}},eo=new Mi,no=wi.request("uiMapLayer",["command","nodes","links"]),io={mixins:[no],name:"mapLayer",template:'<div :id="$const.selectors.mapLayer" v-bind:style="style" v-on:dblclick="dbltap" v-on:mousedown="mousedown"> \n\t\t\t\t\t<linkLayer :links="links" :mapWidth="width" :mapHeight="height" /> \n\t\t\t\t\t<nodeLayer :nodes="nodes" :mapWidth="width" :mapHeight="height" /> \n\t\t\t\t\t<dragbox v-if="showDragBox" :show="showDragBox" :nodes="nodes" :links="links" :startX="dragBoxStartX" :startY="dragBoxStartY" v-on:close="showDragBox=false" />\n\t\t\t\t\t\n\t\t\t\t\t<div v-for="link in links" :class="$const.selectors.linkOverlayContainer">\n\t\t\t\t\t\t<linkSign \t:link="link" :key="\'s\'+link.id" />\n\t\t\t\t\t\t<linkWeight :link="link" :key="\'w\'+link.id" />\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t</div>',data:function(){return{showDragBox:!1,dragBoxStartX:0,dragBoxStartY:0}},computed:{drawSpaceState:function(){return this.$store.getters["uiState/drawSpaceState"]},width:function(){return this.$store.getters.map.width},height:function(){return this.$store.getters.map.height},style:function(){var t=this.width+"px",e=this.height+"px";return{position:"absolute",top:"0px",left:"0px","border-style":"ridge",width:t,height:e}},links:function(){return this.$store.getters.links},nodes:function(){return this.$store.getters.nodes}},watch:{width:function(t){document.body.clientWidth<this.width&&(document.body.style.width=t+"px")},height:function(t){document.body.clientHeight<this.height&&(document.body.style.height=t+"px")},drawSpaceState:function(t){"multiDragging"===t&&this.multiDrag()}},methods:{mousedown:function(t){var e=this.$store.getters["uiState/drawSpaceState"];2!==t.which&&("edit"==e?(this.$store.dispatch("clearSelectedNodes"),this.$store.dispatch("clearSelectedLinks"),this.dragBoxStartX=t.pageX,this.dragBoxStartY=t.pageY,this.showDragBox=!0):"multiSelect"==e&&(this.$store.dispatch("clearSelectedNodes"),this.$store.dispatch("clearSelectedLinks"),this.$store.dispatch("uiState/switchState","edit")))},dbltap:function(t){var e=t.pageX,n=t.pageY;this.$api.command.execute("addNode",{x:e,y:n})},multiDrag:function(){this.$options.nodes=JSON.parse(JSON.stringify(this.$store.getters.selectedNodes.map((function(t){return{id:t.id,x:t.x,y:t.y,w:t.w,h:t.h}})))),eo.startDragging(null,{x:this.$store.state.uiState.multiDragStartX,y:this.$store.state.uiState.multiDragStartY,target:null,context:this,eventMap:{dragStop:"multiDragStop",dragging:"multiDragging"}})},multiDragStop:function(t){for(var e=this,n=this.$options.nodes,i=this.$store.getters.map,o=i.width,r=i.height,s=[],a=!1,d=0,l=n.length;d<l;d++){var c=n[d].x+t.deltaX,u=n[d].y+t.deltaY;if(c<0||u<0||c+n[d].w>o||u+n[d].h>r){a=!0;break}s.push({id:n[d].id,x:c,y:u})}if(a)for(var p=0,h=n.length;p<h;p++){var f=document.getElementById("node"+n[p].id);f.style.left=n[p].x+"px",f.style.top=n[p].y+"px"}else s.length>0&&(this.$api.command.startCommandBatch(),s.forEach((function(t){e.$api.command.execute("setNode",t)})),this.$api.command.stopCommandBatch());this.$options.nodes=null,this.$store.dispatch("uiState/switchState","multiSelect")},multiDragging:function(t){for(var e=this.$options.nodes,n=0,i=e.length;n<i;n++){var o=e[n].x+t.deltaX,r=e[n].y+t.deltaY,s=document.getElementById("node"+e[n].id);s.style.left=o+"px",s.style.top=r+"px"}}},components:{nodeLayer:ji,linkLayer:qi,dragbox:Ui,linkSign:Qi,linkWeight:to}},oo={name:"paneComponent",props:["pane"],template:'\n\t<div v-if="opened" \n\t\t:id="pane.id"\n\t\t:ref="\'pane\'+pane.id">\n\t\t\n\t\t<div class="pane_header" style="position: relative; width: 100%; height: 20px;">\n\t\t\t<div style="width: 20px; height: 20px; float: right; margin-right: 5px; cursor:pointer" v-on:click="opened=false"> \n\t\t\t\t<span class="icon_close" style="display: inline-block; cursor: pointer;"></span> \n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="paneChild pane">\n\t\t\t<slot></slot>\n\t\t</div>\n\t</div>\n\t',data:function(){return{minimised:!1}},computed:{opened:{get:function(){return this.pane.opened},set:function(){this.$store.dispatch("panes/close",this.pane.id)}}}},ro={name:"colorField",props:["value"],template:'\n\t\t<span style="width: 28px; height: 18px; border: 1px solid black; display: inline-block" \n\t\t\t  v-bind:style="{backgroundColor: value}" \n\t\t\t  v-on:click="open">\n\t\t</span>\n\t',data:function(){return{active:!1}},computed:{color2:function(){return this.$store.state.singletons.colorPicker.color},showColorPicker:function(){return this.$store.state.singletons.colorPicker.opened}},watch:{showColorPicker:function(t){!1===t&&(this.active=!1)},color2:function(t){this.active&&this.$emit("input",t)}},methods:{open:function(){this.$store.dispatch("singletons/set",{id:"colorPicker",property:"color",value:this.value}),this.$store.dispatch("singletons/open","colorPicker"),this.active=!0}}},so=wi.request("uiPaneStyles",["command"]),ao={mixins:[so],name:"paneStyles",props:["pane"],template:'\n\t<div class="paneStylesBlock">\n\t\t\n\t\t<fieldset>\n\t\t<legend>Nodes</legend>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="border-style" />\n\t\t\t\t\tBorder style: \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<select v-model="styles.nodes[\'border-style\']">\n\t\t\t\t\t<option>solid</option>\n\t\t\t\t\t<option>dotted</option>\n\t\t\t\t\t<option>dashed</option>\n\t\t\t\t </select>\t\t\t\n\n\t\t\t</div>\n\t\t\t\t\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="border-color" />\n\t\t\t\t\tBorder colour: \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<colorField v-model="styles.nodes[\'border-color\']"/>\n\t\t\t</div>\t\n\t\t\t\t\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="border-width" />\n\t\t\t\t\tBorder width: \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<input type="number" min="0" style="width: 40px" v-model="styles.nodes[\'border-width\']" />\n\t\t\t</div>\n\t\t\t\t\n\t\t\t<div>\n\t\t\t\t<div>\t\t\t\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="background-color" />\n\t\t\t\t\tBackground colour: \n\t\t\t\t</div>\t\t\t\n\n\t\t\t\t<colorField v-model="styles.nodes[\'background-color\']"/>\n\n\t\t\t</div>\t\n\t\t\t\t\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="color" />\n\t\t\t\t\tText colour: \n\t\t\t\t</div>\n\t\t\t\t<colorField v-model="styles.nodes[\'color\']"/>\n\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="font-size" />\n\t\t\t\t\tText size: \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<input type="number" min="1" style="width: 40px" v-model="styles.nodes[\'font-size\']" />\n\t\t\t</div>\t\t\t\n\t\t</fieldset>\n\n\t\t<fieldset>\n\t\t<legend>Links</legend>\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="stroke" />\n\t\t\t\t\tColour: \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<colorField v-model="styles.links[\'stroke\']"/>\n\t\t\t</div>\t\n\t\t\t\n\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t\t<input type="checkbox" v-model="selectedStyles" value="stroke-dasharray" />\n\t\t\t\t\tStyle: \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<select v-model="styles.links[\'stroke-dasharray\']">\n\t\t\t\t\t<option value="none">solid</option>\n\t\t\t\t\t<option value="5, 5">dashed</option>\n\t\t\t\t </select>\t\t\t\n\t\t\t</div>\t\t\n\t\t</fieldset>\n\t\t\n\t\t<hr>\n\t\t\n\t\t<button id="pgsSave" class="pgsBtns" v-on:click="saveDefault">Save as default</button>\n\t\t<button id="pgsSaveAll" class="pgsBtns" v-on:click="saveAll">Apply to all</button>\n\t\t\n\t\t<br>\n\t\t\n\t\t<button id="pgsSaveSets" class="pgsBtns" v-on:click="saveSelected">Apply to...</button> \n\t\t<select id="pgsSets" v-model="selection">\n\t\t\t<option selected="selected" value="selected">current selection</option>\n\t\t\t<option v-for="set in sets" :value="set">{{set}}</option>\n\t\t</select>\n\t\t\n\t\t<br>\n\t\t\n\t\t<button id="pgsPasteNodeStyle" class="pgsBtns" v-on:click="paste">Paste</button>\n\t</div>\n\t',$meta:{id:"paneStyles"},data:function(){return{styles:{nodes:{"border-style":"solid","border-color":"#000000","border-width":1,"background-color":"#ffffff",color:"#000000","font-size":10},links:{stroke:"#000000","stroke-dasharray":"none"}},selectedStyles:[],selectedNodes:[],selectedLinks:[],selection:"selected"}},computed:{sets:function(){return this.$store.getters.sets}},methods:{buildStylesToSave:function(t){var e={};for(var n in this.styles[t]){var i=this.styles[t][n];"font-size"!==n&&"border-width"!==n||(i=this.encodePx(i)),-1!==this.selectedStyles.indexOf(n)&&(e[n]=i)}return e},save:function(t,e){this.$api.command.startCommandBatch(),this.$api.command.execute("setNode",[t]),this.$api.command.execute("setLink",[e]),this.$api.command.stopCommandBatch()},encodePx:function(t){var e=t;return e<1&&(e=1),e+"px"},decodePx:function(t){return parseInt(t.replace("px",""))},saveAll:function(){var t=this,e=this.$store.getters.nodes.map((function(e){return{id:e.id,style:t.buildStylesToSave("nodes")}})),n=this.$store.getters.links.map((function(e){return{id:e.id,style:t.buildStylesToSave("links")}}));this.save(e,n)},saveSelected:function(){var t,e,n=this,i=this.selection;"selected"===i?(t=this.$store.getters.selectedNodes.map((function(t){return{id:t.id,style:n.buildStylesToSave("nodes")}})),e=this.$store.getters.selectedLinks.map((function(t){return{id:t.id,style:n.buildStylesToSave("links")}}))):(t=this.$store.getters.nodes.filter((function(t){return-1!==t.sets.indexOf(i)})).map((function(t){return{id:t.id,style:n.buildStylesToSave("nodes")}})),e=[]),this.save(t,e)},saveDefault:function(){alert("Todo")},paste:function(){var t=this.$store.getters["uiState/paste"];for(var e in t)if(-1!==this.selectedStyles.indexOf(e)){var n=t[e];"font-size"!==e&&"border-width"!==e||(n=this.decodePx(n)),this.styles.nodes[e]=n}}},mounted:function(){for(var t in this.styles.nodes)this.selectedStyles.push(t);for(var e in this.styles.links)this.selectedStyles.push(e)},components:{colorField:ro}},lo={name:"paneMinimapScrollbar",props:["value","axis"],template:'\n\t\t<div class="minimapScroll" ref="scroll" v-on:click="scrollClick" v-bind:style="style">\n\t\t\t<div class="minimapScrollAnchor" ref="scrollAnchor" v-on:mousedown="scrollDrag"></div>\n\t\t</div>\t\n\t',data:function(){return{dim:null,coord:null,offsetDim:null,offsetCoord:null,pointer:null,style:{width:null,height:null,display:null,"margin-left":null}}},methods:{updateModel:function(t,e){var n=t[this.offsetCoord]/(e[this.offsetCoord]+e[this.offsetDim]-t[this.offsetDim]),i=parseInt(n/2*this.$store.getters.map[this.dim]/16);this.$emit("input",-1*i)},scrollClick:function(t){var e=this.$refs.scroll,n=this.$refs.scrollAnchor,i=t[this.pointer]-n.getBoundingClientRect()[this.coord]-n[this.offsetDim]/2;n.style[this.coord]=n[this.offsetCoord]+i+"px",this.updateModel(n,e)},scrollDrag:function(t){var e=this.$refs.scroll,n=this.$refs.scrollAnchor,i=this,o=e[this.offsetDim]-n[this.offsetDim],r=t[this.pointer],s=n[this.offsetCoord];function a(t){var e=t[i.pointer]-r+s;e<0?e=0:e>o&&(e=o),n.style[i.coord]=e+"px"}document.addEventListener("mousemove",a),document.addEventListener("mouseup",(function t(){i.updateModel(n,e),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",a)}))}},mounted:function(){if("horizontal"===this.axis)this.dim="width",this.coord="left",this.pointer="clientX",this.style.width="250px",this.style.height="",this.style.display="block",this.style["margin-left"]="";else{if("vertical"!==this.axis)throw new Error("axis prop not set (correctly)");this.dim="height",this.coord="top",this.pointer="clientY",this.style.width="",this.style.height="250px",this.style.display="inline-block",this.style["margin-left"]="3px"}this.offsetDim="offset"+this.dim[0].toUpperCase()+this.dim.substring(1,this.dim.length),this.offsetCoord="offset"+this.coord[0].toUpperCase()+this.coord.substring(1,this.coord.length)}},co={name:"paneMinimap",props:["pane"],template:'\n\t<div>\t\t\n\t\t<div v-show="showSelect" id="pmmMapSection" ref="section"></div>\n\n\t\t<canvas id="paneMap" ref="minimap" v-on:mouseenter="enable" v-on:mouseleave="disable" v-on:mousewheel.stop.prevent="scrollZoom"> </canvas>\n\n\t\t<paneMinimapScrollbar v-model="originY" :axis="\'vertical\'" v-on:input="renderMap" />\n\t\t<paneMinimapScrollbar v-model="originX" :axis="\'horizontal\'" v-on:input="renderMap" />\n\n\t\t<button id="pmmZoomOut" class="pmmZoom" v-on:click="doZoom(-10)">-</button>\n\t\t<input type="text" id="pmmZoomLevel" :value="zoom" disabled="disabled" size="2"/>\n\t\t<button id="pmmZoomIn" class="pmmZoom" v-on:click="doZoom(10)">+</button>\n\t\t\n\t\t<div style="display: inline-block; vertical-align: middle;" class="icon_gear_wheel" v-on:click="settingsMenu">\n\t\t</div>\n\t\t\n\t</div>\n\t',$meta:{id:"paneStyles"},data:function(){return{zoom:100,originX:0,originY:0,showSelect:!1}},watch:{nodes:{handler:function(){this.renderMap()},deep:!0},links:{handler:function(){this.renderMap()},deep:!0},map:function(){this.renderMap()},nodeOverlays:{handler:function(){this.renderMap()},deep:!0},linkOverlays:{handler:function(){this.renderMap()},deep:!0}},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},map:function(){return this.$store.getters.map},nodeOverlays:function(){return this.$store.getters.nodeOverlays},linkOverlays:function(){return this.$store.getters.linkOverlays}},methods:{settingsMenu:function(){alert("#Todo :-(")},enable:function(){var t=this.$refs.minimap;t.addEventListener("mousedown",this.mapMousedown),t.addEventListener("mouseup",this.mapMouseup)},disable:function(){var t=this.$refs.minimap;t.removeEventListener("mousedown",this.mapMousedown),t.removeEventListener("mouseup",this.mapMouseup)},scrollZoom:function(t){t.wheelDeltaY>0?this.doZoom(10):this.doZoom(-10)},mapMousedown:function(t){if(1!=t.which)return!1;this.showSelect=!0,this.updateSectionDimensions(),this.jumpToMouse(t),this.updateSectionPosition(),t.target.addEventListener("mousemove",this.mapMousemove)},mapMouseup:function(t){t.target.removeEventListener("mousemove",this.mapMousemove),this.showSelect=!1},mapMousemove:function(t){this.jumpToMouse(t),this.updateSectionPosition()},updateSectionDimensions:function(){var t=this.zoom/100,e=this.$refs.section,n=parseInt(window.innerWidth/(16/t)),i=parseInt(window.innerHeight/(16/t));e.style.width=n+"px",e.style.height=i+"px"},updateSectionPosition:function(){var t=this.zoom/100,e=this.$refs.section,n=this.$refs.minimap,i=window.pageXOffset,o=window.pageYOffset,r=16/t,s=16/t,a=this.originX*t,d=this.originY*t,l=parseInt(i/r+a),c=parseInt(o/s+d);l+e.offsetWidth<=n.offsetLeft+n.offsetWidth&&l>=0&&(e.style.left=l+"px"),c+e.offsetHeight<=n.offsetTop+n.offsetHeight&&c>=0&&(e.style.top=c+"px")},jumpToMouse:function(t){var e=this.zoom/100,n=this.$refs.minimap,i=n.getBoundingClientRect(),o=i.left+window.pageXOffset,r=i.top+window.pageYOffset,s=parseInt((t.pageX-o)/e)-this.originX,a=parseInt((t.pageY-r)/e)-this.originY,d=16,l=16,c=s*d-parseInt(window.innerWidth/2),u=a*l-parseInt(window.innerHeight/2);window.scrollTo(c,u)},doZoom:function(t){this.zoom+t>0?this.zoom+=t:this.zoom=0,this.renderMap()},renderMap:function(){Di.render({nodes:this.nodes,links:this.links,map:this.map},{zoom:this.zoom/100,origin:[this.originX,this.originY]})},getUncachedNodeOverlays:function(){return this.$store.state.nodes.overlays},getUncachedLinkOverlays:function(){return this.$store.state.links.overlays}},mounted:function(){var t=this;Di=new Dt,Di.create("paneMap"),Di.addFilter("domStyleNodes","nodes",[],(function(e,n){var i=t.getUncachedNodeOverlays();return"undefined"!==typeof i[e.id]&&"undefined"!==typeof i[e.id]["background-color"]&&(n.color=i[e.id]["background-color"]),null})),Di.addFilter("domStyleLinks","links",[],(function(e,n){var i=t.getUncachedLinkOverlays();return"undefined"!==typeof i[e.id]&&"undefined"!==typeof i[e.id]["stroke"]&&(n.color=i[e.id]["stroke"]),null})),this.renderMap()},destroyed:function(){Di=null},components:{paneMinimapScrollbar:lo}},uo={methods:{preventOutOfBounds:function(t,e,n){var i={},o=n.offsetHeight,r=n.offsetWidth;return e+o>window.pageYOffset+window.innerHeight&&(e=window.pageYOffset+window.innerHeight-o-85),t+r>window.pageXOffset+window.innerWidth&&(t=window.pageXOffset+window.innerWidth-r-85),i.x=t,i.y=e,i}}},po={methods:{gotoNode:function(t){var e="object"===Object(H["a"])(t),n=e?null:document.getElementById(this.$const.selectors.nodeIdPrefix+t),i=e?t.x:n.offsetLeft,o=e?t.y:n.offsetTop;i-=parseInt(window.innerWidth/2),o-=parseInt(window.innerHeight/2),i<0&&(i=0),o<0&&(o=0),window.scrollTo(i,o)}}},ho=wi.request("uiPaneAnnotations",["command"]),fo={mixins:[ho,po],name:"paneAnnotations",props:["pane"],template:'\n\t<div>\n\t\t<div v-if="annotations.length === 0">No annotations saved.</div>\n\t\t<div v-for="anno in annotations">\n\t\t\t<span style="font-weight: bold; cursor: pointer;" v-on:click="gotoNode(anno.id)">Node #{{anno.id}}</span> <span>{{anno.annotation}}</span>\n\t\t\t<span v-on:click="deleteAnnotation(anno.id)" style="cursor: pointer">[x]</span>\n\t\t</div>\n\t</div>\n\t',$meta:{id:"paneAnnotations"},computed:{annotations:function(){return this.$store.getters.nodes.filter((function(t){return""!=t.annotation}))},focus:function(){var t=this.$store.getters.selectedNodes;return null!==t?t[0]:null}},methods:{deleteAnnotation:function(t){this.$store.dispatch("setNode",{id:t,annotation:""})}}};function mo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function vo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mo(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var go={paneStyles:ao,paneMinimap:co,paneAnnotations:fo},yo={name:"paneContainer",template:'\n\t\t<div id="panes" v-if="show">\n\t\t\t<paneComponent v-if="pane.opened" v-for="pane in listOfPanes" :pane="pane" :key="pane.id">\n\t\t\t\t<component v-bind:is="pane.id" :pane="pane"></component>\n\t\t\t</paneComponent>\n\t\t</div>\t\t\n\t',computed:{listOfPanes:function(){return this.$store.getters["panes/panes"]},show:function(){return 0!==this.$store.state.panes.numberOpen}},created:function(){this.$store.dispatch("panes/addPane",{id:ao.name}),this.$store.dispatch("panes/addPane",{id:co.name}),this.$store.dispatch("panes/addPane",{id:fo.name})},components:vo({paneComponent:oo},go)},wo={name:"contextMenuNodeStyle",props:["closeCallback"],$meta:{name:"contextMenuNodeStyle",parent:"nodeContextMenu"},template:'\n\t\t<div v-on:click="openEditor" :id="$const.selectors.nodeStyle">\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_painting_utensils"></div>\n\t\t\t<div class="contextMenuItemRight">Style</div>\n\t\t\t\n\t\t</div>\n\t',methods:{openEditor:function(){this.$store.dispatch("windows/open",{id:"windowNodeStyleEditor"}),this.closeCallback()}}},bo={name:"contextMenuNodeEdit",props:["closeCallback"],$meta:{name:"contextMenuNodeEdit",parent:"nodeContextMenu"},template:'\n\t\t<div v-on:click="openEditor" :id="$const.selectors.nodeEdit">\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_text_edit"></div>\n\t\t\t<div class="contextMenuItemRight">Edit</div>\n\t\t\t\n\t\t</div>\n\t',methods:{openEditor:function(){var t=this.$store.getters.selectedNodes;t=t.length>0?t[0].id:0,this.$store.dispatch("uiState/set",{nodeBeingEdited:t}),this.closeCallback()}}};function xo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ko(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xo(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var So=wi.request("uiElementFieldBaseMixin",["command"]),Co={mixins:[So],props:["element","property","type","multiSelection"],computed:{computedProp:{get:function(){return null==this.element?this.defaultValue||"":(t=-1===this.property.indexOf(".")?this.element[this.property]:this.element.style[this.property.split(".").pop()],console.log(this.property,this.type,t),"undefined"===typeof this.decodeFilter?t:this.decodeFilter(t));var t},set:function(t){this.setter(t)}}},methods:{setter:function(t){var e=this,n="node"===this.type?"setNode":"setLink",i={objOp:"recur"},o="undefined"===typeof this.encodeFilter?t:this.encodeFilter(t);if(-1===this.property.indexOf(".")?i[this.property]=o:(i.style={},i.style[this.property.split(".").pop()]=o),"undefined"!==typeof this.multiSelection){var r=this.multiSelection.map((function(t){return ko({id:t.id},i)}));r.length>0&&(this.$api.command.startCommandBatch(),r.forEach((function(t){e.$api.command.execute(n,t)})),this.$api.command.stopCommandBatch())}else i.id=this.element.id,this.$api.command.execute(n,i)}}},Fo=Co,No={mixins:[Fo],name:"elementNumberField",template:'\n\t\t<input type="number" v-model.number="computedProp" />\n\t'},Oo={name:"contextMenuNodeWeight",props:["closeCallback"],$meta:{name:"contextMenuNodeWeight",parent:"nodeContextMenu"},template:'\n\t\t<div>\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_calculator"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\tWeight: \n\t\t\t<elementNumberField \n\t\t\t\t:id="$const.selectors.nodeWeightField"\n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'weight\'" \n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\n\t\t\t\tstyle="width: 50px" \n\t\t\t/>\t\t\t\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t',computed:{selectedNodes:function(){return this.$store.getters.selectedNodes}},components:{elementNumberField:No}},$o=wi.request("uiContextMenuNodeDelete",["command"]),Eo={mixins:[$o],name:"contextMenuNodeDelete",props:["closeCallback"],$meta:{name:"contextMenuNodeDelete",parent:"nodeContextMenu"},template:'\n\t\t<div v-on:click="deleteNode" :id="$const.selectors.nodeDelete">\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_garbage_or_rubbish"></div>\n\t\t\t<div class="contextMenuItemRight">Delete</div>\n\t\t\t\n\t\t</div>\n\t',methods:{deleteNode:function(){var t=this.$store.getters.selectedNodes;this.closeCallback(),this.$api.command.startCommandBatch();for(var e=0,n=t.length;e<n;e++)this.$api.command.execute("deleteNode",{id:t[e].id});this.$api.command.stopCommandBatch()}}},Io=wi.request("uiContextMenuNodeView",["command"]),Po={mixins:[Io],name:"contextMenuNodeView",props:["closeCallback"],$meta:{name:"contextMenuNodeView",parent:"nodeContextMenu"},template:'\n\t\t<div>\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_eye_and_folder"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\t\t<select :id="$const.selectors.nodeViewField" v-on:change="changeView">\n\t\t\t\t\t<option value="">To view...</option>\n\t\t\t\t\t<option v-for="view in views" :id="view.id" :value="view.id">{{view.label}}</option> \n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t',computed:{views:function(){return this.$store.getters.views}},methods:{changeView:function(t){var e=t.target.value;if(""!==e){var n=this.$store.getters.selectedNodes.map((function(t){return{id:t.id,view:e}}));n.length>0&&(this.$api.command.execute("setNode",[n]),this.closeCallback())}}}},Lo={name:"tagEditBoxTag",props:["tag"],template:'\n\t\t<span class="tagEditBoxTagContainer" v-on:click="clickTag">\n\t\t\t<span class="tagEditBoxTagTag">{{tag}}</span> <span class="tagEditBoxTagDelete" v-on:click.stop="deleteTag">x</span>\n\t\t</span>\n\t',methods:{deleteTag:function(){this.$emit("deleteTag",this.tag)},clickTag:function(t){var e=this.tag;this.$emit("clickTag",{event:t,tag:e})}}},To={name:"tagEditBox",props:["availableTags","selectedTags","options"],template:'\n\t\t<div>\n\t\t\t<div id="tagEditBoxTagDisplay" v-bind:style="style">\n\t\t\t\t<tagEditBoxTag v-for="tag in selectedTags" :tag="tag" :key="tag" v-on:deleteTag="deleteTag" v-on:clickTag="clickTag"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div id="tagEditBoxTagSelection">\n\t\t\t\t<input \tclass="tagEditBoxTagInput"\n\t\t\t\t\t\ttype="text" \n\t\t\t\t\t\tplaceholder="Add or select" \n\t\t\t\t\t\tstyle="border: none; width: 120px; margin-top: 4px;"\n\t\t\t\t\t\t\n\t\t\t\t\t\tv-model="tagInput"\n\t\t\t\t\t\tv-on:keydown.enter="addTag($event.target.value)"  \n\t\t\t\t\t\tv-on:focus="focus"\n\t\t\t\t\t\tv-on:blur="delayedBlur"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div v-if="showAvailableSetsList && tagList.length > 0" id="tagEditBoxAvailableTagsList">\t\n\t\t\t\t<div class="tagEditBoxAvailableTagsListItem" v-for="tag in tagList" v-on:click="addTag(tag)">(+) {{tag}}</div>\n\t\t\t</div>\n\t\t</div>\n\t',computed:{tagList:function(){var t=this,e=this.availableTags.filter((function(e){return-1===t.selectedTags.indexOf(e)}));return this.showAvailableSetsList?this.tagInput.length<3?e:e.filter((function(e){return-1!==e.indexOf(t.tagInput)})):[]},style:function(){return"undefined"!==typeof this.options&&"undefined"!==typeof this.options.height?{"max-height":this.options.height}:{}}},data:function(){return{tagInput:"",showAvailableSetsList:!1}},methods:{focus:function(){this.showAvailableSetsList=!0,this.$emit("tagListShow")},delayedBlur:function(){var t=this;setTimeout((function(){t.showAvailableSetsList=!1}),100),this.$emit("tagListHide")},addTag:function(t){this.tagInput="",this.$emit("tagAdd",t)},deleteTag:function(t){this.$emit("tagDelete",t)},clickTag:function(t){this.$emit("tagClick",t)}},components:{tagEditBoxTag:Lo}},Mo=wi.request("uiContextMenuNodeSets",["command"]),Ao={mixins:[Mo],name:"contextMenuNodeSets",props:["resizeCallback"],$meta:{name:"contextMenuNodeSets",parent:"nodeContextMenu"},template:'\n\t\t<div>\n\t\t\t<tagEditBox :availableTags="allSets"\n\t\t\t\t\t\t:selectedTags="sets"\n\t\t\t\t\t\t\n\t\t\t\t\t\tv-on:tagListShow="dimensionChanged" \n\t\t\t\t\t\tv-on:tagAdd="addSet" \n\t\t\t\t\t\tv-on:tagDelete="deleteSet" \n\t\t\t/>\n\t\t</div>\n\t',computed:{nodes:function(){return this.$store.getters.selectedNodes},sets:function(){return this.nodes.length>0?this.nodes[0].sets:[]},allSets:function(){return this.$store.getters.sets}},methods:{addSet:function(t){var e=this.nodes[0];this.$api.command.startCommandBatch(),this.$api.command.execute("addSet",t),this.$api.command.execute("setNode",{id:e.id,sets:t,arrOp:"push"}),this.$api.command.stopCommandBatch(),this.dimensionChanged()},deleteSet:function(t){var e=this.nodes[0];this.$api.command.execute("setNode",{id:e.id,sets:t,arrOp:"delete"})},dimensionChanged:function(){var t=this;setTimeout((function(){t.resizeCallback()}),20)}},components:{tagEditBox:To}},Do={name:"contextMenuNodeAnnotate",props:["closeCallback"],$meta:{name:"contextMenuNodeAnnotate",parent:"nodeContextMenu"},template:'\n\t\t<div v-on:click="openAnnotatePane" :id="$const.selectors.nodeAnnotate">\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_text_edit"></div>\n\t\t\t<div class="contextMenuItemRight">Annotate</div>\n\t\t\t\n\t\t</div>\n\t',methods:{openAnnotatePane:function(){var t=this.$store.getters.selectedNodes[0];this.$store.dispatch("modalDialog/open",{dialog:"editAnnotation",parameters:t}),this.closeCallback()}}},_o=wi.request("uiContextMenuLinkSwitchSign",["command"]),Wo={mixins:[_o],name:"contextMenuLinkSwitchSign",$meta:{name:"contextMenuLinkSwitchSign",parent:"linkContextMenu"},template:'\n\t\t<div v-on:click="switchSign" :id="$const.selectors.linkSwitchSign">\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_plus_minus"></div>\n\t\t\t<div class="contextMenuItemRight">Switch polarity</div>\n\t\t\t\n\t\t</div>\n\t',methods:{switchSign:function(){var t=this.$store.getters.selectedLinks.map((function(t){return{id:t.id,isInverse:!t.isInverse}}));t.length>0&&this.$api.command.execute("setLink",[t])}}},Ro=wi.request("uiContextMenuLinkDelete",["command"]),Bo={mixins:[Ro],props:["closeCallback"],name:"contextMenuLinkDelete",$meta:{name:"contextMenuLinkDelete",parent:"linkContextMenu"},template:'\n\t\t<div v-on:click="deleteLink" :id="$const.selectors.linkDelete">\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_garbage_or_rubbish"></div>\n\t\t\t<div class="contextMenuItemRight">Delete</div>\n\t\t\t\n\t\t</div>\n\t',methods:{deleteLink:function(){var t=this;this.$api.command.startCommandBatch(),this.$store.getters.selectedLinks.forEach((function(e){t.$api.command.execute("deleteLink",{id:e.id})})),this.$api.command.stopCommandBatch(),this.closeCallback()}}},zo={mixins:[Fo],name:"element-color-picker",template:'\n\t\t<colorField v-model="computedProp"/>\n\t',data:function(){return{defaultValue:"#000000"}},components:{colorField:ro}},jo=wi.request("uiContextMenuLinkColour",["command"]),Xo={mixins:[jo],props:["closeCallback"],name:"contextMenuLinkColour",$meta:{name:"contextMenuLinkColour",parent:"linkContextMenu"},template:'\n\t\t<div>\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_painting_utensils"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\t\t<element-color-picker\n\t\t\t\t\t:id="$const.selectors.linkColourField"\n\t\t\t\t\t:element="selectedLinks[0]" \n\t\t\t\t\t:property="\'style.stroke\'" \n\t\t\t\t\t:type="\'link\'" \n\t\t\t\t\t:multiSelection="selectedLinks"\t\t\t\n\t\t\t\t/>\t\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t',computed:{selectedLinks:function(){return this.$store.getters.selectedLinks}},methods:{},components:{"element-color-picker":zo}},Yo={mixins:[Fo],name:"element-option-picker",props:["optionsMap"],template:'\n\t\t\t<select v-model="computedProp">\n\t\t\t\t<option v-for="(option, val) in optionsMap" :value="val">{{option}}</option>\n\t\t\t</select>\n\n\t'},Vo={props:["closeCallback"],name:"contextMenuLinkStyle",$meta:{name:"contextMenuLinkStyle",parent:"linkContextMenu"},template:'\n\t\t<div>\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_painting_utensils"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\t\t<element-option-picker\n\t\t\t\t\t:id="$const.selectors.linkStyleField"\n\t\t\t\t\t:element="selectedLinks[0]" \n\t\t\t\t\t:property="\'style.stroke-dasharray\'"\n\t\t\t\t\t:type="\'link\'" \n\t\t\t\t\t:multiSelection="selectedLinks"\n\t\t\t\t    :optionsMap="{\'none\': \'line\', \'5, 5\': \'dashed\'}" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t',computed:{selectedLinks:function(){return this.$store.getters.selectedLinks}},components:{"element-option-picker":Yo}},Ho={mixins:[No],name:"contextMenuLinkWeight",props:["closeCallback"],$meta:{name:"contextMenuLinkWeight",parent:"linkContextMenu"},template:'\n\t\t<div>\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_calculator"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\t\n\t\t\t\n\t\t\tWeight: \n\t\t\t<elementNumberField \n\t\t\t\t:id="$const.selectors.linkWeightField"\n\t\t\t\t:element="selectedLinks[0]" \n\t\t\t\t:property="\'weight\'" \n\t\t\t\t:type="\'link\'" \n\t\t\t\t:multiSelection="selectedLinks"\n\t\t\t\tstyle="width: 50px" \n\t\t\t/>\n\t\t\t\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t',computed:{selectedLinks:function(){return this.$store.getters.selectedLinks}},components:{elementNumberField:No}},qo=wi.request("uiContextMenuLinkShape",["links"]),Jo={mixins:[qo],props:["closeCallback"],name:"contextMenuLinkShape",$meta:{name:"contextMenuLinkShape",parent:"linkContextMenu"},template:'\n\t\t<div>\n\t\t\t\n\t\t\t<div class="contextMenuItemLeft icon_straight_line_curved_line"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\t\t<element-option-picker \n\t\t\t\t\t:id="$const.selectors.linkShapeField"\n\t\t\t\t\t:element="selectedLinks[0]" \n\t\t\t\t\t:property="\'renderer\'"\n\t\t\t\t\t:type="\'link\'" \n\t\t\t\t\t:multiSelection="selectedLinks"\n\t\t\t\t\t:optionsMap="renderers" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t',computed:{selectedLinks:function(){return this.$store.getters.selectedLinks}},data:function(){return{renderers:this.$api.links.getRenderers()}},components:{"element-option-picker":Yo}},Go={mixins:[po],props:["closeCallback"],name:"contextMenuLinkGotoNode",$meta:{name:"contextMenuLinkGotoNode",parent:"linkContextMenu"},template:'\n\t\t<div>\n\t\t\t<div class="contextMenuItemLeft icon_magnification_glass_on_paper"></div>\n\t\t\t<div class="contextMenuItemRight">\n\t\t\t\t<button :id="$const.selectors.linkGotoPrevious" style="padding:0" v-if="selected && selected.length > 1" v-on:click="set(-1)"><</button>\n\t\t\t\t<button :id="$const.selectors.linkGotoNext" style="padding:0" v-if="selected && selected.length > 1" v-on:click="set(-1)">></button>\n\t\t\t\t\n\t\t\t\t<span>Goto </span><a href="#" v-on:click.prevent="goTo(from)" :id="$const.selectors.linkGotoFrom">{{from.id}}</a> <span v-html="\'&rarr;\'"/> <a :id="$const.selectors.linkGotoTo" href="#" v-on:click.prevent="goTo(to)">{{to.id}}</a>\t\t\t\t\t\t\t\n\t\t\t</div>\t\t\n\t\t\n\t\t\t\n\t\t</div>\n\t',data:function(){return{gotoIndex:0}},computed:{selected:function(){return this.$store.getters.selectedLinks},from:function(){var t=this.selected[this.gotoIndex];return"undefined"!==typeof t?t.fNode:{id:0}},to:function(){var t=this.selected[this.gotoIndex];return"undefined"!==typeof t?t.tNode:{id:0}}},methods:{goTo:function(t){this.closeCallback(),this.gotoNode(t)},set:function(t){var e=this.gotoIndex+t;e<0?this.gotoIndex=this.selected.length-1:"undefined"===typeof this.selected[e]?this.gotoIndex=0:this.gotoIndex=e}}};function Uo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ko(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Uo(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qo,Zo,tr,er={contextMenuNodeStyle:wo,contextMenuNodeEdit:bo,contextMenuNodeAnnotate:Do,contextMenuNodeWeight:Oo,contextMenuNodeDelete:Eo,contextMenuNodeView:Po,contextMenuNodeSets:Ao,contextMenuLinkShape:Jo,contextMenuLinkStyle:Vo,contextMenuLinkColour:Xo,contextMenuLinkSwitchSign:Wo,contextMenuLinkDelete:Bo,contextMenuLinkWeight:Ho,contextMenuLinkGotoNode:Go},nr=vn.contextMenu.component,ir={name:"contextMenuContainer",template:'\n\t\t<section>\n\t\t\t<context-menu menu="nodeMenu" v-slot:default="menuProps" class="contextmenu">\t\n\t\t\t\t<contextMenuNodeStyle :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuNodeEdit :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuNodeAnnotate :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuNodeView :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuNodeDelete :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<hr>\n\t\t\t\t<contextMenuNodeWeight :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<hr>\t\t\t\t\n\t\t\t\t<contextMenuNodeSets :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t\n\t\t\t</context-menu>\t\t\n\t\t\t\n\t\t\t<context-menu menu="linkMenu" v-slot:default="menuProps" class="contextmenu">\t\t\t\t\t\n\t\t\t\t<contextMenuLinkGotoNode :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<hr>\n\t\t\t\t<contextMenuLinkShape :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuLinkColour :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuLinkStyle :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\t\t\t\t\n\t\t\t\t<hr>\n\t\t\t\t<contextMenuLinkWeight :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<hr>\n\t\t\t\t<contextMenuLinkSwitchSign :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\n\t\t\t\t<contextMenuLinkDelete :resizeCallback="menuProps.onResize" :closeCallback="menuProps.close" />\t\t\t\t\n\t\t\t</context-menu>\n\t\t</section>\n\t',components:Ko({"context-menu":nr},er)},or={name:"mainmenuItem",props:["item"],template:'\n\t\t<li :class="(item.type && item.type === \'separator\') ? \'separator\' : \'\'">\n\t\t\t\n\t\t\t<a v-if="typeof item.submenu === \'undefined\'" :id="\'mainmenu_\'+item.role" v-on:click.prevent="click($event, item.role)">{{item.label}}</a>\n\t\t\t<span v-else-if="typeof item.type === \'undefined\'">{{item.label}}</span>\n\t\t\t\n\t\t\t<ul v-if="item.submenu && item.submenu.length > 0">\n\t\t\t\t<mainmenuItem v-for="(subitem, index) in item.submenu" :item="subitem" :key="index"/>\n\t\t\t</ul>\n\t\t\t\n\t\t</li>\n\t',methods:{click:function(t,e){var n=new CustomEvent("mainmenu",{event:t,detail:{menu:e}});document.dispatchEvent(n)}}},rr=wi.request("uiMainmenu",["constants"]),sr={mixins:[rr],name:"mainmenu",template:'\n\t\t\t\t<div id="menu-bar" v-bind:style="{visibility: visibility}">\n\t\t\t\t\t<ul class="main-menu">\n\t\t\t\t\t\t<mainmenuItem v-for="(item, index) in menu" :item="item" :key="index" />\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t',computed:{visible:function(){return this.$store.state.uiState.mainmenuVisible},visibility:function(){return!0===this.browser&&this.visible?"visible":"hidden"}},data:function(){return{browser:"pendingInit",menu:[]}},created:function(){this.menu=this.$api.constants.get("mainmenu"),this.browser="browser"===this.$api.constants.get("environment"),null==this.menu&&console.error("undetected JSON parse error of mainmenu.json")},mounted:function(){(new MainMenu).init()},components:{mainmenuItem:or}},ar=vn.modalElement,dr=VueColor.Chrome,lr={mixins:[uo],name:"colorPicker",template:'\n\t\t<div v-if="showColorPicker" :style="{top: y+\'px\', left: x+\'px\', position: \'absolute\', \'z-index\': 50000}">\n\t\t\t<chrome-picker :value="color" ref="modalColorPicker" v-on:input="done" />\n\t\t</div>\t\n\t',computed:{showColorPicker:function(){return this.$store.state.singletons.colorPicker.opened},color:function(){return this.$store.state.singletons.colorPicker.color}},data:function(){return{x:0,y:0,doInit:!0}},components:{"chrome-picker":dr},methods:{done:function(t){var e=this;clearTimeout(Qo),Qo=setTimeout((function(){e.$store.dispatch("singletons/set",{id:"colorPicker",property:"color",value:t.hex})}),100)},close:function(){this.$store.dispatch("singletons/close","colorPicker"),this.doInit=!0}},updated:function(){var t=this;if(this.doInit&&this.showColorPicker){ar.push(this.$refs.modalColorPicker.$el,(function(){t.close()}));var e=this.$store.getters["uiState/mousePos"];e=this.preventOutOfBounds(e.x,e.y,this.$refs.modalColorPicker.$el),this.x=e.x,this.y=e.y,this.doInit=!1}}},cr={name:"singletonContainer",template:"\n\t\t<div>\n\t\t<colorPicker />\n\t\t<modal-dialog-container />\n\t\t</div>\n\t",components:{colorPicker:lr,"modal-dialog-container":vn.modalDialogs.component}},ur={manipulateMap:"windowManipulateMap",mapHistory:"windowMapHistory",domainAnalysis:"windowDomainAnalysis",settings:"windowConfigurationEditor",setEditor:"windowSetEditor",nodeBrowser:"windowNodeBrowser",generalSummary:"windowGeneralSummary",batchAdd:"windowBatchAdd",batchEditLinks:"windowBatchEditLinks",batchEditNodes:"windowBatchEditNodes",mergeNodes:"windowMergeNodes",setAnalysis:"windowSetAnalysis",loopAnalysis:"windowLoopAnalysis",signalWordAnalysis:"windowSignalWordAnalysis",wordCountAnalysis:"windowWordCountAnalysis",centralAnalysis:"windowCentralAnalysis",clusterAnalysis:"windowClusterAnalysis",similarityAnalysisOverlap:"windowSimilarityAnalysisOverlap",similarityAnalysisKeyWords:"windowSimilarityAnalysisKeyWords",similarityAnalysisJaccard:"windowSimilarityAnalysisJaccard",saveImage:"windowSaveToImage",decisionTreeAnalysis:"windowDecisionTreeAnalysis"},pr={methods:{dialogConfirm:function(){var t="This will reset the map. Continue?";return this.$store.dispatch("modalDialog/open",{dialog:"confirm",parameters:t}).catch((function(t){console.error(t),alert("Confirm dialog is broken.")}))},dialogAlert:function(t){this.$store.dispatch("modalDialog/open",{dialog:"alert",parameters:t}).catch((function(t){console.error(t),alert("Alert dialog is broken.")}))},actionStart:function(){return this.$store.dispatch("uiState/switchState","loading")},actionEnd:function(){return this.$store.dispatch("uiState/switchState","edit")}},mounted:function(){var t=this;this.$store.getters["windows/windows"];document.addEventListener("mainmenu",function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.detail.menu,"newMap"!=n.detail.menu){e.next=5;break}t.dialogConfirm().then((function(e){e&&(t.actionStart(),t.$api.action.dispatch("destroyUi").then(t.actionEnd).catch((function(e){console.error(e),t.dialogAlert("Failed to reset the application."),t.actionEnd()})))})),e.next=50;break;case 5:if("load"!=n.detail.menu){e.next=10;break}t.actionStart(),t.$api.action.dispatch("loadData").then(t.actionEnd).catch((function(e){console.error(e),t.dialogAlert("The loading action failed."),t.actionEnd()})),e.next=50;break;case 10:if("save"!=n.detail.menu){e.next=15;break}t.actionStart(),t.$api.action.dispatch("saveData").then(t.actionEnd).catch((function(e){console.error(e),t.dialogAlert("The saving action failed."),t.actionEnd()})),e.next=50;break;case 15:if("savejs"!=n.detail.menu){e.next=20;break}t.actionStart(),t.$api.action.dispatch("saveData",{type:"savjs"}).then(t.actionEnd).catch((function(e){console.error(e),t.dialogAlert("The saving action failed."),t.actionEnd()})),e.next=50;break;case 20:if("quickSave"!=n.detail.menu){e.next=24;break}t.$api.action.dispatch("saveData",{type:"localStorage",key:"quickSave"}).catch((function(e){console.error(e),t.dialogAlert("The saving action failed.")})),e.next=50;break;case 24:if("quickLoad"!=n.detail.menu){e.next=28;break}t.dialogConfirm().then((function(e){e&&(t.actionStart(),t.$api.action.dispatch("loadData",{type:"localStorage",key:"quickSave"}).then(t.actionEnd).catch((function(e){console.error(e),t.dialogAlert("The loading action failed."),t.actionEnd()})))})),e.next=50;break;case 28:if("tutorial"!=n.detail.menu){e.next=49;break}return e.next=31,t.dialogConfirm();case 31:if(o=e.sent,o){e.next=34;break}return e.abrupt("return");case 34:return t.actionStart(),e.next=37,t.$nextTick();case 37:return e.prev=37,e.next=40,t.$api.action.dispatch("loadTutorial");case 40:e.next=46;break;case 42:e.prev=42,e.t0=e["catch"](37),console.error(e.t0),t.dialogAlert("The loading action failed.");case 46:t.actionEnd(),e.next=50;break;case 49:"paneStyles"==i?t.$store.dispatch("panes/open","paneStyles"):"paneMinimap"==i?t.$store.dispatch("panes/open","paneMinimap"):"paneAnnotations"==i?t.$store.dispatch("panes/open","paneAnnotations"):"helpDocs"==i?(r="menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,left=0,top=0",window.open("docs/help_static.html","Cognitive Mapping Help Docs",r)):i in ur&&t.$store.dispatch("windows/open",ur[i]);case 50:case"end":return e.stop()}}),e,null,[[37,42]])})));return function(t){return e.apply(this,arguments)}}())}},hr={},fr=vn.modalElement,mr=wi.request("uiSite",["action"]),vr={name:"site",mixins:[mr,pr],components:{loadingModal:bi,mapLayer:io,toolbar:ki,footerbar:Ni,"inapp-window-container":vn.windows.inAppWindowContainer,paneContainer:yo,contextMenu:ir,mainmenu:sr,singletonContainer:cr},template:'\n\t\t<div v-on:mousemove="mouseCoords($event.pageX, $event.pageY)"> \n\t\t\t<loadingModal /> \n\t\t\t<header>\n\t\t\t\t<mainmenu />\n\t\t\t\t<toolbar />\n\t\t\t</header>\n\t\t\t\n\n\t\t\t\n\t\t\t<mapLayer /> \n\t\t\t\n\t\t\t<inapp-window-container \n\t\t\t\tdefaultHeader="default-header"\n\t\t\t/>\n\t\t\t\n\t\t\t<div style="position: fixed; top: 50px; left: 50px; color: #b8b8b8; width: 310px; pointer-events: none">\n\t\t\t\t<span>Public test version of the Causal Mapping Application v2. Please report ideas, improvements and/or errors:</span>\n\t\t\t\t<a href="https://github.com/Joe-Kerr/CausalMappingApplication/issues" style="pointer-events: all; color: #7777ee" target="_blank" rel="noopener">here</a>\n\t\t\t</div>\n\t\t\t\n\t\t\t<paneContainer /> \n\t\t\t<contextMenu /> \n\t\t\t<singletonContainer />\n\t\t\t<footerbar /> \n\t\t</div>\t\n\t',computed:{viewportW:function(){return this.$store.state.uiState.viewportW},viewportH:function(){return this.$store.state.uiState.viewportH}},data:function(){return{draggableForWindow:hr,modalForContextMenu:fr}},methods:{mouseCoords:function(t,e){this.$store.dispatch("uiState/set",{mousePosX:t,mousePosY:e})},viewportWH:function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.$store.dispatch("uiState/set",{viewportW:t,viewportH:e})},viewportXY:function(){var t=window.pageXOffset,e=window.pageYOffset;this.$store.dispatch("uiState/set",{viewportX:t,viewportY:e})}},mounted:function(){var t=this;setTimeout((function(){t.$store.dispatch("uiState/switchState","edit")}),500),this.viewportWH(),this.viewportXY(),window.addEventListener("resize",(function(){clearTimeout(Zo),Zo=setTimeout((function(){t.viewportWH()}),100)})),window.addEventListener("scroll",(function(){clearTimeout(tr),tr=setTimeout((function(){t.viewportXY()}),50)}))}},gr={name:"draggable-handle",props:["window","funcs"],template:'<div v-on:mousedown="minIfMaxed($event)" v-drag&drop:draggable.only="{dragstop, selector: \'inapp-window_\'+window.id}"><slot></slot></div>',methods:{minIfMaxed:function(t){this.window.maximized&&(this.funcs.toggleMax(),this.funcs.move(t.pageX-parseInt(this.window.w/2),t.pageY-parseInt(this.window.h/2)))},dragstop:function(t,e){this.funcs.move(e.draggableNewX,e.draggableNewY)}}},yr={name:"default-header",props:["window","funcs"],template:'\n\t\t<div class="inapp-window_header--default">\n\t\t\t<draggable-handle :window="window" :funcs="funcs" class="inapp-window_handle inapp-window_handle--left">\n\t\t\t\t{{window.title}}\n\t\t\t</draggable-handle>\n\n\t\t\t<div class="inapp-window_button-bar">\n\t\t\t\t\n\t\t\t\t<div class="inapp-window_button inapp-window_button--help inapp-window_button--right" v-on:click="showHelp">\t\t\t\t\n\t\t\t\t\t<span class="inapp-window_button--icon icon_help"></span>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="inapp-window_button inapp-window_button--min inapp-window_button--right" v-on:click="funcs.toggleMin()">\n\t\t\t\t\t<span class="inapp-window_button--icon icon_minimise"></span>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\n\t\t\t\t\x3c!--\n\t\t\t\t<div class="inapp-window_button inapp-window_button--max inapp-window_button--right" v-on:click="funcs.toggleMax()">\n\t\t\t\t\t<span class="inapp-window_button--icon icon_improvised_max">[]</span>\n\t\t\t\t</div>\n\t\t\t\t--\x3e\n\t\t\t\t\n\t\t\t\t<div class="inapp-window_button inapp-window_button--close inapp-window_button--right" v-on:click="funcs.close()">\n\t\t\t\t\t<span class="inapp-window_button--icon icon_close"></span> \n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t</div>\t\t\n\t',methods:{showHelp:function(t,e){var n="menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,left=0,top=0";window.open("docs/help_static.html","Causal Mapping Help Docs",n)}},components:{"draggable-handle":gr}},wr=yr,br={mixins:[Fo],name:"element-size-picker",template:'\n\t\t<input type="number" min="0" v-model.number="computedProp" />\n\t',data:function(){return{defaultValue:0}},methods:{encodeFilter:function(t){var e=t;return e<0&&(e=0),e+"px"},decodeFilter:function(t){return parseInt(t.replace("px",""))}}},xr=wi.request("uiWindowNodeStyleEditor",["command"]),kr={mixins:[xr],name:"windowNodeStyleEditor",props:["window"],$state:{id:"windowNodeStyleEditor",title:"Node style editor",width:300},template:'\n\t\t<div class="styleEditorStylesBlock">\n\t\t<button id="bsm_copy" v-on:click="copy">copy</button> <button id="bsm_paste" v-on:click="paste">paste</button><br>\n\t\t\n\t\t<fieldset><legend>Shape</legend>\n\t\t<div>\n\t\t\tBorder width: \n\t\t\t<element-size-picker\n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'style.border-width\'" \n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\n\t\t\t\tstyle="width: 40px;"\n\t\t\t/>\n\t\t</div>\n\t\t\t\n\t\t<div>\t\n\t\t\tBorder style: \n\t\t\t<element-option-picker \n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'style.border-style\'"\n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\n\t\t\t    :optionsMap="{solid:\'solid\', dashed:\'dashed\', dotted:\'dotted\'}" \n\t\t\t/>\n\t\t</div>\n\t\t\t\n\t\t<div>\t\n\t\t\tBorder color: \n\t\t\t<element-color-picker\n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'style.border-color\'" \n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\t\t\t\n\t\t\t/>\n\t\t</div>\n\t\t\n\t\t<div>\n\t\t\tBackground color: \n\t\t\t<element-color-picker\n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'style.background-color\'" \n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\t\t\t\n\t\t\t/>\t\t\n\t\t</div>\t\n\n\t\t</fieldset>\n\n\t\t<fieldset><legend>Text</legend>\n\t\t<div>\n\t\t\tText size: \n\t\t\t<element-size-picker \n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'style.font-size\'" \n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\n\t\t\t\tstyle="width: 40px;"\n\t\t\t/>\n\t\t</div>\n\t\t\t\n\t\t<div>\t\n\t\t\tText color: \n\t\t\t<element-color-picker\n\t\t\t\t:element="selectedNodes[0]" \n\t\t\t\t:property="\'style.color\'" \n\t\t\t\t:type="\'node\'" \n\t\t\t\t:multiSelection="selectedNodes"\t\t\t\n\t\t\t/>\n\t\t</div>\n\t\t\t\n\n\t\t</fieldset>\n\t\t</div>\n\t',computed:{selectedNodes:function(){return this.$store.getters.selectedNodes}},methods:{copy:function(){if(0!==this.selectedNodes.length){var t=JSON.parse(JSON.stringify(this.selectedNodes[0].style));this.$store.dispatch("uiState/copy",t)}},paste:function(){if(0!==this.selectedNodes.length){var t=JSON.parse(JSON.stringify(this.$store.getters["uiState/paste"])),e=this.selectedNodes.map((function(e){return{id:e.id,style:t}}));this.$api.command.execute("setNode",[e])}}},components:{"element-size-picker":br,"element-option-picker":Yo,"element-color-picker":zo}},Sr=wi.request("uiWindowManipulateMap",["command"]),Cr={mixins:[Sr],name:"windowManipulateMap",props:["window"],template:'\n\t\t<div>\n\t\t\t<fieldset>\n\t\t\t<legend>Move</legend>\n\t\t\t\t<table id="mmwMoveMapWrapper">\n\t\t\t\t<tr> \n\t\t\t\t<td></td> <td> <span v-on:click="move(\'up\')" id="mmwUp" class="icon_arrow_up mmwMoveMap" style="display: inline-block;"></span> </td> <td></td> \n\t\t\t\t</tr>\n\t\t\t\t<tr> \n\t\t\t\t<td> <span v-on:click="move(\'left\')" id="mmwLeft" class="icon_arrow_left mmwMoveMap" style="display: inline-block;"></span> </td> \n\t\t\t\t\t<td> <input v-model.number="moveAmount" id="mmwMoveAmount" type="text" v-bind:style="amountInputWidth" /> </td> \n\t\t\t\t<td> <span v-on:click="move(\'right\')" id="mmwRight" class="icon_arrow_right mmwMoveMap" style="display: inline-block;"></span> </td> \n\t\t\t\t</tr>\n\t\t\t\t<tr> \n\t\t\t\t<td></td> <td><span v-on:click="move(\'down\')" id="mmwDown" class="icon_arrow_down mmwMoveMap" style="display: inline-block;"></span> </td> <td></td> \n\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\tLimit to view \n\t\t\t\t<select id="mmwView" v-on:change="limitToView=parseInt($event.target.value)">\n\t\t\t\t\t<option value="none">all</option>\n\t\t\t\t\t<option v-for="view in views" :id="view.id" :value="view.id">{{view.label}}</option> \n\t\t\t\t</select>\n\t\t\t</fieldset>\n\t\t\t\n\t\t\t\n\t\t\t<fieldset>\n\t\t\t\t<legend>Resize</legend>\n\t\t\t\t<table>\n\t\t\t\t<tr> \n\t\t\t\t<td>Width</td> <td>Height</td> \n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t<td> <input v-bind:value="widthPercent" v-on:keyup="onDimensionChange(\'wp\', $event.target.value)" id="mmwMapWidthPercent" class="mmwResize" type="text" size="3">%</td>\n\t\t\t\t<td> <input v-bind:value="heightPercent" v-on:keyup="onDimensionChange(\'hp\', $event.target.value)" id="mmwMapHeightPercent" class="mmwResize" type="text" size="3">%</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t<td> <input v-bind:value="widthAbs" v-on:keyup="onDimensionChange(\'wa\', $event.target.value)" id="mmwMapWidthAbsolute" class="mmwResize" type="text" size="3">px </td>\n\t\t\t\t<td> <input v-bind:value="heightAbs" v-on:keyup="onDimensionChange(\'ha\', $event.target.value)" id="mmwMapHeightAbsolute" class="mmwResize" type="text" size="3">px</td>\n\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t\n\t\t\t\t<button id="mmwResizeWorksapce" v-on:click="saveDimensions">resize workspace</button>\n\t\t\t\t<hr>\n\t\t\t\t<button id="mmwCropWorkspace" v-on:click="crop">crop workspace</button>\'\t\n\t\t\t\t<br>\n\t\t\t</fieldset>\n\n\t\t</div>\n\t',$state:{id:"windowManipulateMap",title:"Manipulate map",width:200,mainmenu:"manipulateMap"},data:function(){return{moveAmount:50,limitToView:"none",initialWidth:0,initialHeight:0,widthAbs:0,heightAbs:0,widthPercent:100,heightPercent:100}},computed:{views:function(){return this.$store.getters.views},amountInputWidth:function(){var t=(this.moveAmount+"").length,e=10*t;return{width:e+"px"}}},methods:{move:function(t){var e={up:0,right:1,down:2,left:3},n=this.moveAmount;isNaN(n)||this.$api.command.execute("shiftMap",{direction:e[t],amount:n,limitToView:this.limitToView})},crop:function(){for(var t,e,n=this.$store.state.nodes.elements,i=0,o=0,r=0,s=n.length;r<s;r++)t=n[r].x+n[r].w,e=n[r].y+n[r].h,t>i&&(i=t),e>o&&(o=e);0!==i&&0!==o&&(i+=10,o+=10,this.onDimensionChange("wa",i),this.onDimensionChange("ha",o),this.$api.command.execute("setMap",{width:i,height:o}))},onDimensionChange:function(t,e){var n=parseInt(e);if(!isNaN(n))switch(t){case"wa":this.widthPercent=parseInt(n/this.initialWidth*100),this.widthAbs=n;break;case"ha":this.heightPercent=parseInt(n/this.initialHeight*100),this.heightAbs=n;break;case"wp":this.widthAbs=parseInt(this.initialWidth*n/100),this.widthPercent=n;break;case"hp":this.heightAbs=parseInt(this.initialHeight*n/100),this.heightPercent=n;break;default:break}},saveDimensions:function(){this.$api.command.execute("setMap",{width:this.widthAbs,height:this.heightAbs})}},mounted:function(){this.initialWidth=this.$store.getters.map.width,this.initialHeight=this.$store.getters.map.height,this.widthAbs=this.initialWidth,this.heightAbs=this.initialHeight,this.width=this.initialWidth,this.height=this.initialHeight}},Fr=wi.request("uiWindowMapHistoryPlayback",["constants"]),Nr={mixins:[Fr],name:"windowMapHistoryPlayback",props:["elements","nodes","links"],template:'\n\t\t\t<fieldset class="mhFieldset">\n\t\t\t\t<legend>On map</legend>\n\t\t\t\t\n\t\t\t\t<div id="mhBackward" v-on:click="playbackCmd(\'backward\')" \tclass="mhControl mhMapPlayback icon_media_backward"></div>\n\t\t\t\t<div id="mhPlay" \tv-on:click="playbackCmd(\'play\')"\t\tclass="mhControl mhMapPlayback icon_media_play"></div>\n\t\t\t\t<div id="mhPause" \tv-on:click="playbackCmd(\'pause\')" \t\tclass="mhControl mhMapPlayback icon_media_pause" disabled="disabled"></div>\n\t\t\t\t<div id="mhStop" \tv-on:click="playbackCmd(\'stop\')" \t\tclass="mhControl mhMapPlayback icon_media_stop" disabled="disabled"></div>\t\t\n\t\t\t\t<div id="mhForward" v-on:click="playbackCmd(\'forward\')" \tclass="mhControl mhMapPlayback icon_media_forward"></div> <br>\n\t\t\t\t\n\t\t\t\t\x3c!-- order matters: jumpToIndex before value binding!--\x3e\n\t\t\t\t<input type="range" id="mhTimeline" class="mhMapPlayback" min="0" :max="maxTime" step="1" v-on:change="jumpToIndex($event.target.value)" :value="currentTime" /> \n\t\t\t\t<span id="mhCurrentTimeIndex">{{currentTime}}</span>/\n\t\t\t\t<span id="mhMaxTimeIndex">{{maxTime}}</span> <span>({{playbackState}})</span><br><br>\n\t\t\t\t\n\t\t\t\t<strong>Options</strong><br>\n\t\t\t\t<input type="checkbox" id="mhFollow" v-model="followMode" /> Follow mode <br>\t\n\t\t\t\tDelta time: \n\t\t\t\t<input type="text" id="mhSpeed" v-model="speed" size="4" />ms <br>\n\t\t\n\t\t\t</fieldset>\n\t',computed:{maxTime:function(){var t=this.elements.length-1;return-1!==t?t:0}},data:function(){return{playbackState:"stopped",currentTime:0,currentPlaybackTimeout:-1,currentPlaybackElementHighlightTimeout:-1,elementHighlighted:-1,followMode:!1,speed:1e3}},methods:{playbackCmd:function(t){var e=t+"_"+this.playbackState;switch(t){case"play":this.playbackState="playing";break;case"pause":this.playbackState="paused";break;case"stop":this.playbackState="stopped";break;case"jump":this.playbackState="paused";break;default:alert("Todo :(");break}"undefined"!==typeof this[e]&&this[e]()},play_stopped:function(){this.$store.dispatch("visibilityController/requestExclusiveControl",this.$vnode.tag);var t=this.nodes.map((function(t){return{id:t.id,visibleOverride:!1}})),e=this.links.map((function(t){return{id:t.id,visibleOverride:!1}}));this.$store.dispatch("visibilityController/setNodes",{requestId:this.$vnode.tag,request:t}),this.$store.dispatch("visibilityController/setLinks",{requestId:this.$vnode.tag,request:e}),this.currentTime=0,this.mediatePlayLoop()},play_paused:function(){this.mediatePlayLoop()},stop_playing:function(){clearTimeout(this.currentPlaybackTimeout);var t=this.nodes.map((function(t){return{id:t.id,visibleOverride:3}})),e=this.links.map((function(t){return{id:t.id,visibleOverride:3}}));this.$store.dispatch("visibilityController/setNodes",{requestId:this.$vnode.tag,request:t}),this.$store.dispatch("visibilityController/setLinks",{requestId:this.$vnode.tag,request:e}),this.unHighlightPrevious(this.elementHighlighted),this.currentTime=0,this.$store.dispatch("visibilityController/releaseExclusiveControl",this.$vnode.tag)},stop_paused:function(){this.stop_playing()},stop_stopped:function(){this.stop_playing()},pause_playing:function(){clearTimeout(this.currentPlaybackTimeout)},pause_paused:function(){this.playbackState="playing",this.mediatePlayLoop()},jump_playing:function(){this.pause_playing()},batchActionElements:function(t,e,n){for(var i=[],o=[],r=t,s=e;r<=s;r++)"node"===this.elements[r].type?i.push({id:this.elements[r].id,visibleOverride:n}):o.push({id:this.elements[r].id,visibleOverride:n});this.$store.dispatch("visibilityController/setNodes",{requestId:this.$vnode.tag,request:i}),this.$store.dispatch("visibilityController/setLinks",{requestId:this.$vnode.tag,request:o})},jumpToIndex:function(t){var e=parseInt(t);if(this.playbackCmd("jump"),e>this.currentTime){var n=this.currentTime+1,i=e-1;this.batchActionElements(n,i,!0)}else if(e<this.currentTime){var o=e,r=this.currentTime;this.batchActionElements(o,r,!1)}this.currentTime=e,this.playbackCmd("play")},mediatePlayLoop:function(){var t=this;0!==this.elements.length&&(this.oneStepForward(),this.currentPlaybackTimeout=setTimeout((function(){"undefined"!==typeof t.elements[t.currentTime+1]?(t.currentTime++,t.mediatePlayLoop()):(t.unHighlightPrevious(t.elementHighlighted),t.playbackState="stopped")}),this.speed))},highlightCurrent:function(t){var e=this.elements[t],n="node"===e.type?"setNodeOverlay":"setLinkOverlay",i={};return i["node"===e.type?"background-color":"stroke"]="#ff0000",this.$store.dispatch(n,{id:e.id,style:i}),e},unHighlightPrevious:function(t){var e="undefined"!==typeof this.elements[t]?this.elements[t]:null;if(this.elementHighlighted=-1,null!==e){var n="node"===e.type?"removeNodeOverlay":"removeLinkOverlay",i="node"===e.type?["background-color"]:["stroke"];this.$store.dispatch(n,{id:e.id,remove:i})}},oneStepForward:function(){var t,e,n=this.elements[this.currentTime];this.unHighlightPrevious(this.elementHighlighted),this.highlightCurrent(this.currentTime),this.elementHighlighted=this.currentTime,"node"==n.type?(this.$store.dispatch("visibilityController/setNodes",{requestId:this.$vnode.tag,request:[{id:n.id,visibleOverride:!0}]}),t=this.nodes[n.index].x-parseInt(window.innerWidth/2),e=this.nodes[n.index].y-parseInt(window.innerHeight/2)):(this.$store.dispatch("visibilityController/setLinks",{requestId:this.$vnode.tag,request:[{id:n.id,visibleOverride:!0}]}),t=this.links[n.index].x1-parseInt(window.innerWidth/2),e=this.links[n.index].y1-parseInt(window.innerHeight/2)),this.followMode&&window.scrollTo(t,e)}},destroyed:function(){this.playbackCmd("stop"),this.$store.dispatch("visibilityController/releaseExclusiveControl",this.$vnode.tag)}},Or=wi.request("uiWindowMapHistorySave",["mapToAnimGif","fileServer"]),$r={mixins:[Or],name:"windowMapHistorySave",props:["elements","nodes","links"],template:'\n\t\t<fieldset class="mhFieldset">\n\t\t\t<legend>To file</legend>\t\t\t\n\t\t\t<input type="number" v-model="delta" />ms <br>\n\t\t\t<button id="mhRecord" class="mhControl" v-on:click="save" :disabled="status !== \'ready\'">Save as animated gif</button/> <br>\n\t\t\t<span>Status: </span><span>{{status}}</span>\n\t\t\t<span v-if="error != \'none\'">{{error}}</span>\n\t\t\t\n\t\t</fieldset>\n\t',data:function(){return{status:"ready",error:"none",delta:100}},methods:{save:function(){"ready"===this.status&&(this.error="none",this.status="processing map",this.$api.mapToAnimGif.convert({nodes:this.nodes,links:this.links,map:this.$store.state.map.map},this.elements,{onProgress:this.progressCallback.bind(this),onDone:this.doneCallback.bind(this),playbackRate:this.delta}))},progressCallback:function(t){this.status=t},doneCallback:function(t,e){null===e?(this.$api.fileServer.saveDialog(t,this.$store.state.map.map.mapLabel+".gif","image/gif"),this.status="ready"):this.error="Image generation failed."}}},Er={name:"windowMapHistory",props:["window"],template:'\n\t\t<div>\n\t\t\t<windowMapHistoryPlayback :elements="elements" :nodes="nodes" :links="links" />\n\t\t\t<windowMapHistorySave :elements="elements" :nodes="nodes" :links="links" />\n\t\t</div>\n\t',$state:{id:"windowMapHistory",title:"Map history",width:400,mainmenu:"mapHistory"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},elements:function(){var t,e,n=this.nodes,i=this.links,o=[];if(0===n.length)return[];t=parseInt(n[0].created);for(var r=0;r<n.length;r++)e=parseInt(n[r].created),e<t&&(t=e),o.push({id:n[r].id,type:"node",index:r,date:e});for(var s=0;s<i.length;s++)e=parseInt(i[s].created),e<t&&(t=e),o.push({id:i[s].id,type:"link",index:s,date:e});for(var a=0,d=o.length;a<d;a++)o[a].date=o[a].date-t;return o.sort((function(t,e){return t.date-e.date})),o}},components:{windowMapHistorySave:$r,windowMapHistoryPlayback:Nr}},Ir={props:["runAnalysisCallback","dataChanged"],name:"analysisWindow",template:'\n\t<div>\n\t\t<fieldset>\n\t\t\t<legend><a href="#" v-on:click.prevent="show = !show">Parameters</a></legend> \n\t\t\t\n\t\t\t<slot name="parameters" v-if="show" v-bind:analysisRequest="analysisRequest"></slot>\n\t\t\t\n\t\t\t<button v-if="show" v-on:click="startAnalysis">Update</button>\n\t\t</fieldset>\n\t\t\n\t\t<fieldset>\n\t\t\t<legend>Results <span v-if="showWarning" \n\t\t\t\t\t\t\t\t  title="Some data changed. Please update the analysis." \n\t\t\t\t\t\t\t\t  class="icon_exclamation_mark" \n\t\t\t\t\t\t\t\t  style="display: inline-block; vertical-align: middle;">\n\t\t\t\t\t\t\t</span>\n\t\t\t</legend> \n\t\t\t\n\t\t\t\n\t\t\t<slot v-if="analysisRunning" name="progress">\n\t\t\t\tloading...\n\t\t\t</slot>\n\t\t\t\n\t\t\t<slot name="results"></slot>\n\t\t\t\n\t\t</fieldset>\t\t\n\n\t</div>\n\t',computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},showWarning:function(){return"undefined"===typeof this.dataChanged?this.dirty:this.dirty||this.dataChanged}},watch:{links:function(){this.dirty=!0},nodes:function(){this.dirty=!0}},data:function(){return{show:!0,dirty:!1,analysisRunning:!1,analysisRequest:!1}},methods:{startAnalysis:function(){this.analysisRunning=!0,this.runAnalysisCallback(this.analysisDone)},analysisDone:function(){this.analysisRunning=!1,this.dirty=!1,this.$emit("dataUpdated")}},mounted:function(){}},Pr={name:"jQuerySparkline",props:["id","data","options"],template:'\n\t\t<div :id="id" class="jQuerySparkline" style="border: 1px solid grey; width: 120px;">\n\t\t</div>\n\t',watch:{data:function(){this.update()}},methods:{update:function(){$("#"+this.id).sparkline(this.data,this.options)}},mounted:function(){this.update()},destroyed:function(){$("#"+this.id).sparkline("destroy")}},Lr=wi.request("uiWindowDomainAnalysis",["analysis"]),Tr={mixins:[Lr],name:"windowDomainAnalysis",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters">\n\t\t\t</div>\n\n\t\t\t<div slot="results">\n\t\t\t\t\x3c!-- <div id="afodsHistogram" style="border: 1px solid grey; width: 120px;"></div><br> --\x3e\n\t\t\t\t\n\t\t\t\t<jQuerySparkline v-if="histogramData !== null" :id="\'sparklineDomainScore\'" :data="histogramData" :options="histogramOptions" />\n\t\t\t\t\n\t\t\t\t<div style="width: 328px; height: 250px; overflow-y: scroll">\n\t\t\t\t\t<table id="afodsScoreTable" class="tablesorter"> \n\t\t\t\t\t\t<thead><tr> <th>Statement No.</th> <th>Score</th> </tr></thead>\n\t\t\t\t\t\t<tbody overflow="scroll">\n\t\t\t\t\t\t\t<tr v-for="(value, key) in scoreTable" :key="key">\n\t\t\t\t\t\t\t\t<td><a href="#">{{key}}</a></td>\n\t\t\t\t\t\t\t\t<td>{{value}}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody> \n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowDomainAnalysis",title:"Domain analysis",width:400,mainmenu:"domainAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},scoreTable:function(){var t={},e=this.scores;if(0===e.length)return[];for(var n=this.nodes,i=0,o=n.length;i<o;i++){var r=n[i].id,s="undefined"!==typeof e[r]?e[r]:"update required";t[r]=s}return t}},data:function(){return{scores:[],histogramData:null,histogramOptions:{type:"bar",barWidth:"10px",height:"40px",colorMap:["#00009a","#0020ff","#00abff","#0fffef","#6dff90","#b6ff47","#ffd000","#ff8c00","#ff2000","#b00000"]}}},methods:{domainAnalysis:function(t){for(var e={},n=0,i=t.length;n<i;n++)e[t[n].id]=t[n].in.length+t[n].out.length;return e},runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,i=this.links,t.prev=2,t.next=5,this.$api.analysis.get("getDegreesPerNode",[n,i]);case 5:o=t.sent,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](2),new Error(t.t0);case 11:return t.prev=11,t.next=14,this.$api.analysis.get("getSumOfDegreesPerNode",o.results);case 14:r=t.sent,t.next=20;break;case 17:throw t.prev=17,t.t1=t["catch"](11),new Error(t.t1);case 20:o=null,this.scores=r.results,this.applyOverlay(r.results),e();case 24:case"end":return t.stop()}}),t,this,[[2,8],[11,17]])})));function e(e){return t.apply(this,arguments)}return e}(),applyOverlay:function(t){if(0!==t.length){var e=[];for(var n in t)e.push(t[n]);var i,o=this.$api.analysis.getSync("getPartitions",e),r=this.$api.analysis.getSync("getFrequencyDistribution",[e,o]);for(var s in this.histogramData=r,t){for(var a=0;a<10;a++){var d=9===a&&t[s]>=o[a]||t[s]>=o[a]&&t[s]<o[a+1]?a:-1;switch(d){case 9:i="#b00000";break;case 8:i="#ff2000";break;case 7:i="#ff8c00";break;case 6:i="#ffd000";break;case 5:i="#b6ff47";break;case 4:i="#6dff90";break;case 3:i="#0fffef";break;case 2:i="#00abff";break;case 1:i="#0020ff";break;case 0:i="#00009a";break;default:break}}this.$store.dispatch("setNodeOverlay",{id:s,style:{"background-color":i}})}}}},destroyed:function(){this.$store.dispatch("removeNodeOverlay")},components:{analysisWindow:Ir,jQuerySparkline:Pr}};function Mr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ar(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mr(n,!0).forEach((function(e){Object($t["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mr(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dr=wi.request("uiWindowConfigurationEditor",["command"]);function _r(t){for(var e={},n=function(n,i){var o=t[n];e[o]={get:function(){return this.$store.state.settings[o]},set:function(t){this.$store.dispatch("settings/set",{prop:o,val:t})}}},i=0,o=t.length;i<o;i++)n(i,o);return e}var Wr,Rr={mixins:[Dr],name:"windowConfigurationEditor",$state:{id:"windowConfigurationEditor",title:"Configuration",width:300,mainmenu:"settings"},template:'\n\t\t<div style="max-height: 500px; overflow-y: auto">\n\t\t\t<fieldset>\n\t\t\t\t<legend>Map</legend>\n\t\t\t\n\t\t\t\t<input type="text" id="mapLabel" v-bind:value="mapInfo.mapLabel" v-on:change="setMapInfo(\'mapLabel\', $event.target.value)" /> Label <br>\n\t\t\t\t<textarea id="mapDescription" v-bind:value="mapInfo.mapDescription" v-on:change="setMapInfo(\'mapDescription\', $event.target.value)" /> Description <br>\n\t\t\t\t<textarea id="mapCopyrightInformation" v-bind:value="mapInfo.mapCopyrightInformation" v-on:change="setMapInfo(\'mapCopyrightInformation\', $event.target.value)" /> Copyright info <br>\n\t\t\t\t\n\t\t\t\t\n\t\t\t</fieldset>\n\t\t\t\n\t\t\t<fieldset>\n\t\t\t\t<legend>Nodes</legend>\n\t\t\t\t\n\t\t\t\t<input type="checkbox" id="nodesShowId" v-model="nodesShowId" /> Show id <br>\n\t\t\t\t<input type="checkbox" id="nodesShowWeight" v-model="nodesShowWeight" /> Show weight <br>\n\t\t\t\t\n\t\t\t</fieldset>\t\t\t\n\t\t\t\n\t\t\t<fieldset>\n\t\t\t\t<legend>Links</legend>\n\t\t\t\n\t\t\t\t<input type="checkbox" id="linksShowWeight" v-model="linksShowWeight" /> Show weight <br>\n\t\t\t\t\n\t\t\t</fieldset>\n\t\t</div>\t\t\n\t',computed:Ar({},_r(["nodesShowId","nodesShowWeight","linksShowWeight"]),{mapInfo:function(){return this.$store.getters.map}}),methods:{setMapInfo:function(t,e){var n={};n[t]=e,this.$api.command.execute("setMap",n)}}},Br=wi.request("uiWindowSetEditor",["command"]),zr={mixins:[Br],name:"windowSetEditor",$state:{id:"windowSetEditor",title:"Set editor",width:960,mainmenu:"setEditor"},template:'\n\t\t<div id="setEditorContainer"style="display: flex; flex-direction: row">\n\t\t\t\n\t\t\t<fieldset id="setEditorSetsRow" class="setEditorRow">\n\t\t\t\t<legend>Sets</legend>\n\t\t\t\t\n\t\t\t\t<div class="setEditorScrollContainer">\n\t\t\t\t<tagEditBox :availableTags="allSets" \n\t\t\t\t\t\t\t:selectedTags="allSets" \n\t\t\t\t\t\t\t:options="{height: \'300px\'}"\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tv-on:tagAdd="addSet" \n\t\t\t\t\t\t\tv-on:tagDelete="removeSet"\n\t\t\t\t\t\t\tv-on:tagClick="setClick" />\n\t\t\t\t</div>\n\t\t\t</fieldset>\t\t\n\t\t\t\n\t\t\t<fieldset id="setEditorMemberRow" class="setEditorRow">\n\t\t\t\t<legend>Set members</legend>\n\t\t\t\t<select v-on:change="activeSet = $event.target.value" style="display: block">\n\t\t\t\t\t<option v-for="set in allSets" :selected="(set == activeSet) ? true : false" :value="set">{{set}}</option>\n\t\t\t\t</select>\n\t\t\t\t<div class="setEditorScrollContainer">\n\t\t\t\t\t<div v-for="node in setMembers" v-on:click="removeSetFromNode(node.id, activeSet)" class="msmSetListing">\n\t\t\t\t\t\t{{node.id}}. {{node.content}}\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t</div>\t\t\t\t\n\t\t\t</fieldset>\t\t\n\t\t\t\n\t\t\t<fieldset id="setEditorUnassignedRow" class="setEditorRow">\n\t\t\t\t<legend>Available statements</legend>\n\t\t\t\t<div class="setEditorScrollContainer">\n\t\t\t\t\t<div v-for="node in nonSetMembers" v-on:click="addSetToNode(node.id, activeSet)" class="msmUnAssignedNodes">\n\t\t\t\t\t\t{{node.id}}. {{node.content}}\n\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t</fieldset>\n\t\t\t\n\t\t\t\n\t\t</div>\n\t',computed:{nodes:function(){return this.$store.getters.nodes},allSets:function(){return this.$store.getters.sets},setMembers:function(){var t=this;return null==this.activeSet?[]:this.nodes.filter((function(e){return-1!==e.sets.indexOf(t.activeSet)}))},nonSetMembers:function(){var t=this;return 0===this.allSets.length?[]:null==this.activeSet?this.nodes:this.nodes.filter((function(e){return-1===e.sets.indexOf(t.activeSet)}))}},watch:{allSets:function(){null==this.activeSet&&(this.activeSet=this.allSets[0]||null)}},data:function(){return{activeSet:null}},methods:{setClick:function(t){var e=this;1===t.event.which&&this.$store.dispatch("modalDialog/open",{dialog:"prompt",parameters:{text:t.tag,placeholder:"New name..."}}).then((function(n){null!=n&&""!==n&&e.renameSet(t.tag,n)}))},addSetToNode:function(t,e){this.$api.command.execute("setNode",{id:t,sets:e,arrOp:"push"})},removeSetFromNode:function(t,e){this.$api.command.execute("setNode",{id:t,sets:e,arrOp:"delete"})},addSet:function(t){this.$api.command.execute("addSet",t)},removeSet:function(t){this.$api.command.execute("deleteSet",t)},renameSet:function(t,e){this.$api.command.execute("renameSet",[t,e])}},created:function(){this.activeSet=this.allSets[0]||null},components:{tagEditBox:To}},jr=wi.request("uiWindowBatchAdd",["command"]),Xr={mixins:[jr],name:"windowBatchAdd",props:["window"],template:'\n\t\t<div style="max-height: 500px; overflow-y: auto">\n\t\t\t<button v-on:click="save">save</button> <button v-on:click="textFields.push({c: \'\'})">more</button><br>\n\t\t\t\n\t\t\t<textarea v-for="text in textFields" v-model="text.c" style="display: block"></textarea>\n\t\t\t\n\t\t</div>\n\t',$state:{id:"windowBatchAdd",title:"Batch add",width:250,mainmenu:"batchAdd"},data:function(){return{textFields:[{c:""}]}},methods:{save:function(){this.$api.command.startCommandBatch();for(var t=0,e=this.textFields.length;t<e;t++)console.log(this.textFields[t].c),this.$api.command.execute("addNode",{content:this.textFields[t].c,x:120+6*t,y:120+15*t});this.$api.command.stopCommandBatch(),this.textFields=[{c:""}]}}},Yr=wi.request("uiWindowBatchEditLinks",["command"]),Vr={mixins:[Yr],name:"windowBatchEditLinks",props:["window"],template:'\n\t\t<div style="height: 500px; overflow-y: auto">\n\t\t<table id="batchEdTable" class="tablesorter">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>#</th>\n\t\t\t\t\t<th>From</th>\n\t\t\t\t\t<th>To</th>\n\t\t\t\t\t<th>Weight</th>\n\t\t\t\t\t<th>Polarity</th>\n\t\t\t\t\t<th>Actions</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t\n\t\t\t<tbody>\n\t\t\t\t<tr v-for="link in links">\n\t\t\t\t\t<td class="batchEdCell">{{link.id}}</td>\n\t\t\t\t\t<td class="batchEdCell">{{link.from}}</td>\n\t\t\t\t\t<td class="batchEdCell">{{link.to}}</td>\n\t\t\t\t\t<td class="batchEdCell"><elementNumberField :element="link" :property="\'weight\'" :type="\'link\'" /></td>\n\t\t\t\t\t\n\t\t\t\t\t<td class="batchEdCell">\n\t\t\t\t\t\t<button v-on:click="changePolarity(link)" title="current polarity (click to switch)">{{(link.isInverse) ? \'-\' : \'+\'}}</button>\n\t\t\t\t\t</td>\n\t\t\t\t\t\n\t\t\t\t\t<td class="batchEdCell">\n\t\t\t\t\t\t<button title="delete" v-on:click="deleteLink(link.id)">D</button> | \n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t</div>\n\t',$state:{id:"windowBatchEditLinks",title:"Batch edit links",width:500,mainmenu:"batchEditLinks"},computed:{links:function(){return this.$store.getters.links}},data:function(){return{}},methods:{deleteLink:function(t){this.$api.command.execute("deleteLink",{id:t})},changePolarity:function(t){this.$api.command.execute("setLink",{id:t.id,isInverse:!t.isInverse})}},components:{elementNumberField:No}},Hr={mixins:[Fo],name:"elementTextEditField",template:'\n\t\t<textarea v-on:change="setter($event.target.value)" v-bind:value="computedProp"></textarea>\n\t'},qr=wi.request("uiWindowBatchEditNodes",["command"]),Jr={mixins:[qr],name:"windowBatchEditNodes",props:["window"],template:'\n\t\t<div style="height: 500px; overflow-y: auto">\n\t\t<table id="batchEdTable" class="tablesorter">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>#</th>\n\t\t\t\t\t<th>Content</th>\n\t\t\t\t\t<th>Weight</th>\n\t\t\t\t\t<th>Actions</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t\n\t\t\t<tbody>\n\t\t\t\t<tr v-for="node in nodes">\n\t\t\t\t\t<td class="batchEdCell">{{node.id}}</td>\n\t\t\t\t\t<td class="batchEdCell"><elementTextEditField :element="node" :property="\'content\'" :type="\'node\'" /></td>\n\t\t\t\t\t<td class="batchEdCell"><elementNumberField :element="node" :property="\'weight\'" :type="\'node\'" /></td>\n\t\t\t\t\t<td class="batchEdCell">\n\t\t\t\t\t\t<button title="delete" v-on:click="deleteNode(node.id)">D</button> | \n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t</div>\n\t',$state:{id:"windowBatchEditNodes",title:"Batch edit nodes",width:500,mainmenu:"batchEditNodes"},computed:{nodes:function(){return this.$store.getters.nodes}},methods:{deleteNode:function(t){this.$api.command.execute("deleteNode",{id:t})}},components:{elementTextEditField:Hr,elementNumberField:No}},Gr=wi.request("uiWindowMergeNodes",["command","sets","nodes"]),Ur={mixins:[Gr],name:"windowMergeNodes",props:["window"],template:'\n\t\t<div>\t\n\t\t\t<fieldset>\n\t\t\t\t<legend>Input</legend>\n\t\t\t\t<input type="checkbox" v-model="syncWithMapSelection" v-on:click="switchSyncMode" /> Lock to screen selection<br>\n\n\t\t\t\t<tagEditBox :availableTags="nodesTemplate" :selectedTags="selecteesTemplate" v-on:tagAdd="add" v-on:tagDelete="remove"  /> <br>\n\t\t\t\t\n\t\t\t\t<button v-on:click="merge">merge</button>\n\t\t\t</fieldset>\n\t\t\t\t\t\n\t\t\t<fieldset>\n\t\t\t\t<legend>Options</legend>\n\t\t\t\tHow to merge: <br>\n\t\t\t\t<input v-model="mergeType" type="radio" name="mergeType" value="lead" /> \n\t\t\t\tinto node #\n\t\t\t\t<select v-model="mergeeLead">\n\t\t\t\t\t<option v-for="node in selectees" :value="node.id">{{node.id}}</option>\n\t\t\t\t</select>\n\t\t\t\t<br>\n\t\t\t\t\n\t\t\t\t<input v-model="mergeType" type="radio" name="mergeType" value="average" /> \n\t\t\t\tnew node with text <input v-model="mergeeText" type="text" placeholder="new text or leave blank" />\n\t\t\t</fieldset>\t\t\t\n\t\t</div>\n\t',$state:{id:"windowMergeNodes",title:"Merge nodes",width:250,mainmenu:"mergeNodes"},computed:{selectees:function(){return this.syncWithMapSelection?this.$store.getters.selectedNodes:this.mergees},nodes:function(){return this.$store.getters.nodes},selecteesTemplate:function(){return this.selectees.map((function(t){return t.id+". "+t.content.substring(0,8)+"..."}))},nodesTemplate:function(){return this.nodes.map((function(t){return t.id+". "+t.content.substring(0,8)+"..."}))}},data:function(){return{syncWithMapSelection:!0,mergees:null,mergeType:"lead",mergeeText:"",mergeeLead:0}},methods:{add:function(t){if(!this.syncWithMapSelection){for(var e=parseInt(t.split(".").shift()),n=null,i=0,o=this.nodes.length;i<o;i++)if(this.nodes[i].id==e){n=i;break}isNaN(e)||null===n||this.mergees.push(this.nodes[n])}},remove:function(t){if(!this.syncWithMapSelection){for(var e,n=parseInt(t.split(".").shift()),i=0,o=this.mergees.length;i<o;i++)if(this.mergees[i].id==n){e=i;break}isNaN(n)||null===e||this.mergees.splice(e,1)}},switchSyncMode:function(){var t=!this.syncWithMapSelection;this.mergees=t?null:this.selectees},merge:function(){var t=this.syncWithMapSelection?this.selectees.map((function(t){return t.id})):this.mergees.map((function(t){return t.id}));if(!(t.length<2)){if(!this.syncWithMapSelection){for(var e=this.nodes,n={},i=[],o=0,r=e.length;o<r;o++)n[e[o].id]=o;for(var s=0,a=t.length;s<a;s++)"undefined"===typeof n[t[s]]&&i.push(s);for(var d=0,l=i.length;d<l;d++)t.splice(i[d],1);if(t.length<2)return}var c=this.$api.nodes.getMergingInfo(t,this.mergeType,this.mergeeLead,this.mergeeText);if(null==c.error){this.$api.command.startCommandBatch();for(var u=0,p=c.delNodes.length;u<p;u++)this.$api.command.execute("deleteNode",c.delNodes[u]);for(var h=0,f=c.addLinks.length;h<f;h++)this.$api.command.execute("addLink",c.addLinks[h]);"lead"===this.mergeType?this.$api.command.execute("setNode",c.mergeNode):this.$api.command.execute("addNode",c.mergeNode),this.$api.command.stopCommandBatch(),this.$store.dispatch("uiState/switchState","edit"),this.$store.dispatch("windows/close",this.window.id)}else alert(c.error)}}},components:{tagEditBox:To}},Kr=wi.request("uiWindowSetAnalysis",["analysis"]),Qr={mixins:[Kr],name:"windowSetAnalysis",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis" :dataChanged="dirty" v-on:dataUpdated="dirty = false">\n\t\t\n\t\t\t<div slot="parameters" style="max-height: 200px; overflow-y: auto;">\n\t\t\t\t<div v-for="set in allSets">\n\t\t\t\t\t<input type="checkbox" :value="set" v-model="sets" /> <label>{{set}}</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div slot="results">\t\t\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend><a href="#" v-on:click="showMatrix = !showMatrix">Matrix</a></legend>\n\t\t\t\t\t<div style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t\t<table id="sfsTable" v-show="showMatrix">\n\t\t\t\t\t\t<thead id="sfsTHead">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class="sfsLabelX"></th>\n\t\t\t\t\t\t\t\t<th class="sfsLabelX" v-for="(i, set) in scoreTable" :style="(set == headerY) ? {backgroundColor: \'#e3e4e5\'} : {}"><span>{{set}}</span></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<tbody id="sfsTBody">\t\t\t\t\t\t\n\t\t\t\t\t\t\t<tr v-for="(row, leftSet) in scoreTable">\n\t\t\t\t\t\t\t\t<td class="sfsLabelY" :style="(leftSet == headerX) ? {backgroundColor: \'#e3e4e5\'} : {}">{{leftSet}}</td>\n\t\t\t\t\t\t\t\t<td class="sfsMatrixDataCell" \n\t\t\t\t\t\t\t\t\tv-for="(cell, topSet) in row" \n\t\t\t\t\t\t\t\t\tv-on:mouseenter="cellEnter(leftSet, topSet)"\n\t\t\t\t\t\t\t\t\tv-on:mouseleave="cellLeave"\n\t\t\t\t\t\t\t\t\t:title="cell+\'x: \'+leftSet+\' -> \'+topSet"\n\t\t\t\t\t\t\t\t\t:style="{backgroundColor: scoreToHeatColorHSL(cell)}"></td>\n\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\n\t\t\t\t\t\t</tbody>\t\t\t\t\t\t\n\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div v-if="minScore >= 0">\n\t\t\t\t\t{{minScore}} <span v-for="(n, i) in 11" :style="{backgroundColor: \'hsl(\'+(1.00 - i/10) * 240+\', 100%, 50%)\', display: \'inline-block\', height: \'8px\', width: \'4px\'}"></span> {{maxScore}}\n\t\t\t\t\t</div>\n\t\t\t\t</fieldset>\n\t\t\t\t\n\t\t\t\t<fieldset>\n\t\t\t\t\t<legend><a href="#" v-on:click="showTable = !showTable">Table</a></legend>\n\t\t\t\t\t<div style="max-height: 300px; overflow-y: auto;">\n\t\t\t\t\t<table id="sfsResultsTable" v-show="showTable">\n\t\t\t\t\t\t<div v-for="(row, leftSet) in scores">\n\t\t\t\t\t\t\t<tr class="sfsResultsTableHeader"><td>{{leftSet}}</td><td></td><td></td></tr>\n\t\t\t\t\t\t\t<tr class="sfsResultsTableSubHeader"><td class="sfsSubHeaderFirst"></td><td class="sfsSubHeaderSecond">Links to</td><td class="sfsSubHeaderThird">#</td></tr>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<tr v-for="(cell, topSet) in row">\n\t\t\t\t\t\t\t\t<td></td><td>{{topSet}}</td><td>{{cell}}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</fieldset>\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowSetAnalysis",title:"Set analysis",width:600,mainmenu:"setAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},allSets:function(){return this.$store.getters.sets},scoreTable:function(){var t={},e=this.scores,n=this.sets,i=9999,o=0;if(0===e.length)return{};for(var r=0,s=n.length;r<s;r++){t[n[r]]={};for(var a=0;a<s;a++)if("undefined"!==typeof e[n[r]]&&"undefined"!==typeof e[n[r]][n[a]]){var d=e[n[r]][n[a]];t[n[r]][n[a]]=d,d>o?o=d:d<i&&(i=d)}else t[n[r]][n[a]]=0}return i=9999==i?o:i,o=o==i?i+1:o,this.minScore=i,this.maxScore=o,t}},watch:{allSets:function(){this.dirty=!0}},data:function(){return{sets:[],scores:[],minScore:-1,maxScore:-1,dirty:!1,showMatrix:!0,showTable:!1,headerX:null,headerY:null}},methods:{scoreToHeatColorHSL:function(t){if(0===t)return"#ffffff";var e=(t-this.minScore)/(this.maxScore-this.minScore),n=240*(1-e);return"hsl("+n+", 100%, 50%)"},runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$api.analysis.get("getDegreesPerNode",[this.nodes,this.links]);case 3:n=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t["catch"](0),new Error(t.t0);case 9:return t.prev=9,t.next=12,this.$api.analysis.get("getSetConnections",[n.results,this.nodes]);case 12:i=t.sent,t.next=18;break;case 15:throw t.prev=15,t.t1=t["catch"](9),new Error(t.t1);case 18:this.scores=i.results,e();case 20:case"end":return t.stop()}}),t,this,[[0,6],[9,15]])})));function e(e){return t.apply(this,arguments)}return e}(),cellEnter:function(t,e){this.headerX=t,this.headerY=e},cellLeave:function(){this.headerX=null,this.headerY=null}},mounted:function(){this.sets=JSON.parse(JSON.stringify(this.allSets))},components:{analysisWindow:Ir}},Zr=wi.request("uiWindowLoopAnalysis",["analysis"]),ts={mixins:[Zr,po],name:"windowLoopAnalysis",$state:{id:"windowLoopAnalysis",title:"Circularity analysis",width:600,mainmenu:"loopAnalysis"},props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters">\n\t\t\t</div>\n\t\t\t\n\t\t\t<div slot="progress">\n\t\t\t\tLoading...\n\t\t\t\t<p v-for="msg in progressMessages">{{msg}}</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<table class="tablesorter-default">\n\t\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>#</th> <th>Cycle</th> <th>Highlight</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t<tr v-for="(loop, n) in results">\n\t\t\t\t\t\t<td>{{n+1}}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-for="(part, i) in loop">\n\t\t\t\t\t\t\t\t<a href="#" v-on:click.prevent="gotoNode(part)">{{part}}</a> <span v-if="i != loop.length -1">-></span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="radio" name="highlight" v-on:click="highlightLinks(n)" />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links}},data:function(){return{results:[],progressMessages:[]}},methods:{highlightLinks:function(t){var e=this,n=this.results[t],i=[];this.$store.dispatch("removeLinkOverlay");for(var o=function(t,o){var r=n[t-1],s=n[t],a=e.links.filter((function(t){return t.from===r&&t.to===s}))[0].id;i.push({id:a,style:{stroke:"#ff0000"}})},r=1,s=n.length;r<s;r++)o(r,s);this.$store.dispatch("setLinkOverlay",i)},runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,i=this.links,t.prev=2,t.next=5,this.$api.analysis.get("getDegreesPerNode",[n,i]);case 5:o=t.sent,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](2),new Error(t.t0);case 11:return t.prev=11,t.next=14,this.$api.analysis.get("getLoopsInNetwork",[o.results],this.progressReport);case 14:r=t.sent,t.next=20;break;case 17:throw t.prev=17,t.t1=t["catch"](11),new Error(t.t1);case 20:r=r.results[1],r.splice(0,1),this.results=r,e();case 24:case"end":return t.stop()}}),t,this,[[2,8],[11,17]])})));function e(e){return t.apply(this,arguments)}return e}(),progressReport:function(t){"info"==t.type&&this.progressMessages.unshift(t.results)}},destroyed:function(){this.$store.dispatch("removeLinkOverlay")},components:{analysisWindow:Ir}},es=wi.request("uiWindowNodeBrowser",["command"]),ns={mixins:[es,po],name:"windowNodeBrowser",props:["window"],template:'\n\t<div>\n\t\t<div id="cbFilterContainer">\n\t\t\t<input id="cbSearchTerm" type="text" v-model="filterInput" v-on:keyup.enter="addFilter" /> <button id="cbOk" v-on:click="addFilter">ok</button>\n\n\t\t\t<input type="radio" name="cbOptions" value="incl" v-model="mode" />include \n\t\t\t<input type="radio" name="cbOptions" value="excl" v-model="mode" />exclude | \n\n\t\t\t<button id="cbReset" v-on:click="reset">reset</button>\n\t\t\t<button id="cbSelect" v-on:click="select">select on map</button> ({{nodesDisplayed.length}}/{{nodes.length}})\n\n\t\t</div>\n\n\t\t<div id="cbHighlightingContainer">\n\t\t\n\t\t\t<tagEditBoxTag v-for="(filter, index) in filters" :key="index" :tag="filter.term+\' (\'+filter.mode+\')\'" v-on:deleteTag="deleteFilter(filter.id)" />\n\t\t\n\t\t</div>\t\t\n\n\t\t<br>\n\t\t\n\t\t<div id="cbList">\n\t\t\t<p v-for="node in nodesDisplayed" :id="\'bubbleListingID\'+node.id" class="cbConstructListing" v-on:click="gotoNode(node.id)">{{node.id}}. {{node.content}}</p>\n\t\t</div>\n\t</div>\n\t',$state:{id:"windowNodeBrowser",title:"Node browser",mainmenu:"nodeBrowser"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},nodesDisplayed:function(){for(var t=this.nodes,e=this.filters,n=function(n,i){var o=e[n],r=o.term,s=void 0,a=void 0;"incl"==o.mode?(s=!0,a=!1):"excl"==o.mode&&(s=!1,a=!0),t="string"===o.type?t.filter((function(t){return t.content.indexOf(r)>-1?s:a})):"regex"===o.type?t.filter((function(t){return t.content.search(r)>-1?s:a})):"id"===o.type?t.filter((function(t){return t.id==r?s:a})):t.filter((function(t){return r.indexOf(t.id)>-1?s:a}))},i=0,o=e.length;i<o;i++)n(i,o);return t}},data:function(){return{filters:[],filterInput:"",mode:"incl"}},methods:{reset:function(){this.filters=[]},select:function(){var t=this;this.nodesDisplayed.forEach((function(e){t.$store.dispatch("setNode",{id:e.id,selected:!0})})),this.nodesDisplayed.length>1&&this.$store.dispatch("uiState/switchState","multiSelect")},addFilter:function(){var t,e=this.filterInput.trim();if(""!=e){if("/"==e[0]&&"/"==e[e.length-1])e=e.replace(new RegExp("/","g"),""),t="regex";else if(e.search(/^\d+$/)>-1)e=parseInt(e),t="id";else if(e.search(/^[1-9]/)>-1){t="ids";var n=[],i=e.split(";");i.forEach((function(t){var e=t;if(e.search(/^\d+$/)>-1)n.push(parseInt(e));else if(e=t.split("-"),e[0]=parseInt(e[0]),e[1]=parseInt(e[1]),!isNaN(e[0])&&!isNaN(e[1]))for(var i=e[0],o=e[1];i<=o;i++)n.push(i)})),e=n}else t="string";this.filters.push({id:this.filters.length,mode:this.mode,type:t,term:e}),this.filterInput=""}},deleteFilter:function(t){for(var e=0,n=this.filters.length;e<n;e++)if(this.filters[e].id==t){this.filters.splice(e,1);break}}},components:{tagEditBoxTag:Lo}},is=wi.request("uiWindowGeneralSummary",["analysis"]),os={mixins:[is],name:"windowGeneralSummary",props:["window"],template:'\n\t<div id="ssmContainer">\n\t\t<h3>Map summary for {{map.mapLabel}}</h3>\n\n\t\t<p id="ssmMapDescription">{{map.mapDescription}}</p>\n\n\t\t<p id="ssmMapCopyrightInformation">{{map.mapCopyrightInformation}}</p>\n\n\t\t<fieldset>\n\t\t\t<legend>Overall statistics</legend>\n\t\t\t<table id="ssTableOverall" class="tablesorter-default">\n\t\t\t\t<thead> \n\t\t\t\t\t<tr>\n\t\t\t\t\t<th>Total <br>nodes</th>\n\t\t\t\t\t<th>Total <br>links</th>\n\t\t\t\t\t<th>Links <br>per node</th>\n\n\t\t\t\t\t<th>Head <br>nodes</th>\n\t\t\t\t\t<th>Tail <br>nodes</th>\n\t\t\t\t\t<th>Unlinked <br>nodes</th>\n\n\t\t\t\t\t<th>Heads <br>per node</th>\n\t\t\t\t\t<th>Tails <br>per node</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td v-for="stat in general">{{stat}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody> \n\t\t\t\t\n\t\t\t</table>\n\t\t</fieldset>\n\n\t\t<fieldset>\n\t\t<legend>Node statistics</legend>\n\n\t\t<div id="ssTableIndividualWrapper">\n\t\t\t<table id="ssTableIndividual" class="tablesorter-default">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t<th>#</th>\n\t\t\t\t<th>Txt</th>\n\t\t\t\t<th>Set/s</th>\n\t\t\t\t<th>Role</th>\n\t\t\t\t<th>In-degree</th>\n\t\t\t\t<th>Out-degree</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\n\t\t\t<tbody>\n\t\t\t\t<tr v-for="stats in specific">\n\t\t\t\t\t<td>{{stats.id}}</td>\n\t\t\t\t\t<td>{{stats.content}}</td>\n\t\t\t\t\t<td>{{stats.sets}}</td>\n\t\t\t\t\t<td>{{stats.role}}</td>\n\t\t\t\t\t<td>{{stats.in}}</td>\n\t\t\t\t\t<td>{{stats.out}}</td>\n\t\t\t\t</tr>\t\t\t\t\n\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t\t\n\t\t<br>\n\t\t\x3c!-- <button id="ssTableIndividualClipboard">Copy to clipboard</button> --\x3e\n\t\t</fieldset>\n\t</div>\n\t',$state:{id:"windowGeneralSummary",title:"General map summary",width:640,mainmenu:"generalSummary"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},map:function(){return this.$store.getters.map}},data:function(){return{general:[],specific:[]}},mounted:function(){for(var t=this.nodes,e=this.links,n=this.$api.analysis.getSync("getDegreesPerNode",[t,e]),i=t.length,o=e.length,r=[],s=i,a=o,d=(o/i).toFixed(2),l=0,c=0,u=0,p=0;p<i;p++){var h="ordinary";0===n[p].in.length&&n[p].out.length>0?(c++,h="trasmitter"):n[p].in.length>0&&0===n[p].out.length?(l++,h="receiver"):0===n[p].in.length&&0===n[p].out.length&&(u++,h="isolated"),r.push({id:t[p].id,content:t[p].content,sets:t[p].sets.toString(),role:h,in:n[p].in.length,out:n[p].out.length})}var f=(l/i).toFixed(2),m=(c/i).toFixed(2);this.general=[s,a,d,l,c,u,f,m],this.specific=r}},rs=wi.request("uiWindowSignalWorldAnalysis",["analysis"]),ss={mixins:[rs],name:"windowSignalWordAnalysis",props:["window"],template:'\n\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<strong>Prescriptive words</strong>\n\t\t\t\t<p>({{prescriptiveWords.toString(\', \')}})</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li v-for="id in prescriptiveWordsTemplate">Node #{{id}}</li>\n\t\t\t\t</ul>\n\t\t\t\t<br><hr><br>\n\t\t\t\t<strong>Glue words words</strong>\n\t\t\t\t<p>({{glueWords.toString(\', \')}})</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li v-for="id in glueWordsTemplate">Node #{{id}}</li>\n\t\t\t\t</ul>\t\t\t\t\n\t\t\t</div>\n\t</analysisWindow>\n\t',$state:{id:"windowSignalWordAnalysis",title:"Signal word analysis",width:400,mainmenu:"signalWordAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes}},data:function(){return{prescriptiveWords:["must","ought","should"],glueWords:["in order to","due to","through","because","rather than"],prescriptiveWordsTemplate:[],glueWordsTemplate:[]}},methods:{runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$api.analysis.get("getWordMatches",[this.nodes,{prescriptiveWords:this.prescriptiveWords,glueWords:this.glueWords}]);case 3:n=t.sent,n=n.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:this.prescriptiveWordsTemplate=n.prescriptiveWords,this.glueWordsTemplate=n.glueWords,e();case 13:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},components:{analysisWindow:Ir}},as=wi.request("uiWindowWordCountAnalysis",["analysis"]),ds={mixins:[as],name:"windowWordCountAnalysis",props:["window"],template:'\n\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\t<div slot="parameters">\n\t\t\t\tThreshold (>): <input type="number" v-model.number="threshold" min="0" /> <br>\n\t\t\t\tDouble threshold for bipolar nodes <input type="checkbox" v-model="bipolar" />\n\t\t\t</div>\n\t\t\t\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Node #</th>\n\t\t\t\t\t\t<th>Content</th>\n\t\t\t\t\t\t<th>Count</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr v-for="count in counts">\n\t\t\t\t\t\t\t<td>{{count.id}}</td>\n\t\t\t\t\t\t\t<td>{{count.parent.content}}</td>\n\t\t\t\t\t\t\t<td>{{count.count}}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t</analysisWindow>\n\t',$state:{id:"windowWordCountAnalysis",title:"Word count analysis",width:400,mainmenu:"wordCountAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes}},data:function(){return{counts:{},threshold:12,bipolar:!0}},methods:{runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,this.$api.analysis.get("getWordCounts",this.nodes);case 4:i=t.sent,i=i.results,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0);case 11:for(o={},r=0,s=this.nodes.length;r<s;r++)o[this.nodes[r].id]=r;t.t1=regeneratorRuntime.keys(i);case 14:if((t.t2=t.t1()).done){t.next=21;break}if(a=t.t2.value,!(i[a].count<=this.threshold||this.bipolar&&1==i[a].bipolar&&i[a].count<2*this.threshold)){t.next=18;break}return t.abrupt("continue",14);case 18:n.push({id:a,count:i[a].count,parent:this.nodes[o[a]]}),t.next=14;break;case 21:this.counts=n,e();case 23:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},components:{analysisWindow:Ir,elementTextEditField:Hr}},ls=(n("4917"),{name:"windowCentralAnalysisTable",props:["header","body"],template:'\n\t\t<div id="csScoreTableWrapper" style="">\n\t\t<table id="csScoreTable"> \n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th>#</th>\n\t\t\t\t<th v-for="label in header">{{label}}</th>\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr v-for="(set, id) in body">\n\t\t\t\t\t<td>{{id}}</td>\n\t\t\t\t\t<td v-for="score in set">{{score}}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t</div>\t\n\t'}),cs=wi.request("uiWindowCentralAnalysisHistograms",["analysis"]),us={mixins:[cs],name:"windowCentralAnalysisHistograms",props:["data","scores"],template:'\n\t\t<div id="caDynamicControlElementsWrapper">\n\t\t<table id="caDynamicControlElements">\n\t\t\t<thead><tr> <th>Order</th> <th>Histogram</th> <th>Show on map</th>  </tr></thead> \n\t\t\t<tbody>\n\t\t\t\t<tr v-for="(values, depth) in data">\n\t\t\t\t\t<td>{{depth}}</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t<jQuerySparkline :id="\'sparklineCentralScore\'+depth" :data="values" :options="histogramOptions" />\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input type="radio" name="depth" :value="depth" v-on:click="highlight($event.target.value)" />\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t\t</div>\n\t',data:function(){return{histogramOptions:{type:"bar",barWidth:"10px",height:"40px",colorMap:["#00009a","#0020ff","#00abff","#0fffef","#6dff90","#b6ff47","#ffd000","#ff8c00","#ff2000","#b00000"]}}},methods:{highlight:function(t){this.applyOverlay(t)},applyOverlay:function(t){var e=[],n=this.scores,i=[];for(var o in n)i.push(n[o][t]);var r,s=this.$api.analysis.getSync("getPartitions",i);for(var a in n){for(var d=n[a][t],l=0;l<10;l++){var c=9===l&&d>=s[l]||d>=s[l]&&d<s[l+1]?l:-1;switch(c){case 9:r="#b00000";break;case 8:r="#ff2000";break;case 7:r="#ff8c00";break;case 6:r="#ffd000";break;case 5:r="#b6ff47";break;case 4:r="#6dff90";break;case 3:r="#0fffef";break;case 2:r="#00abff";break;case 1:r="#0020ff";break;case 0:r="#00009a";break;default:break}}e.push({id:parseInt(a),style:{"background-color":r}})}this.$store.dispatch("removeNodeOverlay"),this.$store.dispatch("setNodeOverlay",e)}},destroyed:function(){this.$store.getters.nodes;this.$store.dispatch("removeNodeOverlay")},components:{jQuerySparkline:Pr}},ps={name:"textFieldListArray",props:["value"],template:'\n\t\t<input type="text" placeholder="e.g. 1,2,4" v-bind:value="value.join(\',\')" v-on:change="update($event.target.value)" />\n\t',methods:{update:function(t){this.$emit("input",""!=t?t.match(/[0-9,]/g).join("").split(",").map((function(t){return parseInt(t)})):[])}}},hs=wi.request("uiWindowCentralAnalysis",["analysis"]),fs={mixins:[hs],name:"windowCentralAnalysis",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters" id="csParameters">\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t<div>Depth of neighbours</div> <input type="number" min="1" v-model.number="depth" />\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t<div>Distance decay</div> <input type="checkbox" v-model="decay" />\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t<div>Limit analysis to nodes #</div> <textFieldListArray v-model="limitNodes" />\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t<div>Limit analysis to set/s (Hold CTRL or Command <br>for multi-selection)</div> <select id="csSets" v-model="limitSets" multiple="multiple">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<option v-for="set in sets" :value="set">{{set}}</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div slot="results">\n\t\t\t\t<windowCentralAnalysisTable :header="thead" :body="scores" />\n\n\t\t\t\t<windowCentralAnalysisHistograms :data="histogramData" :scores="scores" />\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowCentralAnalysis",title:"Central analysis",width:660,mainmenu:"centralAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},sets:function(){return this.$store.getters.sets},scoreTable:function(){}},data:function(){return{depth:4,decay:!1,limitNodes:[],limitSets:[],scores:[],thead:[],highlightDepth:null,histogramData:[]}},methods:{evaluateSubsetAnalysis:function(){var t=this;return console.log(this.limitNodes),console.log(this.limitSets),0===this.limitNodes.length&&0===this.limitSets.length?Promise.resolve([]):new Promise((function(e){setTimeout((function(){var n=t.limitNodes.length>0?JSON.parse(JSON.stringify(t.limitNodes)):[],i=t.nodes,o=JSON.parse(JSON.stringify(t.limitSets));t:for(var r=0,s=i.length;r<s;r++)for(var a=0,d=i[r].sets.length;a<d;a++)if(-1!=o.indexOf(i[r].sets[a])){n.push(i[r].id);continue t}e(n)}),1)}))},runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,i=this.links,o=this.$api.analysis.get("getDegreesPerNode",[n,i]),s=this.evaluateSubsetAnalysis(),t.prev=4,t.next=7,o;case 7:return o=t.sent,t.next=10,s;case 10:return s=t.sent,t.next=13,this.$api.analysis.get("getNthSumOfDegreesPerNode",[[o.results,i],{orders:this.depth,decay:this.decay,uncertainty:!1,subsetAnalysis:s}]);case 13:r=t.sent,t.next=19;break;case 16:throw t.prev=16,t.t0=t["catch"](4),new Error(t.t0);case 19:this.updateTableHeaders(r.results),this.updateHistogramData(r.results),console.log(r),o=null,this.scores=r.results,e();case 25:case"end":return t.stop()}}),t,this,[[4,16]])})));function e(e){return t.apply(this,arguments)}return e}(),updateTableHeaders:function(t){for(var e in this.thead=[],t){for(var n=0,i=t[e].length;n<i;n++)this.thead.push(n);break}},scoresToHistogram:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.analysis.get("getPartitions",e);case 2:return i=t.sent,t.next=5,this.$api.analysis.get("getFrequencyDistribution",[e,i.results]);case 5:return o=t.sent,t.abrupt("return",o.results);case 7:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),updateHistogramData:function(t){var e=this;yn.set(this,"histogramData",[]);var n=[];for(var i in t)for(var o=0,r=t[i].length;o<r;o++)"undefined"===typeof n[o]&&(n[o]=[],this.histogramData.push([])),n[o].push(t[i][o]);for(var s=function(t,i){e.scoresToHistogram(n[t],t).then((function(n){yn.set(e.histogramData,t,n)})).catch((function(t){throw new Error(t)}))},a=0,d=n.length;a<d;a++)s(a,d)},updateLimitNodes:function(t){this.limitNodes=""!=t?t.match(/[0-9,]/g).join("").split(",").map((function(t){return parseInt(t)})):[]}},components:{analysisWindow:Ir,windowCentralAnalysisTable:ls,windowCentralAnalysisHistograms:us,textFieldListArray:ps}},ms=wi.request("uiWindowClusterAnalysis",["analysis"]),vs=["#FFFF00","#1CE6FF","#FF34FF","#FF4A46","#008941","#006FA6","#A30059","#FFDBE5","#7A4900","#0000A6","#63FFAC","#B79762","#004D43","#8FB0FF","#997D87","#5A0007","#809693","#1B4400","#4FC601","#3B5DFF","#4A3B53","#FF2F80","#61615A","#BA0900","#6B7900","#00C2A0","#FFAA92","#FF90C9","#B903AA","#D16100","#DDEFFF","#000035","#7B4F4B","#A1C299","#300018","#0AA6D8","#013349","#00846F","#372101","#FFB500","#C2FFED","#A079BF","#CC0744","#C0B9B2","#C2FF99","#001E09","#00489C","#6F0062","#0CBD66","#EEC3FF","#456D75","#B77B68","#7A87A1","#788D66","#885578","#FAD09F","#FF8A9A","#D157A0","#BEC459","#456648","#0086ED","#886F4C","#34362D","#B4A8BD","#00A6AA","#452C2C","#636375","#A3C8C9","#FF913F","#938A81","#575329","#00FECF","#B05B6F","#8CD0FF","#3B9700","#04F757","#C8A1A1","#1E6E00","#7900D7","#A77500","#6367A9","#A05837","#6B002C","#772600","#D790FF","#9B9700","#549E79","#FFF69F","#201625","#72418F","#BC23FF","#99ADC0","#3A2465","#922329","#5B4534","#FDE8DC","#404E55","#0089A3","#CB7E98","#A4E804","#324E72","#6A3A4C","#83AB58","#001C1E","#D1F7CE","#004B28","#C8D0F6","#A3A489","#806C66","#222800","#BF5650","#E83000","#66796D","#DA007C","#FF1A59","#8ADBB4","#1E0200","#5B4E51","#C895C5","#320033","#FF6832","#66E1D3","#CFCDAC","#D0AC94","#7ED379","#012C58"],gs={mixins:[ms],name:"windowClusterAnalysis",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters">\n\t\t\t\t<select v-model="type">\n\t\t\t\t\t<option v-for="typeObj in types" :value="typeObj.id">{{typeObj.description}}</option>\n\t\t\t\t</select>\n\t\t\t\t\n\t\t\t\t<div v-if="type === \'jaccard\'">\n\t\t\t\t\tThreshold <input type="number" min="0" v-model.number="threshold" /> \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div v-else-if="type === \'hierarchy\'">\n\t\t\t\t\tUse head statements as seed values <input type="checkbox" v-model="headsSeed" /> <br>\n\t\t\t\t\tCustom seed nodes <textFieldListArray v-model="seed" />\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<table v-on:click="delegateClickId">\n\t\t\t\t\t<tr v-for="(cluster, i) in clusters">\n\t\t\t\t\t\t<td>Cluster #{{i}}</td> \n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<span v-for="id in cluster" class="caDataPoint" :data-id="id">{{id}}, </span>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowClusterAnalysis",title:"Cluster analysis",width:500,mainmenu:"clusterAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links}},data:function(){return{types:[{id:"jaccard",description:"Jaccard index",func:"getJaccardClusters"},{id:"hierarchy",description:"Hierarchy drill down",func:"getHierarchyClusters"}],type:"jaccard",clusters:[],threshold:0,headsSeed:!0,seed:[]}},methods:{prepareAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n,i){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={},t.prev=1,t.next=4,this.$api.analysis.get("getDegreesPerNode",[e,n]);case 4:r=t.sent,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](1),new Error(t.t0);case 10:return"jaccard"===i?(o.threshold=this.threshold,r.results=r.results.map((function(t){return{id:t.id,neighbours:t.in.concat(t.out)}}))):"hierarchy"===i&&(o.heads=this.headsSeed,o.customSeed=this.seed),t.abrupt("return",{data:r.results,options:o});case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(e,n,i){return t.apply(this,arguments)}return e}(),runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,i=this.links,o=this.type,r=this.types.filter((function(t){return t.id===o}))[0].func,s="jaccard"===o?["getJaccardCoefficient"]:[],t.prev=5,t.next=8,this.prepareAnalysis(n,i,o);case 8:a=t.sent,t.next=14;break;case 11:throw t.prev=11,t.t0=t["catch"](5),new Error(t.t0);case 14:return t.prev=14,t.next=17,this.$api.analysis.get(r,[a.data,a.options],null,s);case 17:d=t.sent,t.next=23;break;case 20:throw t.prev=20,t.t1=t["catch"](14),new Error(t.t1);case 23:a=null,this.highlight(o,d.results),this.clusters=d.results,e();case 27:case"end":return t.stop()}}),t,this,[[5,11],[14,20]])})));function e(e){return t.apply(this,arguments)}return e}(),highlight:function(t,e){var n=this.getJaccardHighlightData(e);this.$store.dispatch("removeNodeOverlay"),this.$store.dispatch("setNodeOverlay",n),"hierarchy"===t&&this.$store.dispatch("setNodeOverlay",this.getHierarchyHighlightData(e))},getHierarchyHighlightData:function(t){for(var e=[],n={},i=0,o=t.length;i<o;i++){var r=t[i];e.push(r[0]);for(var s=0,a=t[i].length;s<a;s++)for(var d=t[i][s],l=0,c=t.length;l<c;l++){var u=t[l];i!=l&&-1!=u.indexOf(d)&&(n.hasOwnProperty(d)||(n[d]=[]),-1==n[d].indexOf(l)&&n[d].push(l))}}var p=[],h=[];for(var f in n){f=parseInt(f);var m="",v="",g=120/n[f].length;g<1&&(h.push(f),g=1),g=Math.ceil(g);for(var y=0,w=n[f].length;y<w;y++)m+="inset "+(y*g+g)+"px 0 "+vs[n[f][y]],y<w-1?m+=",":v=vs[n[f][y]];var b={};if(-1==e.indexOf(f))b={"box-shadow":m,"background-color":v};else t:for(var x=0,k=t.length;x<k;x++)if(f==t[x][0]){b={"background-color":vs[x],"border-color":"#FF0000","border-width":"2px"};break t}p.push({id:f,style:b})}return h.length>0&&alert("Warning: insufficient space for displaying every colour in statement number/s "+h.toString()),p},getJaccardHighlightData:function(t){for(var e=[],n=0,i=t.length;n<i;n++)for(var o=t[n],r=0,s=o.length;r<s;r++)e.push({id:o[r],style:{"background-color":vs[n]}});return e},delegateClickId:function(t){"caDataPoint"===t.target.className&&console.log("clicked on",t.target.dataset.id)}},destroyed:function(){this.$store.dispatch("removeNodeOverlay")},components:{analysisWindow:Ir,jQuerySparkline:Pr,textFieldListArray:ps}},ys=wi.request("uiWindowDecisionTreeAnalysis",["analysis"]),ws={mixins:[ys],name:"windowDecisionTreeAnalysis",props:["window"],template:'\n\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\t<div slot="results">\n\t\t\t\t<span>See map</span>\n\t\t\t</div>\n\t</analysisWindow>\n\t',$state:{id:"windowDecisionTreeAnalysis",title:"Decision tree analysis",width:400,mainmenu:"decisionTreeAnalysis"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links}},data:function(){return{}},methods:{runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a,d,l,c,u,p,h,f,m,v,g,y,w,b=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=this.links,i={},o=this.$api.analysis.getSync("getDegreesPerNode",[this.nodes,this.links]),r=[],s={},a={},d=0,l=o.length;d<l;d++)s[o[d].id]=d,0===o[d].out.length&&o[d].in.length>0&&r.push(o[d].id);for(c=0,u=n.length;c<u;c++)"undefined"===typeof a[n[c].from]&&(a[n[c].from]={}),a[n[c].from][n[c].to]=n[c].weight;for(p=0;p<r.length;p++)h=r[p],i[h]={linkWeightTotal:0,links:[],value:this.nodes[s[h]].weight,baseValue:this.nodes[s[h]].weight,done:!0};f=0,m=!0,v=r,g=function(){for(var t=[],e=!1,n=function(n){var r=v[n],d=o[s[r]].in;d.forEach((function(n){if("undefined"===typeof i[n]&&(i[n]={linkWeightTotal:0,links:[],value:0,done:!1,baseValue:b.nodes[s[n]].weight}),"undefined"!==typeof i[r]&&!1!==i[r].done){var d=a[n][r]/100,l=i[r].value;i[n].linkWeightTotal+=d,i[n].links.push(l*d),-1===t.indexOf(n)&&t.push(n),i[n].links.length===o[s[n]].out.length&&(i[n].done=!0,1===i[n].linkWeightTotal?i[n].value=i[n].baseValue+i[n].links.reduce((function(t,e){return t+e})):(i[n].links.sort((function(t,e){return t-e})),i[n].value=i[n].baseValue+i[n].links.pop()))}else e=!0}))},r=0;r<v.length;r++)n(r);e&&console.info("debug me"),t.length>0?v=t:m=!1,f++,f>100&&(m=!1,console.error("loop overshot"))};while(m)g();for(w in y=[],i)y.push({id:w,textOverlay:"emv: "+i[w].value.toFixed(2)});this.$store.dispatch("setNode",y),e();case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},destroyed:function(){var t=this.nodes.map((function(t){return{id:t.id,textOverlay:""}}));this.$store.dispatch("setNode",t)},components:{analysisWindow:Ir}},bs=wi.request("uiWindowSimilarityAnalysisOverlap",["analysis"]),xs={mixins:[bs],name:"windowSimilarityAnalysisOverlap",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters">\n\t\t\t\tFilter stopwords <input type="checkbox" v-model="filterStopwords" /> <br>\n\t\t\t\tSkip nodes that are linked <input type="checkbox" v-model="skipLinked" />\n\t\t\t</div>\n\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<div v-for="hit in hits">\n\t\t\t\t\t\t<p>{{hit.idA}}. <span v-for="prop in hit.contentA" :style="(prop.hit) ? {color: \'red\'} : {}">{{prop.segment}}</span></p>\n\t\t\t\t\t\t<p>{{hit.idB}}. <span v-for="prop in hit.contentB" :style="(prop.hit) ? {color: \'red\'} : {}">{{prop.segment}}</span></p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<hr>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowSimilarityAnalysisOverlap",title:"Word overlap",width:400,mainmenu:"similarityAnalysisOverlap"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links}},data:function(){return{filterStopwords:!0,skipLinked:!1,hits:[]}},methods:{runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r,s,a,d,l,c,u,p,h,f=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,i=this.links,o={},t.prev=3,t.next=6,this.$api.analysis.get("getNormalisedContent",[n,{stopwords:this.filterStopwords}]);case 6:r=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](3),new Error(t.t0);case 12:return t.prev=12,t.next=15,this.$api.analysis.get("getWorldOverlap",[[r.results,i],{skipLinked:this.skipLinked}]);case 15:s=t.sent,t.next=21;break;case 18:throw t.prev=18,t.t1=t["catch"](12),new Error(t.t1);case 21:for(r=null,this.hits=[],s=s.results,a=0,d=n.length;a<d;a++)o[n[a].id]=a;for(l in s)for(c=s[l],u=function(t,e){var i=c[t].id,r=c[t].hits,s=n[o[l]].content,a=n[o[i]].content;r.forEach((function(t){var e=new RegExp("\\b"+t+"\\b","g"),n="@@^^"+t+"@@";s=s.replace(e,n),a=a.replace(e,n)})),s=s.split("@@"),s=s.map((function(t){var e=t.startsWith("^^"),n=e?t.substring(2,t.length):t;return{segment:n,hit:e}})),a=a.split("@@"),a=a.map((function(t){var e=t.startsWith("^^"),n=e?t.substring(2,t.length):t;return{segment:n,hit:e}})),f.hits.push({idA:l,idB:i,contentA:s,contentB:a})},p=0,h=c.length;p<h;p++)u(p,h);e();case 27:case"end":return t.stop()}}),t,this,[[3,9],[12,18]])})));function e(e){return t.apply(this,arguments)}return e}()},components:{analysisWindow:Ir}},ks=wi.request("uiWindowSimilarityAnalysisKeyWords",["analysis"]),Ss={mixins:[ks],name:"windowSimilarityAnalysisKeyWords",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters">\n\t\t\t\tFilter stopwords <input type="checkbox" v-model="filterStopwords" /> <br>\n\t\t\t</div>\n\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<table class="tablesorter-default">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Key word</th> <th>#</th/> <th>Nodes</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr v-for="(hit, word) in hits">\n\t\t\t\t\t\t\t<td>{{word}}</td>\n\t\t\t\t\t\t\t<td>{{hit.occurrences}}</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div class="icon_arrow_left nsKeywordsButton" v-on:click="changeComparePair(word, \'previous\')"></div> \n\t\t\t\t\t\t\t\t<div class="icon_arrow_right nsKeywordsButton" v-on:click="changeComparePair(word, \'next\')"></div><br>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<p>{{getContentOfNodeById( hit.compare.a )}}</p>\n\t\t\t\t\t\t\t\t<p>{{getContentOfNodeById( hit.compare.b )}}</p>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for="id in hit.ids">{{getContentOfNodeById(id)}}</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowSimilarityAnalysisKeyWords",title:"Key words",width:400,mainmenu:"similarityAnalysisKeyWords"},computed:{nodes:function(){return this.$store.getters.nodes},indexMap:function(){for(var t={},e=0,n=this.nodes.length;e<n;e++)t[this.nodes[e].id]=e;return t}},data:function(){return{filterStopwords:!0,hits:[]}},methods:{runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,t.prev=1,t.next=4,this.$api.analysis.get("getNormalisedContent",[n,{stopwords:this.filterStopwords}]);case 4:i=t.sent,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](1),new Error(t.t0);case 10:return t.prev=10,t.next=13,this.$api.analysis.get("getKeyWords",i.results);case 13:o=t.sent,t.next=19;break;case 16:throw t.prev=16,t.t1=t["catch"](10),new Error(t.t1);case 19:i=null,console.log(o),this.hits=[],o=o.results,t.t2=regeneratorRuntime.keys(o);case 24:if((t.t3=t.t2()).done){t.next=32;break}if(r=t.t3.value,!(o[r].occurrences<2)){t.next=29;break}return delete o[r],t.abrupt("continue",24);case 29:o[r].compare={a:o[r].ids[0],b:o[r].ids[1]},t.next=24;break;case 32:this.hits=o,e();case 34:case"end":return t.stop()}}),t,this,[[1,7],[10,16]])})));function e(e){return t.apply(this,arguments)}return e}(),getContentOfNodeById:function(t){var e=this.indexMap[t];return"undefined"===typeof e?"Data changed. Please update the analysis.":t+". "+this.nodes[e].content},changeComparePair:function(t,e){var n=this.hits[t],i=n.ids.indexOf(n.compare.a),o=n.ids.indexOf(n.compare.b);"next"===e&&(o++,"undefined"===typeof n.ids[o]&&(i++,o=i+1,"undefined"===typeof n.ids[o]&&(i=0,o=1))),"previous"===e&&(o--,o==i&&(i--,o=n.ids.length-1,"undefined"===typeof n.ids[i]&&(o=n.ids.length-1,i=o-1))),n.compare.a=n.ids[i],n.compare.b=n.ids[o]}},components:{analysisWindow:Ir,jQuerySparkline:Pr}},Cs=wi.request("uiWindowSimilarityAnalysisJaccard",["analysis"]),Fs={mixins:[Cs],name:"windowSimilarityAnalysisJaccard",props:["window"],template:'\n\t\t<analysisWindow :runAnalysisCallback="runAnalysis">\n\t\t\n\t\t\t<div slot="parameters">\n\t\t\t\tJaccard index threshold <input type="number" v-model.float="threshold" min="0" step="0.1" /> <br>\n\t\t\t\tFilter stopwords <input type="checkbox" v-model="filterStopwords" /> <br>\n\t\t\t\tSkip nodes that are linked <input type="checkbox" v-model="skipLinked" />\n\t\t\t</div>\n\n\t\t\t<div slot="results" style="max-height: 400px; overflow-y: auto;">\n\t\t\t\t<table class="tablesorter-default">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Node</th> <th>compared to</th/> <th>Jaccard index</th> <th></th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<template v-for="(hit, id) in hits">\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<tr v-for="details in hit">\n\t\t\t\t\t\t\t\t<td>{{getContentOfNodeById(id)}}</td>\n\t\t\t\t\t\t\t\t<td>{{getContentOfNodeById(details.id)}}</td>\n\t\t\t\t\t\t\t\t<td>{{Math.round( details.jaccard * 100) / 100}}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\t\t\t\t\t\t\n\t\t\t</div>\n\t\t\n\t\t</analysisWindow>\n\t',$state:{id:"windowSimilarityAnalysisJaccard",title:"Jaccard index",width:400,mainmenu:"similarityAnalysisJaccard"},computed:{nodes:function(){return this.$store.getters.nodes},links:function(){return this.$store.getters.links},indexMap:function(){for(var t={},e=0,n=this.nodes.length;e<n;e++)t[this.nodes[e].id]=e;return t}},data:function(){return{filterStopwords:!0,skipLinked:!1,threshold:.4,hits:[]}},methods:{runAnalysis:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,i,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.nodes,i=this.links,{},t.prev=3,t.next=6,this.$api.analysis.get("getNormalisedContent",[n,{stopwords:this.filterStopwords}]);case 6:o=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](3),new Error(t.t0);case 12:return t.prev=12,t.next=15,this.$api.analysis.get("getJaccardIndicesOfText",[[o.results,i],{skipLinked:this.skipLinked,threshold:this.threshold}],null,["getJaccardCoefficient"]);case 15:r=t.sent,t.next=21;break;case 18:throw t.prev=18,t.t1=t["catch"](12),new Error(t.t1);case 21:o=null,this.hits=[],r=r.results,this.hits=r,e();case 26:case"end":return t.stop()}}),t,this,[[3,9],[12,18]])})));function e(e){return t.apply(this,arguments)}return e}(),getContentOfNodeById:function(t){var e=this.indexMap[t];return"undefined"===typeof e?"Data changed. Please update the analysis.":t+". "+this.nodes[e].content}},components:{analysisWindow:Ir}},Ns=wi.request("uiWindowSaveToImage",["mapToPng","http"]),Os={mixins:[Ns],name:"windowSaveToImage",template:'\n\t<div>\n\t\t<p v-if="totalPNGs > 0">Progress: {{processedPNGs}}/{{totalPNGs}}</p>\n\t\t<input type="number" min="0" step="0.1" v-model.float="zoom" /> Zoom <br>\n\t\t<input type="checkbox" v-model="disableTextRendering" /> Disable text <br>\n\t\t<button v-on:click="renderImg">render</button>\n\t\t<button v-on:click="convertImg">convert</button>\n\t\t<div id="stiContainer">\n\t\t</div>\n\t</div>\n\t',$state:{id:"windowSaveToImage",title:"Save to image",width:600,height:500,mainmenu:"saveImage"},data:function(){return{zoom:1,disableTextRendering:!1,canvasDimension:2e3,renderNodeStyles:["color","background-color","font-size","font-family"],renderLinkStyles:["stroke","stroke-dasharray"],totalPNGs:0,processedPNGs:0}},methods:{applyOverlays:function(t,e,n){var i={};if("undefined"!==typeof n[t])for(var o in e)i[o]=n[t][o]||e[o];else i=e;return i},buildRenderData:function(t,e,n){var i=this,o=this.$store.getters.nodeOverlays,r=this.$store.getters.linkOverlays,s=t.map((function(t){return{id:t.id,domIdPrefix:i.$const.selectors.nodeIdPrefix,x:t.x,y:t.y,w:t.w,h:t.h,content:t.content,style:i.applyOverlays(t.id,JSON.parse(JSON.stringify(t.style)),o)}})),a=e.map((function(t){return{debug:t.id+":"+t.from+"-"+t.to,id:t.id,domIdPrefix:i.$const.selectors.linkIdPrefix,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,cX:t.cX,cY:t.cY,cXo:t.cX,cYo:t.cY,from:{x:t.fNode.x,y:t.fNode.y,w:t.fNode.w,h:t.fNode.h},to:{x:t.tNode.x,y:t.tNode.y,w:t.tNode.w,h:t.tNode.h},renderer:t.renderer,isInverse:t.isInverse,style:i.applyOverlays(t.id,JSON.parse(JSON.stringify(t.style)),r)}})),d={width:n.width,height:n.height};return{nodes:s,links:a,map:d}},renderImg:function(){var t=this.buildRenderData(this.$store.getters.nodes,this.$store.getters.links,this.$store.getters.map),e="stiCanvas",n="stiContainer",i=this.canvasDimension,o=this.zoom,r=this.disableTextRendering;Wr=this.$api.mapToPng.render(t,{canvasClass:e,canvasParent:n,canvasDimension:i,zoom:o,disableTextRendering:r})},convertImg:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("uiState/switchState","loading");case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),new Error(t.t0);case 8:e=this.buildRenderData(this.$store.getters.nodes,this.$store.getters.links,this.$store.getters.map),n={maxPngWidth:1e3,maxPngHeight:1e3,maxCanvasWidth:500,maxCanvasHeight:500,zoom:this.zoom,disableTextRendering:this.disableTextRendering},i=this.$api.mapToPng.convert(e,n),i("data",(function(t){o.totalPNGs=t.total,o.processedPNGs=t.progress})),i("done",(function(t){o.$store.dispatch("uiState/switchState","edit")})),i("error",(function(t){o.$store.dispatch("uiState/switchState","edit"),console.error(t),o.$store.dispatch("modalDialog/open",{dialog:"alert",parameters:"Failed to save image/s."})}));case 14:case"end":return t.stop()}}),t,this,[[0,5]])})));function e(){return t.apply(this,arguments)}return e}()},destroyed:function(){Wr.removeCanvas(),Wr=null}},$s=[wr],Es=[kr,Cr,Er,Tr,Rr,zr,ns,os,Xr,Vr,Jr,Ur,Qr,ts,ss,ds,fs,gs,xs,Ss,Fs,Os,ws];console.info("#todo: windows $state var"),Es.forEach((function(t){t.$state.className=t.$state.id}));var Is={windows:Es,headers:$s},Ps=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-modal-dialog",{staticClass:"modal-dialog_annotations",attrs:{title:"Edit annotation",buttons:{Save:t.save,Delete:t.del,Cancel:t.cancel}}},[n("div",{attrs:{slot:"body"},slot:"body"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.annotation,expression:"annotation"}],staticStyle:{width:"290px",height:"60px",resize:"none"},domProps:{value:t.annotation},on:{input:function(e){e.target.composing||(t.annotation=e.target.value)}}})])])},Ls=[],Ts=wi.request("uiAddAnnotationDialog",["command"]),Ms={mixins:[Ts],name:"modal-dialog-annotations-edit",props:["parameters","close"],data:function(){return{annotation:""}},computed:{node:function(){return this.parameters}},methods:{save:function(){this.$api.command.execute("setNode",{id:this.node.id,annotation:this.annotation})},del:function(){this.$api.command.execute("setNode",{id:this.node.id,annotation:""}),this.close(null)},cancel:function(){this.close(null)}},created:function(){this.annotation=this.node.annotation}},As=Ms,Ds=As,_s=n("2877"),Ws=Object(_s["a"])(Ds,Ps,Ls,!1,null,null,null),Rs=Ws.exports,Bs={install:function(t,e){if("undefined"===typeof e&&"undefined"===typeof e.constants)throw new Error("Failed to provide constants-object via options-parameter in constants injector Plugin.");t.mixin({created:function(){this.$const={constantsObject:e.constants,get selectors(){return delete this.selectors,this.selectors=this.constantsObject.selectors,this.constantsObject.selectors}}}})}};function zs(t){t.filter("sanitiseHtmlBody",(function(t){var e=t;return e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/\"/,"&quot;"),e=e.replace(/\'/,"&#x27;"),e=e.replace(/\//,"&#x2F;"),e})),t.filter("int",(function(t){console.log("int filter");var e=parseInt(t);return isNaN(e)?"filterError":e})),t.filter("number",(function(t){var e=parseInt(t);return isNan(e)?"filterError":e}))}function js(t,e){for(var n={},i=0,o=t.length;i<o;i++)n[t[i]]=e[t[i]];return n}function Xs(t,e,n,i){for(var o=i,r=[n],s=0,a=o.length;s<a;s++)for(var d=0,l=o[s].use.length;d<l;d++)-1===r.indexOf(o[s].use[d])&&r.push(o[s].use[d]);for(var c=t.request(n+"Init",r),u=0,p=o.length;u<p;u++)c[n].register(new o[u][n](js(o[u].use,c),e))}var Ys=["dataLoader","action","fileServer"],Vs=function(t,e){function n(t,e){for(var n in t.state)if("undefined"!==typeof t.state[n].augmentations)for(var i=t.state[n].augmentations,o=0,r=e[n].length;o<r;o++)for(var s in i)e[n][o][s]=JSON.parse(JSON.stringify(i[s]))}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ok";return t}function r(t){return e.store.dispatch("modalDialog/open",{dialog:"alert",parameters:t}),i("error")}function s(t){if("undefined"===typeof t||"dialog"===t.type)return{fileType:"sav",loadMode:"loadDialog",options:null};if("sav"===t.type)return{fileType:t.type,loadMode:"loadFromFileSystem",options:t.path};if("localStorage"===t.type)return{fileType:t.type,loadMode:"loadFromLocalStorage",options:t.key};throw console.error(t),new Error("Invalid parameters provided to load action.")}this.name="loadData",this.dispatch=function(){var a=Object(o["a"])(regeneratorRuntime.mark((function o(a){var d,l,c,u,p,h,f;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return d=s(a),l=d.loadMode,c=d.fileType,u=d.options,o.prev=1,o.next=4,t.fileServer[l](u);case 4:p=o.sent,o.next=20;break;case 7:if(o.prev=7,o.t0=o["catch"](1),h="string"===typeof o.t0?o.t0:o.t0.type,"error"!==h&&"fail"!==h){o.next=14;break}return o.abrupt("return",r("Failed to read data from the source."));case 14:if("cancel"!==h){o.next=18;break}return o.abrupt("return",i());case 18:return console.error(o.t0),o.abrupt("return",r("Loading process failed."));case 20:if(null!==p){o.next=22;break}return o.abrupt("return",i());case 22:if("object"===Object(H["a"])(p)&&(p=p.data),f=t.dataLoader.load(p,c),p=null,"undefined"!==typeof f&&null!=f&&""!=f){o.next=27;break}return o.abrupt("return",r("An empty result was loaded. Nothing will be loaded."));case 27:return o.prev=27,o.next=30,t.action.dispatch("destroyUi");case 30:o.next=36;break;case 32:return o.prev=32,o.t1=o["catch"](27),console.error(o.t1),o.abrupt("return",r("Failed to reset the application. Loading aborted."));case 36:return n(e.store,f),e.store.dispatch("load",f),o.abrupt("return",i());case 40:case"end":return o.stop()}}),o,null,[[1,7],[27,32]])})));return function(t){return a.apply(this,arguments)}}()},Hs={use:Ys,action:Vs},qs=["dataSaver","fileServer"],Js=function(t,e){this.name="saveData",this.dispatch=Object(o["a"])(regeneratorRuntime.mark((function n(){var i,o,r,s,a,d,l=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=l.length>0&&void 0!==l[0]?l[0]:{},"undefined"!==typeof i.type&&"dialog"!==i.type&&"savjs"!==i.type){n.next=6;break}o="saveDialog",r=e.store.state.map.map.mapLabel,n.next=17;break;case 6:if("sav"!==i.type){n.next=10;break}throw new Error("Not implemented.");case 10:if("localStorage"!==i.type){n.next=15;break}o="saveToLocalStorage",r=i.key,n.next=17;break;case 15:throw console.error(s,r),new Error("Invalid parameters provided to save action.");case 17:return s=i.type||null,n.next=20,e.store.dispatch("save");case 20:return a=n.sent,d=t.dataSaver.save(s,a),r+=null!==d.extension?"."+d.extension:"",n.prev=23,n.next=26,t.fileServer[o](d.data,r);case 26:n.next=32;break;case 28:return n.prev=28,n.t0=n["catch"](23),console.error(n.t0),n.abrupt("return","error");case 32:return n.abrupt("return","ok");case 33:case"end":return n.stop()}}),n,null,[[23,28]])})))},Gs={use:qs,action:Js},Us=["app"];function Ks(){return new Promise((function(t){setTimeout((function(){t()}),200)}))}var Qs=function(t,e){this.name="destroyUi",this.dispatch=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.store.dispatch("destroy");case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),new Error(t.t0);case 8:return t.next=11,Ks();case 11:return t.abrupt("return","ok");case 12:case"end":return t.stop()}}),t,null,[[0,5]])})))},Zs={use:Us,action:Qs},ta={links:[{id:1,level:0,weight:100,user:"default",owner:"default",from:1,to:2,isInverse:!1,created:1479462872865,view:"view1",renderer:"straight",x1:417,y1:517,x2:417,y2:449,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:2,level:0,weight:100,user:"default",owner:"default",from:2,to:3,isInverse:!1,created:1479462874056,view:"view1",renderer:"straight",x1:416,y1:407,x2:415,y2:347,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:3,level:0,weight:100,user:"default",owner:"default",from:4,to:5,isInverse:!1,created:1479463014063,view:"view1",renderer:"curvedFlex",x1:950,y1:594,x2:796,y2:280,cX:844,cY:528,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:6,level:0,weight:100,user:"default",owner:"default",from:4,to:8,isInverse:!1,created:1479463208350,view:"view1",renderer:"straight",x1:968,y1:576,x2:1044,y2:504,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:7,level:0,weight:100,user:"default",owner:"default",from:8,to:9,isInverse:!1,created:1479463209071,view:"view1",renderer:"straight",x1:1070,y1:464,x2:1085,y2:344,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:8,level:0,weight:100,user:"default",owner:"default",from:9,to:10,isInverse:!1,created:1479463209590,view:"view1",renderer:"straight",x1:1085,y1:303,x2:1069,y2:220,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:9,level:0,weight:100,user:"default",owner:"default",from:11,to:12,isInverse:!1,created:1479463464268,view:"view1",renderer:"straight",x1:612,y1:566,x2:614,y2:528,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:10,level:0,weight:100,user:"default",owner:"default",from:12,to:13,isInverse:!1,created:1479463464756,view:"view1",renderer:"straight",x1:616,y1:487,x2:616,y2:459,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:11,level:0,weight:100,user:"default",owner:"default",from:13,to:14,isInverse:!1,created:1479463465316,view:"view1",renderer:"straight",x1:618,y1:418,x2:618,y2:386,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:12,level:0,weight:100,user:"default",owner:"default",from:14,to:15,isInverse:!1,created:1479463465980,view:"view1",renderer:"straight",x1:618,y1:341,x2:618,y2:310,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:13,level:0,weight:100,user:"default",owner:"default",from:15,to:16,isInverse:!1,created:1479463466700,view:"view1",renderer:"straight",x1:617,y1:265,x2:617,y2:234,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:14,level:0,weight:100,user:"default",owner:"default",from:3,to:17,isInverse:!1,created:1479463467573,view:"view1",renderer:"straight",x1:423,y1:306,x2:500,y2:136,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:15,level:0,weight:100,user:"default",owner:"default",from:16,to:17,isInverse:!1,created:1479463468580,view:"view1",renderer:"straight",x1:597,y1:193,x2:535,y2:135,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:16,level:0,weight:100,user:"default",owner:"default",from:19,to:20,isInverse:!1,created:1479463584764,view:"view1",renderer:"straight",x1:1310,y1:452,x2:1310,y2:396,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:17,level:0,weight:100,user:"default",owner:"default",from:20,to:21,isInverse:!1,created:1479463585427,view:"view1",renderer:"straight",x1:1309,y1:354,x2:1306,y2:306,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:18,level:0,weight:100,user:"default",owner:"default",from:21,to:22,isInverse:!1,created:1479463662868,view:"view1",renderer:"straight",x1:1305,y1:265,x2:1303,y2:227,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:20,level:0,weight:100,user:"default",owner:"default",from:24,to:26,isInverse:!1,created:1480782695636,view:"view1",renderer:"straight",x1:110,y1:522,x2:161,y2:451,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:21,level:0,weight:100,user:"default",owner:"default",from:25,to:26,isInverse:!1,created:1480782696627,view:"view1",renderer:"straight",x1:247,y1:524,x2:195,y2:451,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:22,level:0,weight:100,user:"default",owner:"default",from:26,to:27,isInverse:!1,created:1480782697476,view:"view1",renderer:"straight",x1:177,y1:409,x2:172,y2:367,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:23,level:0,weight:100,user:"default",owner:"default",from:27,to:28,isInverse:!1,created:1480782698125,view:"view1",renderer:"straight",x1:170,y1:326,x2:170,y2:280,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:24,level:0,weight:100,user:"default",owner:"default",from:28,to:29,isInverse:!1,created:1480782698668,view:"view1",renderer:"straight",x1:170,y1:237,x2:171,y2:193,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:25,level:0,weight:100,user:"default",owner:"default",from:30,to:31,isInverse:!1,created:1480956136862,view:"view1",renderer:"straight",x1:2053,y1:569,x2:2052,y2:529,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:26,level:0,weight:100,user:"default",owner:"default",from:31,to:32,isInverse:!1,created:1480956137700,view:"view1",renderer:"straight",x1:2050,y1:488,x2:2048,y2:451,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:27,level:0,weight:100,user:"default",owner:"default",from:32,to:33,isInverse:!1,created:1480956139196,view:"view1",renderer:"straight",x1:2033,y1:407,x2:1964,y2:306,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:28,level:0,weight:100,user:"default",owner:"default",from:32,to:34,isInverse:!1,created:1480956140668,view:"view1",renderer:"straight",x1:2045,y1:407,x2:2036,y2:246,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:29,level:0,weight:-100,user:"default",owner:"default",from:32,to:35,isInverse:!0,created:1480956141995,view:"view1",renderer:"straight",x1:2062,y1:407,x2:2198,y2:231,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:33,level:0,weight:100,user:"default",owner:"default",from:41,to:43,isInverse:!1,created:1488280843156,view:"view1",renderer:"straight",x1:2787,y1:547,x2:2724,y2:460,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:34,level:0,weight:100,user:"default",owner:"default",from:41,to:42,isInverse:!1,created:1488280844365,view:"view1",renderer:"straight",x1:2820,y1:547,x2:2918,y2:445,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:35,level:0,weight:100,user:"default",owner:"default",from:42,to:44,isInverse:!1,created:1488280913419,view:"view1",renderer:"curvedFlex",x1:2941,y1:423,x2:3047,y2:284,cX:2930,cY:436,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:36,level:0,weight:100,user:"default",owner:"default",from:43,to:46,isInverse:!1,created:1488281197083,view:"view1",renderer:"straight",x1:2702,y1:420,x2:2667,y2:317,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:37,level:0,weight:-100,user:"default",owner:"default",from:46,to:47,isInverse:!0,created:1488281235220,view:"view1",renderer:"straight",x1:2681,y1:273,x2:2770,y2:190,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:38,level:0,weight:100,user:"default",owner:"default",from:48,to:49,isInverse:!1,created:1488281458525,view:"view1",renderer:"straight",x1:2353,y1:557,x2:2275,y2:448,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:39,level:0,weight:100,user:"default",owner:"default",from:48,to:50,isInverse:!1,created:1488281459366,view:"view1",renderer:"straight",x1:2381,y1:557,x2:2450,y2:465,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:40,level:0,weight:100,user:"default",owner:"default",from:32,to:48,isInverse:!1,created:1488528575619,view:"view1",renderer:"straight",x1:2088,y1:446,x2:2320,y2:554,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:41,level:0,weight:100,user:"default",owner:"default",from:35,to:41,isInverse:!1,created:1488528604529,view:"view1",renderer:"straight",x1:2246,y1:227,x2:2763,y2:543,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:42,level:0,weight:100,user:"default",owner:"default",from:4,to:52,isInverse:!1,created:1497257179513,view:"view1",renderer:"straight",x1:948,y1:576,x2:938,y2:429,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:43,level:0,weight:100,user:"default",owner:"default",from:52,to:5,isInverse:!1,created:1497257208383,view:"view1",renderer:"straight",x1:918,y1:388,x2:809,y2:279,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:44,level:0,weight:100,user:"default",owner:"default",from:22,to:5,isInverse:!1,created:1504169278188,view:"view1",renderer:"curvedFlex",x1:1303,y1:204,x2:855,y2:239,cX:1097,cY:148,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:45,level:0,weight:100,user:"default",owner:"default",from:21,to:53,isInverse:!1,created:1509981863222,view:"view1",renderer:"curvedFlex",x1:1306,y1:283,x2:1505,y2:556,cX:1417,cY:376,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:46,level:0,weight:100,user:"default",owner:"default",from:53,to:54,isInverse:!1,created:1509981961659,view:"view1",renderer:"straight",x1:1522,y1:562,x2:1550,y2:518,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:47,level:0,weight:100,user:"default",owner:"default",from:54,to:55,isInverse:!1,created:1509982275130,view:"view1",renderer:"straight",x1:1566,y1:477,x2:1566,y2:423,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:48,level:0,weight:100,user:"default",owner:"default",from:55,to:56,isInverse:!1,created:1509982275193,view:"view1",renderer:"straight",x1:1568,y1:379,x2:1570,y2:335,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:49,level:0,weight:100,user:"default",owner:"default",from:56,to:57,isInverse:!1,created:1509982275264,view:"view1",renderer:"straight",x1:1572,y1:294,x2:1572,y2:258,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:54,level:0,weight:100,user:"default",owner:"default",from:63,to:64,isInverse:!1,created:1509982575750,view:"view1",renderer:"straight",x1:603,y1:948,x2:597,y2:874,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:55,level:0,weight:100,user:"default",owner:"default",from:64,to:65,isInverse:!1,created:1509982575785,view:"view1",renderer:"straight",x1:592,y1:833,x2:575,y2:757,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:56,level:0,weight:100,user:"default",owner:"default",from:57,to:66,isInverse:!1,created:1509982621402,view:"view1",renderer:"straight",x1:1555,y1:213,x2:1513,y2:165,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:57,level:0,weight:100,user:"default",owner:"default",from:66,to:65,isInverse:!1,created:1509982630162,view:"view1",renderer:"curvedFlex",x1:1493,y1:141,x2:611,y2:710,cX:1139,cY:387,style:{stroke:"#dbd4d4","stroke-dasharray":"5, 5"}},{id:58,level:0,weight:100,user:"default",owner:"default",from:67,to:68,isInverse:!1,created:1509982923417,view:"view1",renderer:"straight",x1:896,y1:959,x2:902,y2:920,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:59,level:0,weight:100,user:"default",owner:"default",from:68,to:69,isInverse:!1,created:1509982995001,view:"view1",renderer:"straight",x1:906,y1:879,x2:906,y2:836,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:60,level:0,weight:100,user:"default",owner:"default",from:69,to:70,isInverse:!1,created:1509983060005,view:"view1",renderer:"straight",x1:886,y1:794,x2:832,y2:743,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:61,level:0,weight:100,user:"default",owner:"default",from:69,to:71,isInverse:!1,created:1509983060630,view:"view1",renderer:"curvedFlex",x1:906,y1:812,x2:989,y2:739,cX:932,cY:782,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:62,level:0,weight:100,user:"default",owner:"default",from:71,to:72,isInverse:!1,created:1509983060765,view:"view1",renderer:"curvedFlex",x1:988,y1:714,x2:1115,y2:657,cX:1033,cY:694,style:{stroke:"#000000","stroke-dasharray":"none"}},{id:63,level:0,weight:100,user:"default",owner:"default",from:68,to:73,isInverse:!1,created:1509983168997,view:"view1",renderer:"straight",x1:947,y1:879,x2:1061,y2:829,cX:0,cY:0,style:{stroke:"#000000","stroke-dasharray":"none"}}],nodes:[{id:1,created:1479462816502,mappers:"default",sources:"default",sets:["moving"],x:354,y:517,content:"left click me",annotation:"",weight:0,view:0,style:{left:"354px",top:"517px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:2,created:1479462825980,mappers:"default",sources:"default",sets:["moving"],x:354,y:407,content:"see how statement 1 gets a blue outline",annotation:"",weight:0,view:0,style:{left:"354px",top:"407px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:3,created:1479462845465,mappers:"default",sources:"default",sets:["moving"],x:352,y:306,content:"move it around",annotation:"",weight:0,view:0,style:{left:"352px",top:"306px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:4,created:1479462974738,mappers:"default",sources:"default",sets:["context menu"],x:887,y:576,content:"right click me",annotation:"",weight:0,view:0,style:{left:"887px",top:"576px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:5,created:1479462993178,mappers:"default",sources:"default",sets:["context menu"],x:724,y:239,content:"try each of the context menu items",annotation:"",weight:0,view:0,style:{left:"724px",top:"239px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:8,created:1479463119665,mappers:"default",sources:"default",sets:["context menu"],x:1005,y:464,content:"notice the bottom input field",annotation:"",weight:0,view:0,style:{left:"1005px",top:"464px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:9,created:1479463150566,mappers:"default",sources:"default",sets:["context menu"],x:1026,y:303,content:"enter a word",annotation:"",weight:0,view:0,style:{left:"1026px",top:"303px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:10,created:1479463167191,mappers:"default",sources:"default",sets:["context menu"],x:1002,y:176,content:"learn that these are sets, or tags, you can assign to statements",annotation:"",weight:0,view:0,style:{left:"1002px",top:"176px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:11,created:1479463276416,mappers:"default",sources:"default",sets:["moving"],x:549,y:566,content:"move your mouse right beside (ie outside) me",annotation:"",weight:0,view:0,style:{left:"549px",top:"566px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:12,created:1479463298983,mappers:"default",sources:"default",sets:["moving"],x:553,y:487,content:"left click on the white space",annotation:"",weight:0,view:0,style:{left:"553px",top:"487px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:13,created:1479463311727,mappers:"default",sources:"default",sets:["moving"],x:555,y:418,content:"keep the button pushed down",annotation:"",weight:0,view:0,style:{left:"555px",top:"418px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:14,created:1479463326279,mappers:"default",sources:"default",sets:["moving"],x:555,y:341,content:"move your mouse to the top right outside of statement 3",annotation:"",weight:0,view:0,style:{left:"555px",top:"341px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:15,created:1479463404230,mappers:"default",sources:"default",sets:["moving"],x:555,y:265,content:"should notice the blue outlines once button released",annotation:"",weight:0,view:0,style:{left:"555px",top:"265px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:16,created:1479463416879,mappers:"default",sources:"default",sets:["moving"],x:554,y:193,content:"move the outlined statements around",annotation:"",weight:0,view:0,style:{left:"554px",top:"193px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:17,created:1479463437070,mappers:"default",sources:"default",sets:["moving"],x:449,y:95,content:"click on the white space to unselect",annotation:"",weight:0,view:0,style:{left:"449px",top:"95px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#ffffff"}},{id:18,created:1479463495724,mappers:"default",sources:"default",sets:["linking"],x:1246,y:559,content:"notice that this one is without a link",annotation:"",weight:0,view:0,style:{left:"1246px",top:"559px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:19,created:1479463518742,mappers:"default",sources:"default",sets:["linking"],x:1247,y:452,content:"look at the symbol (three dots with two connections) on the top left on your screen",annotation:"",weight:0,view:0,style:{left:"1247px",top:"452px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:20,created:1479463556005,mappers:"default",sources:"default",sets:["linking"],x:1247,y:354,content:"click on it (link mode)",annotation:"",weight:0,view:0,style:{left:"1247px",top:"354px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:21,created:1479463567838,mappers:"default",sources:"default",sets:["linking"],x:1243,y:265,content:"click on statement 18 and then 19 to link them",annotation:"",weight:0,view:0,style:{left:"1243px",top:"265px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:22,created:1479463599996,mappers:"default",sources:"default",sets:["linking"],x:1240,y:186,content:"move your mouse over the new link",annotation:"",weight:0,view:0,style:{left:"1240px",top:"186px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:24,created:1480782520495,mappers:"default",sources:"default",sets:["style"],x:31,y:522,content:"too big",annotation:"",weight:0,view:0,style:{left:"31px",top:"522px",color:"#000000","background-color":"#ffffff","font-size":"24px","border-width":"3px","border-style":"solid","border-color":"#000000"}},{id:25,created:1480782524888,mappers:"default",sources:"default",sets:["style"],x:197,y:524,content:"too small",annotation:"",weight:0,view:0,style:{left:"197px",top:"524px",color:"#000000","background-color":"#ffffff","font-size":"8px","border-width":"1px","border-style":"dotted","border-color":"#000000"}},{id:26,created:1480782581583,mappers:"default",sources:"default",sets:["style"],x:116,y:409,content:'click menu "Panes"',annotation:"",weight:0,view:0,style:{left:"116px",top:"409px",color:"#000000","background-color":"#ffffff","font-size":"14px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:27,created:1480782619030,mappers:"default",sources:"default",sets:["style"],x:108,y:326,content:'click on "Style"',annotation:"",weight:0,view:0,style:{left:"108px",top:"326px",color:"#000000","background-color":"#ffffff","font-size":"14px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:28,created:1480782636318,mappers:"default",sources:"default",sets:["style"],x:107,y:237,content:"find a desirable text size",annotation:"",weight:0,view:0,style:{left:"107px",top:"237px",color:"#000000","background-color":"#ffffff","font-size":"14px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:29,created:1480782651222,mappers:"default",sources:"default",sets:["style"],x:110,y:150,content:"save as default and apply to all",annotation:"",weight:0,view:0,style:{left:"110px",top:"150px",color:"#000000","background-color":"#ffffff","font-size":"14px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:30,created:1480955987857,mappers:"default",sources:"default",sets:["editing"],x:1991,y:569,content:"notcie a tpyo",annotation:"",weight:0,view:0,style:{left:"1991px",top:"569px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:31,created:1480956011145,mappers:"default",sources:"default",sets:["editing"],x:1989,y:488,content:"double click on statement 30",annotation:"",weight:0,view:0,style:{left:"1989px",top:"488px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:32,created:1480956023985,mappers:"default",sources:"default",sets:["editing"],x:1984,y:407,content:"correct typo...accidentally delete the text",annotation:"",weight:0,view:0,style:{left:"1984px",top:"407px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:33,created:1480956100962,mappers:"default",sources:"default",sets:["editing"],x:1886,y:266,content:"press enter",annotation:"",weight:0,view:0,style:{left:"1886px",top:"266px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:34,created:1480956109157,mappers:"default",sources:"default",sets:["editing"],x:1973,y:205,content:"click outside the statement",annotation:"",weight:0,view:0,style:{left:"1973px",top:"205px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:35,created:1480956125734,mappers:"default",sources:"default",sets:["editing"],x:2154,y:191,content:'press "ESC" key',annotation:"",weight:0,view:0,style:{left:"2154px",top:"191px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:41,created:1488280769221,mappers:"default",sources:"default",sets:["negative links"],x:2738,y:547,content:"wonder what this strange red bar under statement 35 means",annotation:"",weight:0,view:0,style:{left:"2738px",top:"547px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:42,created:1488280799400,mappers:"default",sources:"default",sets:["negative links"],x:2878,y:405,content:"desire to remove it...create additional ones",annotation:"",weight:0,view:0,style:{left:"2878px",top:"405px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:43,created:1488280816381,mappers:"default",sources:"default",sets:["negative links"],x:2646,y:420,content:"learn that this thing is a negative sign",annotation:"",weight:0,view:0,style:{left:"2646px",top:"420px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:44,created:1488280874874,mappers:"default",sources:"default",sets:["negative links"],x:2996,y:218,content:'right click on the link with the red bar and select "Switch polarity"...do the same on a link without a red bar',annotation:"",weight:0,view:0,style:{left:"2996px",top:"218px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:46,created:1488281150500,mappers:"default",sources:"default",sets:["negative links"],x:2597,y:273,content:'learn that it means "A may not lead to B"...something else',annotation:"",weight:0,view:0,style:{left:"2597px",top:"273px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:47,created:1488281232802,mappers:"default",sources:"default",sets:["negative links"],x:2746,y:125,content:"learn that a negative link connects the second part of a bi-polar statement if such a statement is present",annotation:"",weight:0,view:0,style:{left:"2746px",top:"125px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:48,created:1488281398669,mappers:"default",sources:"default",sets:["bipolar"],x:2304,y:557,content:"wonder what these strange three dots mean in statement 32",annotation:"",weight:0,view:0,style:{left:"2304px",top:"557px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:49,created:1488281419909,mappers:"default",sources:"default",sets:["bipolar"],x:2197,y:408,content:'learn that they mean "rather than"',annotation:"",weight:0,view:0,style:{left:"2197px",top:"408px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:50,created:1488281434636,mappers:"default",sources:"default",sets:["bipolar"],x:2407,y:422,content:"learn that they represent a bi-polar opposite",annotation:"",weight:0,view:0,style:{left:"2407px",top:"422px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:51,created:1490694609906,mappers:"default",sources:"default",sets:["new"],x:219,y:792,content:"your turn",annotation:"",weight:0,view:0,style:{left:"219px",top:"792px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:52,created:1497257159775,mappers:"default",sources:"default",sets:["context menu"],x:874,y:388,content:"right click the link between me and 4",annotation:"",weight:0,view:0,style:{left:"874px",top:"388px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:53,created:1509981783077,mappers:"default",sources:"default",sets:["link dragging"],x:1447,y:562,content:"wonder whether there is not a quicker way to do this",annotation:"",weight:100,view:0,style:{left:"1447px",top:"562px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:54,created:1509981910696,mappers:"default",sources:"default",sets:["link dragging"],x:1503,y:477,content:"go into link mode again",annotation:"",weight:100,view:0,style:{left:"1503px",top:"477px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:55,created:1509982174252,mappers:"default",sources:"default",sets:["link dragging"],x:1505,y:379,content:"move your mouse over the bottom, unconnected statement to the right",annotation:"",weight:100,view:0,style:{left:"1505px",top:"379px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:56,created:1509982213763,mappers:"default",sources:"default",sets:["link dragging"],x:1509,y:294,content:"click and keep pressed the right mouse button",annotation:"",weight:100,view:0,style:{left:"1509px",top:"294px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:57,created:1509982253448,mappers:"default",sources:"default",sets:["link dragging"],x:1510,y:213,content:"hover over each statement you want to connect in order",annotation:"",weight:100,view:0,style:{left:"1510px",top:"213px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:58,created:1509982325375,mappers:"default",sources:"default",sets:["link dragging"],x:1696,y:419,content:"just an unconnected statement",annotation:"",weight:100,view:0,style:{left:"1696px",top:"419px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:59,created:1509982339390,mappers:"default",sources:"default",sets:["link dragging"],x:1705,y:328,content:"and another one",annotation:"",weight:100,view:0,style:{left:"1705px",top:"328px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:60,created:1509982348182,mappers:"default",sources:"default",sets:["link dragging"],x:1701,y:252,content:"and yet another one",annotation:"",weight:100,view:0,style:{left:"1701px",top:"252px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:61,created:1509982363598,mappers:"default",sources:"default",sets:["link dragging"],x:1690,y:172,content:"not the last one",annotation:"",weight:100,view:0,style:{left:"1690px",top:"172px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:62,created:1509982374158,mappers:"default",sources:"default",sets:["link dragging"],x:1596,y:100,content:"the final one",annotation:"",weight:100,view:0,style:{left:"1596px",top:"100px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:63,created:1509982494931,mappers:"default",sources:"default",sets:["undo"],x:542,y:948,content:"notice the button with the bold, curved arrow on the top left under the main menu",annotation:"",weight:100,view:0,style:{left:"542px",top:"948px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:64,created:1509982527624,mappers:"default",sources:"default",sets:["undo"],x:533,y:833,content:"learn that this is an undo button",annotation:"",weight:100,view:0,style:{left:"533px",top:"833px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:65,created:1509982545385,mappers:"default",sources:"default",sets:["undo"],x:507,y:713,content:"go right ahead and do some random actions and test it",annotation:"",weight:100,view:0,style:{left:"507px",top:"713px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:66,created:1509982591632,mappers:"default",sources:"default",sets:["link dragging"],x:1430,y:122,content:"notice how much fun this is and resist to draw unnecessary links",annotation:"",weight:100,view:0,style:{left:"1430px",top:"122px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:67,created:1509982739413,mappers:"default",sources:"default",sets:["views"],x:831,y:959,content:'notice the two arrows that surround "View 1" at the bottom of the screen',annotation:"I am an annotation. If you click on my ID, in the annotations pane, the screen will jump to  the underlying node.",weight:100,view:0,style:{left:"831px",top:"959px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:68,created:1509982908342,mappers:"default",sources:"default",sets:["views"],x:843,y:879,content:"click one of the buttons",annotation:"",weight:100,view:1,style:{left:"843px",top:"879px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:69,created:1509982940369,mappers:"default",sources:"default",sets:["views"],x:843,y:794,content:"wonder where all the statements have gone",annotation:"",weight:100,view:1,style:{left:"843px",top:"794px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:70,created:1509983004654,mappers:"default",sources:"default",sets:["views"],x:746,y:703,content:"click one of the buttons again",annotation:"",weight:100,view:1,style:{left:"746px",top:"703px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:71,created:1509983026126,mappers:"default",sources:"default",sets:["views"],x:925,y:695,content:"right click on the view drop down field (between the two arrows)",annotation:"",weight:100,view:1,style:{left:"925px",top:"695px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:72,created:1509983044909,mappers:"default",sources:"default",sets:["views"],x:1062,y:616,content:'select "Show all"',annotation:"",weight:100,view:1,style:{left:"1062px",top:"616px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}},{id:73,created:1509983093310,mappers:"default",sources:"default",sets:["views"],x:1050,y:788,content:"be relieved that the work space is way more tidy now",annotation:"",weight:100,view:1,style:{left:"1050px",top:"788px",color:"#000000","background-color":"#FFFFFF","font-size":"10px","border-width":"1px","border-style":"solid","border-color":"#000000"}}],map:{id:0,mapLabel:"default",mapDescription:"",mapCopyrightInformation:"",creationDate:1479462808185,lastSession:0,width:4e3,height:4e3},sets:["moving","context menu","linking","style","editing","negative links","bipolar","new","link dragging","undo","views"],views:[{id:0,label:"View 1"},{id:1,label:"View 2"}],system:{vfsv:7,saveTime:1571212628965}},ea=["dataLoader","action","fileServer"],na=function(t,e){function n(t,e){for(var n in t.state)if("undefined"!==typeof t.state[n].augmentations)for(var i=t.state[n].augmentations,o=0,r=e[n].length;o<r;o++)for(var s in i)e[n][o][s]=JSON.parse(JSON.stringify(i[s]))}this.name="loadTutorial",this.dispatch=function(){var i=Object(o["a"])(regeneratorRuntime.mark((function i(o){var r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.action.dispatch("destroyUi");case 3:i.next=9;break;case 5:return i.prev=5,i.t0=i["catch"](0),console.error(i.t0),i.abrupt("return",reportErrorAndDone("Failed to reset the application. Loading aborted."));case 9:r=t.dataLoader.load(ta,"savjs"),n(e.store,r),e.store.dispatch("load",r);case 13:case"end":return i.stop()}}),i,null,[[0,5]])})));return function(t){return i.apply(this,arguments)}}()},ia={use:ea,action:na},oa=["nodes"],ra=function(t,e){this.name="addNode",this.execute=function(t){return e.store.dispatch("addNode",t)},this.undo=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,i,o){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i;case 2:r=t.sent,e.store.dispatch("deleteNode",{id:r.id});case 4:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()},sa={use:oa,command:ra},aa=[],da=function(t,e){this.name="deleteNode",this.execute=function(t){e.store.dispatch("deleteNode",t)},this.undo=function(t){var n=t[0].id;e.store.dispatch("undeleteNode",{id:n})}},la={use:aa,command:da},ca=[],ua=function(t,e){this.name="setNode",this.execute=function(t){e.store.dispatch("setNode",t)},this.undo=function(t,n,i){i.forEach((function(t){e.store.dispatch("setNode",t)}))},this.cache=function(t){for(var n=t instanceof Array?t[0]:[t],i=[],o=0,r=n.length;o<r;o++){var s=n[o].id,a=e.store.getters.getNodeById(s),d={id:s};for(var l in n[o])"id"!=l&&"style"!=l&&(d[l]=a[l]);if("undefined"!==typeof n[o].style)for(var c in d.style={},n[o].style)d.style[c]=e.store.getters.nodeProperty(n[o].id,c);i.push(d)}return i}},pa={use:ca,command:ua},ha=["links","nodes"],fa=function(t,e){this.name="addLink",this.execute=function(t){return t.fNode=e.store.getters.getNodeById(t.from),t.tNode=e.store.getters.getNodeById(t.to),e.store.dispatch("addLink",t)},this.undo=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,i,o){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i;case 2:r=t.sent,e.store.dispatch("deleteLink",{id:r.id});case 4:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()},ma={use:ha,command:fa},va=[],ga=function(t,e){this.name="deleteLink",this.execute=function(t){e.store.dispatch("deleteLink",t)},this.undo=function(t){e.store.dispatch("undeleteLink",t[0])}},ya={use:va,command:ga},wa=[],ba=function(t,e){this.name="setLink",this.execute=function(t){e.store.dispatch("setLink",t)},this.undo=function(t,n,i){i.forEach((function(t){e.store.dispatch("setLink",t)}))},this.cache=function(t){for(var n=t instanceof Array?t[0]:[t],i=[],o=0,r=n.length;o<r;o++){var s=n[o].id,a=e.store.getters.getLinkById(s),d={id:s};for(var l in n[o])"id"!=l&&"style"!=l&&(d[l]=a[l]);if("undefined"!==typeof n[o].style)for(var c in d.style={},n[o].style)d.style[c]=a.style[c];i.push(d)}return i}},xa={use:wa,command:ba},ka=["map"],Sa=function(t,e){this.name="setMap",this.execute=function(t){e.store.dispatch("setMap",t)},this.undo=function(t,n,i){e.store.dispatch("setMap",i)},this.cache=function(t){var n={},i=t,o=e.store.state.map.map;for(var r in i)n[r]=o[r];return n}},Ca={use:ka,command:Sa},Fa=["nodes","map"],Na=function(t,e){var n=this;this.name="shiftMap",this.execute=function(t){var n=t.amount,i=t.direction,o="undefined"===typeof t.limitToView?"none":t.limitToView,r=e.store.getters.map,s=e.store.state.nodes.elements,a=0,d=0,l=r.width,c=r.height;switch(i){case 0:a=-1*n;break;case 1:d=n;break;case 2:a=n;break;case 3:d=-1*n;break;default:break}if(0===a&&0===d)return!1;var u="none"===o?s.map((function(t){return{id:t.id,x:t.x,y:t.y,w:t.w,h:t.h}})):s.filter((function(t){return t.view===o})).map((function(t){return{id:t.id,x:t.x,y:t.y,w:t.w,h:t.h}}));if(0===u.length)return!1;for(var p=0,h=u.length;p<h;p++){if(u[p].x+=d,u[p].y+=a,u[p].x<0)return!1;if(u[p].y<0)return!1;if(u[p].x+u[p].w>l)return!1;if(u[p].y+u[p].h>c)return!1}u.forEach((function(t){e.store.dispatch("setNode",{id:t.id,x:t.x,y:t.y})}))},this.undo=function(t,e,i){var o=t[0].amount,r=t[0].direction,s=t[0].limitToView;r=r<=1?r+2:r-2,n.execute({amount:o,direction:r,views:s})}},Oa={use:Fa,command:Na},$a=["sets"],Ea=function(t,e){this.name="addSet",this.execute=function(t){e.store.dispatch("addSet",t)},this.undo=function(t,n,i){e.store.dispatch("removeSet",t[0])}},Ia={use:$a,command:Ea},Pa=["sets","nodes"],La=function(t,e){this.name="deleteSet",this.execute=function(t){for(var n=t,i=[],o=e.store.state.nodes.elements,r=0,s=o.length;r<s;r++){var a=o[r];-1!==a.sets.indexOf(n)&&i.push({id:a.id,sets:n})}return e.store.dispatch("removeSet",t),e.store.dispatch("setNode",i),i},this.undo=function(t,n,i){var o=t[0];e.store.dispatch("addSet",o),e.store.dispatch("setNode",n)}},Ta={use:Pa,command:La},Ma=["nodes"],Aa=function(t,e){var n=this;this.name="renameSet",this.execute=function(t,n){for(var i=e.store.state.nodes.elements,o=0,r=i.length;o<r;o++){var s=i[o],a=s.sets.indexOf(t);-1!==a&&(e.store.dispatch("setNode",{id:s.id,sets:{value:n,index:a},arrOp:"insert"}),e.store.dispatch("setNode",{id:s.id,sets:t,arrOp:"delete"}))}e.store.dispatch("renameSet",{oldSet:t,newSet:n})},this.undo=function(t,e,i){var o=t[0],r=t[1];n.execute(r,o)}},Da={use:Ma,command:Aa},_a=[Hs,Gs,Zs,ia],Wa=[sa,la,pa,ma,ya,xa,Ca,Oa,Ia,Ta,Da];function Ra(t){Xs(We,t,"command",Wa),Xs(We,t,"action",_a)}var Ba=vn.contextMenu,za=vn.windows,ja=vn.dragAndDropInstaller,Xa=vn.modalDialogs.installer,Ya=vn.modalElement;function Va(t,e,n){if(e(t,n),"modules"in t)for(var i in t.modules){var o=n+(t.modules[i].namespaced?"/"+i:"");"/"===o[0]&&(o=o.substring(1,o.length)),Va(t.modules[i],e,o)}}function Ha(t,e,n){var i=e._modules.root._children,o=e._modules.root._rawModule;for(var r in Va(o,n,""),i)r in o.modules||"storeVisitor"===r||Va(i[r]._rawModule,n,r)}var qa,Ja=We.request("uiInit",["action","command","constants"]),Ga=Ja.action,Ua=Ja.command,Ka=Ja.constants,Qa={beforeCreate:function(){var t=this;this.$api=this.$api||{},this.$api.command=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("undo"===e)return Ua.undo();var o=Ua.getAvailableCommands(),r=o.indexOf(e)>-1,s=!1===i.undoable;if(r&&!s)return Ua.execute(e,n);var a=Ga.getAvailableActions(),d=!1===r&&a.indexOf(e)>-1;if(d)return Ga.dispatch(e,n);var l=Object.keys(t.$store._actions);if(l.indexOf(e)>-1)return t.$store.dispatch(e,n);throw new Error("Tried to call an unknown interactor function: "+e)},this.$api.query=function(e,n,i){if(e in t.$store.getters)return void 0===n?t.$store.getters[e]:t.$store.getters[e](n)}}};function Za(){yn.use(bn);var t=new bn.Store(mi);t.registerModule("storeVisitor",{actions:{storeVisitor:function(e,n){Ha(mi,t,n)}}}),zs(yn),yn.directive("text",{inserted:function(t,e){t.textContent=e.value}}),yn.use(Bs,{constants:Ka.get()}),yn.use(Ba.installer,{vuex:t,globalInstall:!1,modalService:{start:Ya.push,stop:Ya.forcePop}}),yn.use(za.installer,{vuex:t,storeNamespace:"windows",windows:Is.windows,headers:Is.headers}),yn.use(ja,{vuex:t}),yn.use(Xa,{vuex:t,customDialogs:[{name:"editAnnotation",dialog:Rs}]}),qa=new yn({mixins:[Qa],el:"#VueRoot",template:'<site v-if="apiReady" />',store:t,components:{site:vr},data:function(){return{apiReady:!0}}}),Ra({store:qa.$store}),window.debug=window.debug||{},window.debug.store=qa.$store,window.debug.vue=qa;var e=document.createElement("div");e.style.position="absolute",e.style.zIndex=999999,e.style.backgroundColor="white",e.style["pointer-events"]="none",document.body.appendChild(e),document.addEventListener("mousemove",(function(t){e.textContent=t.pageX+" | "+t.pageY}))}function td(){return ed.apply(this,arguments)}function ed(){return ed=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.error(t.t0);case 8:Za();case 9:case"end":return t.stop()}}),t,null,[[0,5]])}))),ed.apply(this,arguments)}td()}});